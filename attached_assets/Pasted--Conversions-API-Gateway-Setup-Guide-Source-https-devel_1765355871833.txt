### Conversions API Gateway - Setup Guide

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/guides/gateway/troubleshooting

A step-by-step guide on how to set up the Conversions API Gateway.

```APIDOC
## Conversions API Gateway - Setup Guide

### Description
This guide provides detailed instructions for setting up the Conversions API Gateway to manage your event data.

### Method
N/A

### Endpoint
N/A

### Parameters
N/A

### Request Example
N/A

### Response
N/A
```

--------------------------------

### Conversions API Overview

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameters/server-event

This section provides an overview of the Conversions API, including how to get started, use the API, and verify your setup.

```APIDOC
## Conversions API

### Description

The Conversions API allows businesses to send website and offline event data directly from their servers to Facebook, offering more control and reliability than browser-based tracking.

### Key Sections

*   **Get Started**: Initial setup and integration steps.
*   **Using the API**: Core concepts and workflow for sending events.
*   **Verifying Setup**: Tools and methods to confirm data is being received correctly.
*   **Parameters**: Detailed documentation for all available event parameters, categorized for clarity (Main Body, Server Event, Customer Information, Standard, App Data, Original Event Data).
*   **Parameter Builder Library**: Resources for constructing event payloads.
*   **Specific Use Cases**: Guides for App Events, Offline Events, Business Messaging, and Conversion Leads.
*   **Dataset Quality API**: For monitoring event quality.
*   **Handling Duplicate Events**: Strategies to avoid sending duplicate data.
*   **Guides**: Best practices and advanced topics.
*   **Troubleshooting**: Common issues and solutions.
```

--------------------------------

### Get Started with Real Estate Ads

Source: https://developers.facebook.com/docs/marketing-api/dynamic-ads-for-real-estate

A step-by-step guide on how to begin using the Real Estate Ads API.

```APIDOC
## Get Started with Real Estate Ads

### Description
This section outlines the necessary steps to get started with Facebook's Real Estate Ads API, including catalog setup and initial campaign creation.

### Steps
1. **Set up a Real Estate Catalog:** Ensure you have an appropriate catalog listing properties (apartments, condos, homes, land, etc.).
2. **Update Catalogs:** Learn how to regularly update your property listings using batch uploads or partial uploads.
3. **Adhere to Special Ad Category:** Specify `HOUSING` as the `special_ad_category` for housing ad campaigns.
4. **Create Ads:** Utilize the API to create customized ads that promote your listings.
```

--------------------------------

### Conversions API - Get Started

Source: https://developers.facebook.com/docs/marketing-api/facebook-pixel/server-side-api

Information on choosing an integration method, understanding prerequisites, and starting with the Conversions API.

```APIDOC
## Get Started

### Description
Choose the integration method that best suits your needs, review the prerequisites for using the Conversions API, and learn where to begin your implementation.

### Method
GET

### Endpoint
/vX.X/getting_started

### Parameters
None

### Request Example
None

### Response
#### Success Response (200)
- Documentation detailing integration options and prerequisites.

#### Response Example
None
```

--------------------------------

### Conversions API - Get Started

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/guides/gateway/troubleshooting

An introduction to the Conversions API and how to begin using it.

```APIDOC
## Conversions API - Get Started

### Description
This section provides an overview of the Facebook Conversions API and guides you through the initial steps to start sending conversion events.

### Method
N/A

### Endpoint
N/A

### Parameters
N/A

### Request Example
N/A

### Response
N/A
```

--------------------------------

### Conversions API Gateway - Getting Started

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/guides/gateway/troubleshooting

Provides an overview and initial steps for using the Conversions API Gateway.

```APIDOC
## Conversions API Gateway - Getting Started

### Description
This section details how to get started with the Conversions API Gateway, including its purpose and initial setup.

### Method
N/A

### Endpoint
N/A

### Parameters
N/A

### Request Example
N/A

### Response
N/A
```

--------------------------------

### Example JSON for Available Dates Price Config

Source: https://developers.facebook.com/docs/marketing-api/real-estate-ads/get-started

This JSON structure demonstrates how to provide the availability and prices of a property for specific date ranges. It includes start and end dates, rate, currency, and the interval (e.g., nightly, weekly, monthly).

```json
"available_dates_price_config": [
    {
        "end_date": "2018-11-01",
        "rate": "15000",
        "currency": "USD",
        "interval": "nightly"
    },
    {
        "start_date": "2018-11-01",
        "end_date": "2018-12-01",
        "rate": "20000",
        "currency": "USD",
        "interval": "nightly"
    },
    {
        "start_date": "2018-11-01",
        "rate": "50000",
        "currency": "USD",
        "interval": "weekly"
    }
]
```

--------------------------------

### Lead Ads Webhooks Setup

Source: https://developers.facebook.com/docs/marketing-api/guides/lead-ads/retrieving

This section outlines the steps to set up webhooks for real-time lead ad updates. It includes getting started, obtaining a long-lived page access token, and installing your app on the page.

```APIDOC
## Webhooks for Lead Ads

### Description
Configure real-time notifications for new leads submitted through Facebook Lead Ads.

### Method
N/A (This describes a configuration process, not a direct API call)

### Endpoint
N/A

### Steps
1.  **Get Started**: Visit the Webhooks Get Started guide to set up your endpoint and configure your webhook.
2.  **Get a Long-Lived Page Access Token**: Generate a single, long-lived Page token to continuously fetch data without worrying about it expiring.
3.  **Install Your App on the Page**: Visit the Webhooks for Pages guide to learn how to install your app on a Page.
```

--------------------------------

### Install Python SDK for Conversions API Parameter Builder

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/server-side-onboarding

This command installs the CAPI Parameter Builder Python library using pip. After installation, you can verify its presence by running 'pip list'.

```bash
pip install capi_param_builder_python
```

--------------------------------

### Install Ruby Gem for Conversions API Parameter Builder

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/server-side-onboarding

This command installs the CAPI Parameter Builder Ruby gem. Ensure your Ruby environment is set up correctly to install gems.

```bash
gem install capi_param_builder_ruby
```

--------------------------------

### Conversions API - Verifying Setup

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/guides/gateway-multiple-accounts

Guides on how to verify that your Conversions API implementation is set up correctly and events are being received by Meta.

```APIDOC
## Verifying Conversions API Setup

### Description
Ensuring your Conversions API implementation is working correctly is crucial. This section provides methods and tools to verify that events are being sent and received by Meta accurately.

### Verification Methods
*   **Test Events Tool:** Use the Test Events tool in Events Manager to send test events and see if they are received.
*   **Server Logs:** Check your server logs for successful API request confirmations.
*   **Events Manager Dashboard:** Monitor the dashboard for incoming events and potential errors.

### Troubleshooting
If you encounter issues, consult the 'Troubleshooting' section for common problems and solutions.
```

--------------------------------

### Preview Advantage+ Creative Feature

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

This `curl` example demonstrates how to request a preview for a specific Advantage+ Creative feature using the Facebook Marketing API. It includes parameters for ad format, the desired creative feature, and an access token.

```shell
curl -X GET -G \
  -d 'ad_format="DESKTOP_FEED_STANDARD"' \
  -d 'creative_feature=<FEATURE_NAME> \
  -d 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/<AD_ID>/previews
```

--------------------------------

### Adapting Ads to Placements with Facebook Marketing API

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

This JSON example demonstrates how to enable the `adapt_to_placement` feature. By setting `adapt_to_placement.enroll_status` to `OPT_IN`, 9:16 images from your catalog will be displayed in supported placements like Instagram Stories and Reels.

```JSON
{
    "creative_features_spec": {
        "adapt_to_placement": {
            "enroll_status": "OPT_IN"
        }
    }
}
```

--------------------------------

### Preview Advantage+ Creative Ad Response

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

This JSON structure represents an example response for previewing an ad creative with Advantage+ Creative features. It includes the body of the ad, and within `transformation_spec`, it details which features are eligible for the given placement.

```json
{
  "data": [
    {
      "body": "<iframe src='<PREVIEW_URL>'></iframe>",
      "transformation_spec": {
        "<FEATURE_NAME>": [
          {
            "body": "<iframe src='<PREVIEW_URL>'></iframe>",
            "status": "eligible"
          }
        ]
      }
    }
  ]
}
```

--------------------------------

### Implement eTLD+1 Resolver (Java)

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/server-side-onboarding

This Java example demonstrates a custom SimpleETLDPlusOneresolver implementing the ETLDPlusOneResolver interface, returning 'example.com' if the provided domain is a subdomain.

```java
// We provide DefaultETLDPlusOneResolver, which uses Guava InternetDomainName to resolve ETLD+1. If you prefer to do it yourself, follow the example below:

public class SimpleETLDPlusOneresolver implements ETLDPlusOneResolver {
	@Override
	public String resolve(String domain) {
               if (isSubdomain(domain, "example.com")) {
	       return "example.com"
               }
               // throw exception or fallback to other function
        }
}

```

--------------------------------

### Create AdCreative with Music Feature

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

This `curl` example shows how to create an ad creative using the Facebook Marketing API, specifically opting into the 'Advantage+ Creative Music' feature by setting an audio type in the `asset_feed_spec`.

```shell
curl -X POST \
  -F 'name="Advantage+ Creative Music"' \
  -F 'object_story_spec={
       "page_id": "<PAGE_ID>"
     }' \
  -F 'asset_feed_spec={
       "audios": [
         {
           "type": "random"
         }
       ]
     }' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

--------------------------------

### Testing and Development Setup

Source: https://developers.facebook.com/docs/marketing-api/2tier-bm-solution/support

This guide outlines the steps to set up a testing environment for the Facebook Marketing APIs, including creating test users and obtaining access tokens.

```APIDOC
## Testing and Development Setup

### Description
This guide outlines the steps to set up a testing environment for the Facebook Marketing APIs. It covers creating test users, generating access tokens with the necessary permissions, and configuring test pages.

### Steps
1. **Log in to your app dashboard** at `https://developers.facebook.com/`. 
2. **Add a test user**: Navigate to your app's roles and click on "Add Test User". You can also add a test user for a specific Business Manager using the following URL structure: `https://developers.facebook.com/apps/app_id/roles/test-users/?business_id=bmid` (Replace `app_id` and `bmid` with your actual App ID and Business Manager ID).
3. **Generate an access token for the test user**: After creating the test user, click "Edit" for that user and then "Generate Access Token". Ensure you select the `business_management` and `ads_management` permissions. You may also need to grant standard tier access depending on the API features you are testing.
4. **Create or use an existing Facebook Page**: For testing purposes, create a new Facebook Page or use one that is already available.
5. **Add the test user as an admin to the test Page**: Go to the Page's settings (`https://www.facebook.com/page_id/settings/?tab=admin_roles`, replacing `page_id` with the actual Page ID) and assign the newly created test user the "Page Admin" role.
6. **Use the test user in API calls**: Now you can use the test user's generated access token in your API requests to interact with the Marketing APIs in a test environment.

### Important Notes
- Ensure your app is marked as a non-development app and has undergone App Review if you are testing features that require it.
- Without standard-tier access, certain Marketing API features may not be available for testing.
```

--------------------------------

### Real Estate Ads Overview

Source: https://developers.facebook.com/docs/marketing-api/real-estate-ads

Information on how to get started with real estate ads on Facebook, including catalog setup and usage.

```APIDOC
## Real Estate Ads

### Description
Use Facebook's real estate ads to leverage cross-device intent signals to automatically promote relevant listings from your inventory with a unique creative on Facebook. For Facebook Marketplace, use this list of our Marketplace listing partners and contact them to arrange for your inventory to be on Marketplace. (Currently, this feature is only available in certain countries.)

To use Facebook's real estate ads, you need an appropriate real estate catalog that lists properties (apartments, condos, homes, land, and so on) to advertise. Each property has information to create customized ads. You can regularly update catalogs through various options. If you use batch uploads, you can also use a partial upload option that enables you to create or update items that changed; see Batch Upload. This is available for all Advantage+ catalog ads.

### Documentation Contents

#### Get Started
A list of steps on how to get started with real estate ads.

#### Guides
Use case-based guides to help you perform specific actions.

#### Support
Solutions to common problems, troubleshooting tips, and FAQs.

### Special Ad Category
Advertisers must specify `HOUSING` as a `special_ad_category` for ad campaigns that market housing. In doing so, the set of targeting options available for ads in these campaigns will be restricted. Advantage+ catalog ads using Home Listing Catalogs must adhere to these restrictions. See Special Ad Category for more information.
```

--------------------------------

### Conversions API - Overview

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/guides/gateway-multiple-accounts

Provides an overview of the Conversions API, its purpose, and how to get started with implementing it for tracking conversions.

```APIDOC
## Conversions API

### Description
This API allows businesses to send web events directly from their servers to Meta, complementing the Meta Pixel and providing more control over data. It's essential for accurate conversion tracking and optimization of ad campaigns.

### Key Features
*   **Reliable Event Tracking:** Send events directly from your server.
*   **Data Control:** More control over the data sent to Meta.
*   **Improved Accuracy:** Complement the Meta Pixel for more robust tracking.

### Getting Started
Refer to the 'Get Started' section for initial setup and integration steps.
```

--------------------------------

### Opt-in to Advantage+ Creative Features via API

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

This example demonstrates how to opt-in to specific Advantage+ Creative features like image touchups, inline comments, and image templates when creating an ad creative or an ad using the Facebook Marketing API. It requires specifying the desired features within the `creative_features_spec` object.

```curl
curl -X POST \
  -F 'name=Advantage+ Creative Creative' \
  -F 'degrees_of_freedom_spec={
    "creative_features_spec": {
      "image_touchups": {
        "enroll_status": "OPT_IN"
      },
     "inline_comment": {
        "enroll_status": "OPT_IN"
      },
     "image_template": {
        "enroll_status": "OPT_IN"
      }
    }
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

```curl
curl -X POST \
  -F 'adset_id=<ADSET_ID>' \
  -F 'creative={
    "name": "Advantage+ Creative Adgroup",
    "object_story_spec": {
      "link_data": {
         "image_hash": "<IMAGE_HASH>", 
         "link": "<URL>", 
         "message": "You got this.",
      },
      "page_id": "<PAGE_ID>"
    },
    "degrees_of_freedom_spec": {
      "creative_features_spec": {
        "image_touchups": {
          "enroll_status": "OPT_IN"
        },
       "inline_comment": {
          "enroll_status": "OPT_IN"
        },
       "image_template": {
          "enroll_status": "OPT_IN"
        }
      }
    }
  }' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
```

--------------------------------

### Advantage+ Catalog Ads - Direct Upload

Source: https://developers.facebook.com/docs/marketing-api/real-estate-ads/get-started

Manually perform a one-time upload of a product feed for Advantage+ catalog ads.

```APIDOC
## Advantage+ Catalog Ads - Direct Upload

### Description
Manually perform a one-time upload of a product feed for Advantage+ catalog ads.

### Method
POST

### Endpoint
`https://graph.facebook.com/<API_VERSION>/<PRODUCT_FEED_ID>/uploads`

### Parameters
#### Request Body
- **url** (string) - Required - URL of the product feed file.
- **access_token** (string) - Required - Your API access token.

### Request Example
```bash
curl \
  -F "url=http://www.example.com/sample_feed.xml" \
  -F "access_token=<ACCESS_TOKEN>" \
  https://graph.facebook.com/<API_VERSION>/<PRODUCT_FEED_ID>/uploads
```
```

--------------------------------

### Correct Product Variant Setup Example

Source: https://developers.facebook.com/docs/marketing-api/catalog/product-variants

This example illustrates the correct method for setting up product variants. It shows how the 'item_group_id' unifies variants, and each product has its specific attributes while sharing a common identifier for grouping.

```text
ID | Name | Color | Price | item_group_id
---|---|---|---|---
CoolShirt123_red | Cool Shirt | red | $9.99 | CoolShirt123
CoolShirt123_blue | Cool Shirt | blue | $9.99 | CoolShirt123
```

--------------------------------

### App Install Event Payload Structure

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/app-events

Example of the data structure for an 'Install' event payload in the Conversions API.

```APIDOC
## POST /conversions/v1/events

### Description
This endpoint allows you to send app install events to the Conversions API. The payload includes detailed information about the event, user, and application.

### Method
POST

### Endpoint
`/conversions/v1/events`

### Parameters
#### Request Body
- **data** (array) - Required - An array containing event objects.
  - **event_name** (string) - Required - The name of the event (e.g., "MobileAppInstall").
  - **event_time** (integer) - Required - The time the event occurred, in Unix timestamp format.
  - **action_source** (string) - Required - The source of the action (e.g., "app").
  - **user_data** (object) - Required - Information about the user.
    - **client_ip_address** (string) - Optional - The IP address of the client.
    - **madid** (string) - Optional - The Mobile Advertising ID.
    - **anon_id** (string) - Optional - An anonymous ID for the user.
  - **app_data** (object) - Optional - Information about the application.
    - **advertiser_tracking_enabled** (integer) - Optional - Indicates if advertiser tracking is enabled (1 for enabled, 0 for disabled).
    - **application_tracking_enabled** (integer) - Optional - Indicates if application tracking is enabled (1 for enabled, 0 for disabled).
    - **extinfo** (array) - Optional - Extended information about the app, device, and locale.

### Request Example
```json
{
  "data": [
    {
      "event_name": "MobileAppInstall",
      "event_time": 1684389252,
      "action_source": "app",
      "user_data": {
        "client_ip_address": "2001:0db8:85a3:0000:0000:8a2e:0370:7334",
        "madid": "38400000-8cf0-11bd-b23e-10b96e40000d",
        "anon_id": "12345340-1234-3456-1234-123456789012"
      },
      "app_data": {
        "advertiser_tracking_enabled": 1,
        "application_tracking_enabled": 1,
        "extinfo": [
          "a2",
          "com.some.app",
          "771",
          "Version 7.7.1",
          "10.1.1",
          "OnePlus6",
          "en_US",
          "GMT-1",
          "TMobile",
          "1920",
          "1080",
          "2.00",
          "2",
          "128",
          "8",
          "USA/New York"
        ]
      }
    }
  ]
}
```

### Response
#### Success Response (200)
- **success** (boolean) - Indicates if the event was processed successfully.
- **message** (string) - A message describing the outcome of the event processing.

#### Response Example
```json
{
  "success": true,
  "message": "Event processed successfully."
}
```
```

--------------------------------

### Enhancing CTA with AI-Suggested Phrases via API

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

This JSON example demonstrates how to opt-in to the `enhance_cta` feature. By setting `enhance_cta.enroll_status` to `OPT_IN` and potentially providing AI-identified high-performing phrases in the `customizations.text_extraction` field, the API will pair relevant keyphrases with your Call to Action.

```JSON
{
    "creative_features_spec": {
        "enhance_cta": {
            "enroll_status": "OPT_IN",
            "customizations": {
                "text_extraction": {
                    "enroll_status": "OPT_IN"
                }
            }
        }
    }
}
```

--------------------------------

### Implement eTLD+1 Resolver (PHP)

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/server-side-onboarding

This PHP example shows a custom implementation of the ETLDPlus1Resolver interface, specifically for resolving 'example.com' as the eTLD+1 if the domain is a subdomain of it.

```php
class SimpleETLDPlus1Resolver implements ETLDPlus1Resolver {
   public function resolveETLDPlus1($domain) {
       if (isSubdomain($domain, "example.com")) {
           return "example.com";
       }
       throw new InvalidArgumentException("only example.com is supported");
   }
}

```

--------------------------------

### Create Home Listing Catalog

Source: https://developers.facebook.com/docs/marketing-api/real-estate-ads/get-started

This endpoint allows you to create a product catalog specifically for home listings, which is a prerequisite for running Advantage+ Catalog Ads for real estate.

```APIDOC
## POST /<API_VERSION>/<BUSINESS_ID>/owned_product_catalogs

### Description
Creates a product catalog with the `home_listings` vertical for advertising real estate properties.

### Method
POST

### Endpoint
`https://graph.facebook.com/<API_VERSION>/<BUSINESS_ID>/owned_product_catalogs`

### Parameters
#### Path Parameters
- **API_VERSION** (string) - Required - The version of the Marketing API.
- **BUSINESS_ID** (string) - Required - The ID of the business account.

#### Form Data Parameters
- **name** (string) - Required - The name of the catalog.
- **vertical** (string) - Required - Must be set to `home_listings`.
- **access_token** (string) - Required - Your valid Marketing API access token.

### Request Example
```bash
curl \
  -F 'name=Home Listing Catalog Name' \
  -F 'vertical=home_listings' \
  -F 'access_token=<ACCESS TOKEN>' \
  https://graph.facebook.com/<API_VERSION>/<BUSINESS_ID>/owned_product_catalogs
```

### Response
#### Success Response (200)
- **id** (string) - The ID of the newly created catalog.

#### Response Example
```json
{
  "id": "<CATALOG_ID>"
}
```
```

--------------------------------

### Create Ad Set - App Installs (Curl)

Source: https://developers.facebook.com/docs/marketing-api/adset

This example demonstrates how to create an ad set for app installs using a cURL command. It specifies daily budget, bid amount, optimization goal, campaign details, targeting, status, and access token. Ensure you replace placeholder values with your actual IDs and tokens.

```curl
curl -X POST \
  -F 'name="Mobile App Installs Ad Set"' \
  -F 'daily_budget=1000' \
  -F 'bid_amount=2' \
  -F 'billing_event="IMPRESSIONS"' \
  -F 'optimization_goal="APP_INSTALLS"' \
  -F 'campaign_id="<AD_CAMPAIGN_ID>"' \
  -F 'promoted_object={
       "application_id": "<APP_ID>",
       "object_store_url": "<APP_STORE_URL>"
     }' \
  -F 'targeting={
       "device_platforms": [
         "mobile"
       ],
       "facebook_positions": [
         "feed"
       ],
       "geo_locations": {
         "countries": [
           "US"
         ]
       },
       "publisher_platforms": [
         "facebook",
         "audience_network"
       ],
       "user_os": [
         "IOS"
       ]
     }' \
  -F 'status="PAUSED"' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets
```

--------------------------------

### Conversions API Gateway - Post-Setup Management

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/guides/gateway/troubleshooting

Information on managing the Conversions API Gateway after initial setup.

```APIDOC
## Conversions API Gateway - Post-Setup Management

### Description
This section covers the ongoing management and maintenance of the Conversions API Gateway after it has been set up.

### Method
N/A

### Endpoint
N/A

### Parameters
N/A

### Request Example
N/A

### Response
N/A
```

--------------------------------

### Async Examples

Source: https://developers.facebook.com/docs/marketing-api/batch-requests

Provides various examples for interacting with asynchronous requests, including getting the status of a specific request, retrieving request results, listing request sets for an ad account, and getting a list of requests for a campaign.

```APIDOC
## Async Examples

### Get Status of a Specific Async Request

#### Method
GET

#### Endpoint
`https://graph.facebook.com/v24.0/`

#### Query Parameters
- **id** (string) - Required - The ID of the async request.
- **pretty** (boolean) - Optional - Set to `true` for command-line readable output.
- **access_token** (string) - Required - Your Facebook API access token.

#### Request Example
```bash
curl -G \
-d "id=6012384857989" \
-d "pretty=true" \
-d "access_token=_____" \
"https://graph.facebook.com/v24.0/"
```

#### Response Example
```json
{
   "id": "6012384857989",
   "owner_id": 12345,
   "name": "testasyncset",
   "is_completed": true
}
```

### Get Results of Requests

#### Method
GET

#### Endpoint
`https://graph.facebook.com/v24.0/requests`

#### Query Parameters
- **id** (string) - Required - The ID of the request to get results for.
- **pretty** (boolean) - Optional - Set to `true` for command-line readable output.
- **fields** (string) - Optional - Specifies the fields to return, include `result` to get the results.
- **access_token** (string) - Required - Your Facebook API access token.

#### Request Example
```bash
curl -G \
-d "id=6012384857989" \
-d "pretty=true" \
-d "fields=result" \
-d "access_token=_____" \
"https://graph.facebook.com/v24.0/requests"
```

#### Response Example
```json
{
   "data": [
      {
         "result": {
            "id": "6012384860989"
         },
         "id": "6012384858389"
      },
      {
         "result": {
            "id": "6012384858789"
         },
         "id": "6012384858189"
      }
   ],
   "paging": {
      "cursors": {
         "after": "___",
         "before": "__-"
      }
   }
}
```

### Get List of Request Sets for an Ad Account

#### Method
GET

#### Endpoint
`https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/asyncadrequestsets`

#### Query Parameters
- **is_completed** (integer) - Optional - Filter by completion status (e.g., `1` for completed).
- **pretty** (boolean) - Optional - Set to `true` for command-line readable output.
- **access_token** (string) - Required - Your Facebook API access token.

#### Request Example
```bash
curl -G \
-d "is_completed=1" \
-d "pretty=true" \
-d "access_token=___" \
"https://graph.facebook.com/v24.0/act_71597454/asyncadrequestsets"
```

#### Response Example
```json
{
   "data": [
      {
         "id": "6012384253789",
         "owner_id": 71597454,
         "name": "testasyncset",
         "is_completed": true
      },
   ],
   "paging": {
      "cursors": {
         "after": "__-",
         "before": "__-"
      }
   }
}
```

### Get List of Requests for a Campaign

#### Method
GET

#### Endpoint
`https://graph.facebook.com/v24.0/<CAMPAIGN_ID>/asyncadrequests`

#### Query Parameters
- **status** (string) - Optional - Filter by request status (e.g., `SUCCESS`, `ERROR`).
- **pretty** (boolean) - Optional - Set to `true` for command-line readable output.
- **access_token** (string) - Required - Your Facebook API access token.

#### Request Example
```bash
curl -G \
-d "status=SUCCESS,ERROR" \
-d "pretty=true" \
-d "access_token=___" \
"https://graph.facebook.com/v24.0/6008248529789/asyncadrequests"
```

#### Response Example
```json
{
   "data": [
      {
         "id": "6012384951789",
         "scope_object_id": 6008248529789,
         "status": "SUCCESS"
      },
   ],
   "paging": {
      "cursors": {
         "after": "__-",
         "before": "__-"
      }
   }
}
```
```

--------------------------------

### Migration Example: Java

Source: https://developers.facebook.com/docs/marketing-api/facebook-pixel/server-side-api/using-the-api

Example demonstrating how to integrate `CAPIGatewayIngressRequest` into an existing Java Business SDK setup.

```APIDOC
## Migration Example: Java

### Description
This example shows how to reference and attach the `CAPIGatewayIngressRequest` to an `EventRequest`'s custom endpoint in a Java environment.

### Method
Referencing and attaching `CAPIGatewayIngressRequest`

### Endpoint
N/A

### Request Example
```java
// this is the standard event request that we attach events to
EventRequest eventRequest = new EventRequest(PIXEL_ID, context);
CAPIGatewayIngressRequest capiSyncRequest = new CAPIGatewayIngressRequest(CB_URL, CAPIG_ACCESS_KEY);
eventRequest.setCustomEndpoint(capiSyncRequest);
eventRequest.addDataItem(testEvent);
eventRequest.execute();
```

### Response
#### Success Response (200)
This operation processes events and does not return a specific response body at this stage.

#### Response Example
N/A
```

--------------------------------

### Ad Previews API

Source: https://developers.facebook.com/docs/marketing-api/generatepreview/v17

This section of the Facebook Marketing API allows developers to generate previews of ads. It includes details on how to get started, provides examples, and specifies the API version.

```APIDOC
## Ad Previews

### Description
This API endpoint allows you to generate previews of your ads to see how they will appear on Facebook platforms.

### Method
GET

### Endpoint
/v24.0/ads_preview

### Parameters
#### Query Parameters
- **ad_id** (string) - Required - The ID of the ad to preview.
- **platform** (string) - Optional - The platform where the ad will be displayed (e.g., `facebook`, `instagram`).

### Request Example
```json
{
  "ad_id": "YOUR_AD_ID",
  "platform": "facebook"
}
```

### Response
#### Success Response (200)
- **preview_url** (string) - The URL where the ad preview can be viewed.

#### Response Example
```json
{
  "preview_url": "https://www.facebook.com/ads/preview/YOUR_PREVIEW_ID"
}
```
```

--------------------------------

### Implement eTLD+1 Resolver (Node.js)

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/server-side-onboarding

This Node.js snippet provides an example of a custom SimpleETLDPlus1Resolver class that checks if a domain is a subdomain of 'example.com' and returns 'example.com' if it is.

```javascript
/*
//Currently we provide 3 options; you may also implement your own resolver.

1. [Recommended] Resolve etld+1 by default
     const etldPlus1Resolver = new DefaultETLDPlus1Resolver();
2. Resolve by half manual input
     const etldPlus1Resolver = new DefaultETLDPlus1Resolver('www.example.com'); // => 'example.com';
3. Manual identify etld+1 (mostly for localhost test).
     const etldPlus1Resolver = new DummyLocalHostTestResolver('localhost');
4. Implement a new resolver by yourself. Example below:

*/
    
class SimpleETLDPlus1Resolver {
   resolveETLDPlus1(domain) {
	if (isSubdomain(domain, "example.com")) {
	return "example.com";
}
      // throw exception or fallback to other functions
   }

```

--------------------------------

### POST /<CATALOG_ID>/product_sets

Source: https://developers.facebook.com/docs/marketing-api/real-estate-ads/get-started

Creates a product set for a catalog with specified filters. This is used to group items for advertising.

```APIDOC
## POST /<CATALOG_ID>/product_sets

### Description
Creates a product set within a specific catalog, which can be used to define a group of items for Advantage+ catalog ads. Filters can be applied to determine which items are included in the set.

### Method
POST

### Endpoint
`https://graph.facebook.com/<API_VERSION>/<CATALOG_ID>/product_sets`

### Parameters
#### Path Parameters
- **API_VERSION** (string) - Required - The version of the Facebook Graph API.
- **CATALOG_ID** (string) - Required - The ID of the catalog to create the product set in.

#### Query Parameters
- **access_token** (string) - Required - Your Facebook API access token.

#### Request Body
- **name** (string) - Required - The name of the product set.
- **filter** (JSON object) - Required - A JSON object defining the filters for the product set. See "Filter Operators and Data" below for details.

### Filter Operators and Data
Operators:
- `i_contains`: Contains substring (case insensitive)
- `i_not_contains`: Does not contain substring (case insensitive)
- `contains`: Contains substring (case sensitive)
- `not_contains`: Does not contain substring (case sensitive)
- `eq`: Equal to (case insensitive)
- `neq`: Not equal to (case insensitive)
- `lt`: Less than (numeric fields only)
- `lte`: Less than or equal to (numeric fields only)
- `gt`: Greater than (numeric fields only)
- `gte`: Greater than or equal to (numeric fields only)

Data:
- `availability` (string) - Listing availability (e.g., `for_sale`).
- `listing_type` (string) - Listing type (e.g., `for_sale_by_agent`).
- `property_type` (string) - Property type (e.g., `house`).
- `price` (number) - Listing price.
- `name` (string) - Name of the listing.
- `city` (string) - City of the listing.
- `country` (string) - Country of the listing.
- `region` (string) - Region or state of the listing.
- `postal_code` (string) - Postal code of the listing.
- `num_beds` (number) - Number of beds.
- `num_baths` (number) - Number of baths.

### Request Example
```json
{
  "name": "test set",
  "filter": {
    "availability": {
      "eq": "for_sale"
    }
  },
  "access_token": "<YOUR_ACCESS_TOKEN>"
}
```

### Response
#### Success Response (200)
- **id** (string) - The ID of the created product set.
- **name** (string) - The name of the product set.

#### Response Example
```json
{
  "id": "1234567890",
  "name": "test set"
}
```
```

--------------------------------

### Conversions API - Verifying Setup

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/guides/gateway/troubleshooting

Steps to verify that your Conversions API implementation is set up correctly.

```APIDOC
## Conversions API - Verifying Setup

### Description
This section details the methods and tools available to verify that your Conversions API integration is working as expected and events are being received correctly.

### Method
N/A

### Endpoint
N/A

### Parameters
N/A

### Request Example
N/A

### Response
N/A
```

--------------------------------

### Configuring AI Image Overlays with Facebook Marketing API

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

This code example shows how to enable AI-generated image overlays using the `creative_features_spec`. By setting `image_templates.enroll_status` to `OPT_IN`, the API will automatically add overlays with provided text to ad creatives when it's predicted to improve performance.

```JSON
{
    "creative_features_spec": {
        "image_templates": {
            "enroll_status": "OPT_IN"
        }
    }
}
```

--------------------------------

### Migration Example: PHP

Source: https://developers.facebook.com/docs/marketing-api/facebook-pixel/server-side-api/using-the-api

Example demonstrating how to integrate `CAPIGatewayIngressRequest` into an existing PHP Business SDK setup.

```APIDOC
## Migration Example: PHP

### Description
This example shows how to reference and attach the `CAPIGatewayIngressRequest` to an `EventRequest`'s custom endpoint in a PHP environment.

### Method
Referencing and attaching `CAPIGatewayIngressRequest`

### Endpoint
N/A

### Request Example
```php
// this is the standard event request that we attach events to
$event_request = new EventRequest($this->pixel_id);
$capiIngressRequest = new CAPIGatewayIngressRequest($this->cb_url, $this->access_key);
$event_request->setCustomEndpoint($capiIngressRequest);
// pass the events to this event Request object
$event_request->setEvents($events);
$event_request->execute();
```

### Response
#### Success Response (200)
This operation processes events and does not return a specific response body at this stage.

#### Response Example
N/A
```

--------------------------------

### Migration Example: Java

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/using-the-api

Provides an example of how to migrate existing systems using the Business SDK to utilize the CAPIGatewayIngressRequest.

```APIDOC
## Migration Example: Java

### Description
Demonstrates how to integrate CAPIGatewayIngressRequest into an existing Java Business SDK implementation.

### Request Example
```java
// this is the standard event request that we attach events to

EventRequest eventRequest = new EventRequest(PIXEL_ID, context);

CAPIGatewayIngressRequest capiSyncRequest = new CAPIGatewayIngressRequest(CB_URL, CAPIG_ACCESS_KEY);
eventRequest.setCustomEndpoint(capiSyncRequest);
eventRequest.addDataItem(testEvent);
eventRequest.execute();
```
```

--------------------------------

### Read Ad Account Reach Estimate (iOS SDK)

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-account/reachestimate

This iOS SDK example illustrates how to get audience reach estimates using the Facebook SDK for Objective-C. It sets up parameters and starts a GraphRequest to the reachestimate endpoint.

```objectivec
NSDictionary *params = @{
  @"targeting_spec": @"{\"geo_locations\":{\"countries\":[\"US\"],\"age_min\":20,\"age_max\":40}"
};
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/act_<AD_ACCOUNT_ID>/reachestimate"
                                      parameters:params
                                      HTTPMethod:@"GET"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];

```

--------------------------------

### Python SDK Example for Creating Ad

Source: https://developers.facebook.com/docs/marketing-api/advantage-catalog-ads-for-leadgen

Example code using the Python Facebook Business SDK to create an ad.

```APIDOC
## Python SDK - Create Ad

### Description
This Python code snippet demonstrates how to create an ad using the Facebook Business SDK, linking it to a specific ad set and creative.

### Method
POST

### Endpoint
(Internal SDK method, corresponds to POST /act_<AD_ACCOUNT_ID>/ads)

### Parameters
- **access_token**: Your Facebook API access token.
- **app_secret**: Your Facebook App secret.
- **app_id**: Your Facebook App ID.
- **id**: The Ad Account ID.
- **params** (dict): A dictionary containing ad creation parameters:
  - **name** (str): The name of the ad.
  - **adset_id** (str): The ID of the ad set.
  - **creative** (dict): A dictionary with the `creative_id`.
  - **status** (str): The status of the ad (e.g., 'PAUSED').

### Request Example
```python
from facebook_business.adobjects.adaccount import AdAccount
from facebook_business.adobjects.ad import Ad
from facebook_business.api import FacebookAdsApi

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_ACCOUNT_ID>'
FacebookAdsApi.init(access_token=access_token)

fields = [
]
params = {
  'name': 'My Ad',
  'adset_id': '<adSetID>',
  'creative': {'creative_id':'<adCreativeID>'},
  'status': 'PAUSED',
}

print(AdAccount(id).create_ad(
  fields=fields,
  params=params,
))
```
```

--------------------------------

### Migration Example: PHP

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/using-the-api

Provides an example of how to migrate existing systems using the Business SDK to utilize the CAPIGatewayIngressRequest.

```APIDOC
## Migration Example: PHP

### Description
Demonstrates how to integrate CAPIGatewayIngressRequest into an existing PHP Business SDK implementation.

### Request Example
```php
// this is the standard event request that we attach events to
$event_request = new EventRequest($this->pixel_id);
$capiIngressRequest = new CAPIGatewayIngressRequest($this->cb_url, $this->access_key);
$event_request->setCustomEndpoint($capiIngressRequest);
// pass the events to this event Request object
$event_request->setEvents($events);
$event_request->execute()
```
```

--------------------------------

### Set Ad Status to ACTIVE using Marketing API

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

This example demonstrates how to set an ad's status to 'ACTIVE' using a cURL command. It requires the ad ID and an access token, and sends a POST request with the status parameter.

```bash
curl -X POST \
  -F 'status=ACTIVE' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<AD_ID>
```

--------------------------------

### Conversions API Guides - End-to-end Implementation

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/guides/gateway/troubleshooting

A guide detailing the end-to-end implementation process for the Conversions API.

```APIDOC
## Conversions API Guides - End-to-end Implementation

### Description
This guide walks you through the complete process of implementing the Conversions API, from initial setup to sending and verifying events.

### Method
N/A

### Endpoint
N/A

### Parameters
N/A

### Request Example
N/A

### Response
N/A
```

--------------------------------

### Ruby SDK Example for Creating Ad

Source: https://developers.facebook.com/docs/marketing-api/advantage-catalog-ads-for-leadgen

Example code using the Ruby Facebook Business SDK to create an ad.

```APIDOC
## Ruby SDK - Create Ad

### Description
This Ruby code snippet demonstrates how to create an ad using the Facebook Business SDK, linking it to a specific ad set and creative.

### Method
POST

### Endpoint
(Internal SDK method, corresponds to POST /act_<AD_ACCOUNT_ID>/ads)

### Parameters
- **access_token**: Your Facebook API access token.
- **app_secret**: Your Facebook App secret.
- **app_id**: Your Facebook App ID.
- **id**: The Ad Account ID.
- **config** (block): Block for configuring the FacebookAds gem.
- **ad_params** (hash): A hash containing ad creation parameters:
  - **name** (string): The name of the ad.
  - **adset_id** (string): The ID of the ad set.
  - **creative** (hash): A hash with the `creative_id`.
  - **status** (string): The status of the ad (e.g., 'PAUSED').

### Request Example
```ruby
require 'facebook_ads'

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_ACCOUNT_ID>'

FacebookAds.configure do |config|
  config.access_token = access_token
  config.app_secret = app_secret
end

ad_account = FacebookAds::AdAccount.get(id)
ads = ad_account.ads.create({
    name: 'My Ad',
    adset_id: '<ADSET_ID>',
    creative: {'creative_id':'<CREATIVE_ID>'},
    status: 'PAUSED',
})
```
```

--------------------------------

### Activating Video Auto-Cropping in Facebook Marketing API

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

This example demonstrates how to enable automatic video cropping using the `video_auto_crop` feature. By setting `video_auto_crop.enroll_status` to `OPT_IN`, video ads will be automatically adjusted to fit different ad placements, ensuring optimal visibility.

```JSON
{
    "creative_features_spec": {
        "video_auto_crop": {
            "enroll_status": "OPT_IN"
        }
    }
}
```

--------------------------------

### Webhooks Setup - Callback URL Example

Source: https://developers.facebook.com/docs/marketing-api/ad-rules/guides/trigger-based-rules

An example of the data structure received at the callback URL when a rule is triggered. This structure includes information about the triggered rule and its associated object.

```APIDOC
## Webhooks Setup - Callback URL Example

### Description
This is an example of the data structure sent to your callback URL when a rule is triggered. It contains details about the event, including the rule ID, object ID, object type, and trigger information.

### Response Example
```json
{
  "object": "application",
  "entry": [{
    "id": "<APPLICATION_ID>",
    "time": 1468938744,
    "changes": [{
      "field": "ads_rules_engine",
      "value": {
        "rule_id": 1234,
        "object_id": 5678,
        "object_type": "ADSET",
        "trigger_type": "STATS_CHANGE",
        "trigger_field": "COST_PER_LINK_CLICK",
        "current_value": "15.8"
      }
    }]
  }]
}
```

### Notes
The `current_value` field is a JSON-encoded string and can represent a string, number, or an array.
```

--------------------------------

### Read Saved Audience (iOS SDK)

Source: https://developers.facebook.com/docs/marketing-api/reference/saved-audience

This iOS SDK example shows how to retrieve a Saved Audience using `FBSDKGraphRequest`. It initializes the request with the graph path and HTTP method (GET), then starts the request with a completion handler to manage the results and errors.

```Objective-C
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/{saved-audience-id}"
                                      parameters:params
                                      HTTPMethod:@"GET"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];
```

--------------------------------

### Conversions API - Guides

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/guides/gateway/troubleshooting

Links to various guides for implementing and using the Conversions API.

```APIDOC
## Conversions API - Guides

### Description
This section provides access to a collection of guides covering different aspects of the Conversions API, from initial implementation to advanced use cases.

### Method
N/A

### Endpoint
N/A

### Parameters
N/A

### Request Example
N/A

### Response
N/A
```

--------------------------------

### Java SDK Example for Creating Ad

Source: https://developers.facebook.com/docs/marketing-api/advantage-catalog-ads-for-leadgen

Example code using the Java Facebook Business SDK to create an ad.

```APIDOC
## Java SDK - Create Ad

### Description
This Java code snippet demonstrates how to create an ad using the Facebook Business SDK, linking it to a specific ad set and creative.

### Method
POST

### Endpoint
(Internal SDK method, corresponds to POST /act_<AD_ACCOUNT_ID>/ads)

### Parameters
- **access_token**: Your Facebook API access token.
- **app_secret**: Your Facebook App secret.
- **app_id**: Your Facebook App ID.
- **id**: The Ad Account ID.
- **context**: An `APIContext` object for API configuration.
- **ad**: An `Ad` object configured with ad details.
  - **name**: The name of the ad.
  - **adsetId**: The ID of the ad set.
  - **creative**: An `AdCreative` object with the `id` set.
  - **status**: The status of the ad (e.g., `Ad.EnumStatus.VALUE_PAUSED`).

### Request Example
```java
import com.facebook.ads.sdk.*;
import java.io.File;
import java.util.Arrays;

public class SAMPLE_CODE_EXAMPLE {
  public static void main (String args[]) throws APIException {

    String access_token = "<ACCESS_TOKEN>";
    String app_secret = "<APP_SECRET>";
    String app_id = "<APP_ID>";
    String id = "<AD_ACCOUNT_ID>";
    APIContext context = new APIContext(access_token).enableDebug(true);

    new AdAccount(id, context).createAd()
      .setName("My Ad")
      .setAdsetId(<adSetID>L) // Ensure adSetID is long if required by the SDK version
      .setCreative(
          new AdCreative()
            .setFieldId("<adCreativeID>")
        )
      .setStatus(Ad.EnumStatus.VALUE_PAUSED)
      .execute();

  }
}
```
```

--------------------------------

### Read Invoice Campaign Data - iOS SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/invoice-campaign

This iOS SDK example shows how to get invoice campaign data using `FBSDKGraphRequest`. It initializes the request with the graph path and parameters, then starts the request with a completion handler to manage the response.

```Objective-C
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"...?fields={fieldname_of_type_InvoiceCampaign}"
                                      parameters:params
                                      HTTPMethod:@"GET"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];
```

--------------------------------

### Facebook Marketing API: Budget Schedule Specifications Example

Source: https://developers.facebook.com/docs/marketing-api/adcampaign

Example demonstrating how to set budget schedule specifications for a campaign. This includes defining start and end times, budget values, and value types for high-demand periods. Note that absolute budget values are used here.

```Shell
-F 'budget_schedule_specs=[{ "time_start":1699081200, "time_end":1699167600, "budget_value":100, "budget_value_type":"ABSOLUTE" }]'
```

--------------------------------

### Ruby SDK Example

Source: https://developers.facebook.com/docs/marketing-api/dynamic-ads-auto/ads-management

Example of creating an ad using the Facebook Ruby SDK.

```APIDOC
## Ruby SDK Example

### Description
This example demonstrates how to create an ad using the Facebook Ruby SDK.

### Method
POST

### Endpoint
`/ads` (via SDK)

### Parameters
#### Request Body
- **name** (String) - Required - The name of the ad.
- **adset_id** (String) - Required - The ID of the ad set to which the ad belongs.
- **creative** (Hash) - Required - A hash containing the creative details.
  - **creative_id** (String) - Required - The ID of the creative to be used for the ad.
- **status** (String) - Optional - The status of the ad (e.g., "PAUSED").

### Request Example
```ruby
require 'facebook_ads'

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_ACCOUNT_ID>'

FacebookAds.configure do |config|
  config.access_token = access_token
  config.app_secret = app_secret
end

ad_account = FacebookAds::AdAccount.get(id)
ads = ad_account.ads.create({
    name: 'My Ad',
    adset_id: '<adSetID>',
    creative: {'creative_id':'<adCreativeID>'},
    status: 'PAUSED',
})
```

### Response
#### Success Response (200)
Details of the created ad.

#### Response Example
```ruby
# Returns an Ad object representing the created ad.
```
```

--------------------------------

### Create Home Listing Catalog for Advantage+ Catalog Ads

Source: https://developers.facebook.com/docs/marketing-api/real-estate-ads/get-started

This cURL command demonstrates how to create a home listing catalog for use with Advantage+ Catalog Ads. It requires a catalog name, sets the vertical to 'home_listings', and needs an access token and business ID.

```cURL
curl \
  -F 'name=Home Listing Catalog Name' \
  -F 'vertical=home_listings' \
  -F 'access_token=<ACCESS TOKEN>' \
  https://graph.facebook.com/<API_VERSION>/<BUSINESS_ID>/owned_product_catalogs
```

--------------------------------

### Incorrect Product Variant Setup Example

Source: https://developers.facebook.com/docs/marketing-api/catalog/guides/product-variants

This example demonstrates an incorrect method for setting up product variants. It shows a parent SKU without a populated color field, leading to issues where each line item needs to be its own product.

```markdown
| ID | Name | Color | Price | item_group_id |
|---|---|---|---|---|
| CoolShirt123 | Cool shirt (parent) | | $9.99 | CoolShirt123 |
| CoolShirt123_red | Cool Shirt - Red | red | $9.99 | CoolShirt123 |
| CoolShirt123_blue | Cool Shirt - Blue | blue | $9.99 | CoolShirt123 |
```

--------------------------------

### Add Node.js Dependency for Conversions API Parameter Builder

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/server-side-onboarding

This snippet shows how to update your package.json file to include the CAPI Parameter Builder Node.js package. After updating package.json, run 'npm install' to install the dependency.

```json
{
"dependencies": {
      "capi-param-builder-nodejs": "{version}"
}
}
```

--------------------------------

### Feed XML Structure for Facebook Marketing API

Source: https://developers.facebook.com/docs/marketing-api/real-estate-ads/get-started

This XML structure is an example of how to format real estate listings for submission to the Facebook Marketing API. It includes details such as listing ID, address, price, number of beds/baths, and image URLs. Ensure all required fields are present and correctly formatted as per the API documentation.

```xml
<?xml version="1.0" encoding="UTF-8"?>
<listings>
    <title>example.com Feed</title>
    <link rel="self" href="http://www.example.com"/>
    <listing>
        <home_listing_id>12345678</home_listing_id>
        <name>1 Hacker Way, Menlo Park, CA 94025</name>
        <availability>for_rent</availability>
        <description>An amazing listing</description>
        <address format="simple">
            <component name="addr1">1 Hacker Way</component>
            <component name="city">Menlo Park</component>
            <component name="region">California</component>
            <component name="country">United States</component>
            <component name="postal_code">94025</component>
        </address>
        <latitude>1.11414</latitude>
        <longitude>-1.835003</longitude>
        <neighborhood>Menlo Oaks</neighborhood>
        <image>
            <url>http://example.com/12345678-1.jpg</url>
        </image>
        <image>
            <url>http://example.com/12345678-2.jpg</url>
        </image>
        <image>
            <url>http://example.com/12345678-3.jpg</url>
        </image>
        <listing_type>for_rent_by_agent</listing_type>
        <num_baths>6</num_baths>
        <num_beds>5</num_beds>
        <num_units>1</num_units>
        <price>110000 USD</price>
        <property_type>house</property_type>
        <url>http://www.example.com/link_to_listing</url>
        <year_built>2007</year_built>
    </listing>
</listings>
```

--------------------------------

### Conversions API - Direct Integration Overview

Source: https://developers.facebook.com/docs/marketing-api/fmp-tpm-guides/conversions-api

This section outlines the two main stages of a Conversions API integration: Preparation and Execution. It details the steps involved in each stage, including setting up requirements, implementing the API, and adding parameters for deduplication.

```APIDOC
## Conversions API - Direct Integration

### Description
Provides an overview of the direct integration process for the Conversions API, covering preparation and execution steps.

### Preparation Stage:
1.  **Select Integration Type**: Choose the appropriate integration method.
2.  **Define Events to Send**: Specify which events will be shared.
3.  **Review Optimization Options**: Understand available optimization types.

### Execution Stage:
1.  **Set Up Requirements**: Configure necessary assets like Meta Pixel, Business Manager, and Server Connection.
2.  **Implement the API**: Develop the server-side integration to send events.
3.  **Add Parameters for Deduplication**: Implement parameters to prevent duplicate event tracking.
4.  **(Optional) Explore Business SDK Features**: Utilize SDK features for advanced functionality.

### Key Considerations:
*   **Event Deduplication**: Ensure events sent via browser and server are not double-counted.
*   **Real-time Sending**: Aim to send events as close to real-time as possible.
*   **Identity Matching**: Provide customer information parameters for effective identity resolution.
```

--------------------------------

### PHP SDK Example for Creating Ad

Source: https://developers.facebook.com/docs/marketing-api/advantage-catalog-ads-for-leadgen

Example code using the PHP Facebook Business SDK to create an ad.

```APIDOC
## PHP SDK - Create Ad

### Description
This PHP code snippet demonstrates how to create an ad using the Facebook Business SDK, linking it to a specific ad set and creative.

### Method
POST

### Endpoint
(Internal SDK method, corresponds to POST /act_<AD_ACCOUNT_ID>/ads)

### Parameters
- **access_token**: Your Facebook API access token.
- **app_secret**: Your Facebook App secret.
- **app_id**: Your Facebook App ID.
- **id**: The Ad Account ID.
- **params** (array): An array containing ad creation parameters:
  - **name** (string): The name of the ad.
  - **adset_id** (string): The ID of the ad set.
  - **creative** (array): An array with the `creative_id`.
  - **status** (string): The status of the ad (e.g., 'PAUSED').

### Request Example
```php
require __DIR__ . '/vendor/autoload.php';

use FacebookAdsObject\AdAccount;
use FacebookAds\Object\Ad;
use FacebookAds\Api;
use FacebookAds\Logger\CurlLogger;

$access_token = '<ACCESS_TOKEN>';
$app_secret = '<APP_SECRET>';
$app_id = '<APP_ID>';
$id = '<AD_ACCOUNT_ID>';

$api = Api::init($app_id, $app_secret, $access_token);
$api->setLogger(new CurlLogger());

$fields = array(
);
$params = array(
  'name' => 'My Ad',
  'adset_id' => '<adSetID>',
  'creative' => array('creative_id' => '<adCreativeID>'),
  'status' => 'PAUSED',
);

echo json_encode((new AdAccount($id))->createAd(
  $fields,
  $params
)->exportAllData(), JSON_PRETTY_PRINT);
```
```

--------------------------------

### Get Adset-Level Content Delivery Report - GET Request Example

Source: https://developers.facebook.com/docs/marketing-api/brand-safety-and-suitability/content-delivery-report

This example shows a GET request to retrieve an adset-level content delivery report. It specifies the platform, position, and optionally allows for filtering by datetime, limit, and other fields. The report provides impressions data at the content level for a given ad set.

```plaintext
GET /act_{ad-account-id}/content_delivery_report
?platform=facebook
&position=instream_video
&datetime_serie=last_7d
&fields=content_id,content_name,estimated_impressions
```

--------------------------------

### Conversions API Overview

Source: https://developers.facebook.com/docs/marketing-api/server-side-api/parameters/custom-data

This section provides an overview of the Conversions API, its purpose in tracking conversions, and how to get started with its implementation.

```APIDOC
## Conversions API

### Description

The Conversions API allows businesses to send web, app, and offline events directly from their servers to Facebook. This provides a more reliable way to measure the impact of advertising campaigns by mitigating issues like ad blockers and browser privacy settings that can affect pixel tracking.

### Key Features

*   **Reliable Event Tracking:** Sends events server-to-server, bypassing browser limitations.
*   **Rich Event Data:** Supports a wide range of event parameters for detailed conversion analysis.
*   **Offline Event Support:** Enables tracking of conversions that happen offline.
*   **Integration Options:** Compatible with various event sources including web, apps, and business messaging.

### Getting Started

To begin using the Conversions API:

1.  **Obtain an Access Token:** Generate an access token with the necessary permissions for your Facebook Business Manager.
2.  **Identify Your Pixel ID:** Locate the Pixel ID associated with your Facebook ad account.
3.  **Format Your Events:** Structure your conversion events according to the API's specifications, including standard and custom parameters.
4.  **Send Events:** Use an HTTP POST request to send your event data to the Conversions API endpoint.
```

--------------------------------

### Java SDK Example

Source: https://developers.facebook.com/docs/marketing-api/dynamic-ads-auto/ads-management

Example of creating an ad using the Facebook Java SDK.

```APIDOC
## Java SDK Example

### Description
This example demonstrates how to create an ad using the Facebook Java SDK.

### Method
POST

### Endpoint
`/ads` (via SDK)

### Parameters
#### Request Body
- **name** (String) - Required - The name of the ad.
- **adset_id** (Long) - Required - The ID of the ad set to which the ad belongs.
- **creative** (AdCreative) - Required - An AdCreative object containing the creative details.
  - **id** (String) - Required - The ID of the creative to be used for the ad.
- **status** (EnumStatus) - Optional - The status of the ad (e.g., `Ad.EnumStatus.VALUE_PAUSED`).

### Request Example
```java
import com.facebook.ads.sdk.*;
import java.io.File;
import java.util.Arrays;

public class SAMPLE_CODE_EXAMPLE {
  public static void main (String args[]) throws APIException {

    String access_token = "<ACCESS_TOKEN>";
    String app_secret = "<APP_SECRET>";
    String app_id = "<APP_ID>";
    String id = "<AD_ACCOUNT_ID>";
    APIContext context = new APIContext(access_token).enableDebug(true);

    new AdAccount(id, context).createAd()
      .setName("My Ad")
      .setAdsetId(<adSetID>L)
      .setCreative(
          new AdCreative()
            .setFieldId("<adCreativeID>")
        )
      .setStatus(Ad.EnumStatus.VALUE_PAUSED)
      .execute();

  }
}
```

### Response
#### Success Response (200)
Details of the created ad.

#### Response Example
```java
// Execution does not return a value, errors are thrown as exceptions.
```
```

--------------------------------

### Create App Installs Campaign - Python SDK

Source: https://developers.facebook.com/docs/marketing-api/mobile-app-ads

This Python script demonstrates how to create an app install campaign using the Facebook Business SDK. It initializes the FacebookAdsApi and then defines the parameters for the campaign, such as name, objective, and status.

```python
from facebook_business.adobjects.adaccount import AdAccount
from facebook_business.adobjects.campaign import Campaign
from facebook_business.api import FacebookAdsApi

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_ACCOUNT_ID>'
FacebookAdsApi.init(access_token=access_token)

fields = [
]
params = {
  'name': 'App Installs Campaign with Dynamic Product Ads',
  'objective': 'OUTCOME_APP_PROMOTION',
  'status': 'PAUSED',
  'special_ad_categories': [],
}
print AdAccount(id).create_campaign(
  fields=fields,
  params=params,
)
```

--------------------------------

### Travel Ads - Setup Process

Source: https://developers.facebook.com/docs/marketing-api/dynamic-ads-for-travel/ads-management

The general process for setting up Travel Ads using the API, which follows the standard ad creation steps.

```APIDOC
## Set Up Travel Ads
When you create Travel ads, you follow the same process as you do when you set up any other type of Facebook ad with the API:
  * **Step 1: Create Campaign**
  * **Step 2: Create Ad Set**
  * **Step 3: Create Ad Creative**
  * **Step 4: Create Ad**
  * **Next Steps**
```

--------------------------------

### Correct Product Variant Setup Example

Source: https://developers.facebook.com/docs/marketing-api/catalog/guides/product-variants

This example illustrates the correct way to set up product variants. It ensures that the product name and 'item_group_id' fields align correctly, allowing variants to roll up into a single virtual parent item while images reflect specific variant details.

```markdown
| ID | Name | Color | Price | item_group_id |
|---|---|---|---|---|
| CoolShirt123_red | Cool Shirt | red | $9.99 | CoolShirt123 |
| CoolShirt123_blue | Cool Shirt | blue | $9.99 | CoolShirt123 |
```

--------------------------------

### Python SDK Example

Source: https://developers.facebook.com/docs/marketing-api/dynamic-ads-auto/ads-management

Example of creating an ad using the Facebook Python SDK.

```APIDOC
## Python SDK Example

### Description
This example demonstrates how to create an ad using the Facebook Python SDK.

### Method
POST

### Endpoint
`/ads` (via SDK)

### Parameters
#### Request Body
- **name** (string) - Required - The name of the ad.
- **adset_id** (string) - Required - The ID of the ad set to which the ad belongs.
- **creative** (dict) - Required - A dictionary containing the creative details.
  - **creative_id** (string) - Required - The ID of the creative to be used for the ad.
- **status** (string) - Optional - The status of the ad (e.g., "PAUSED").

### Request Example
```python
from facebook_business.adobjects.adaccount import AdAccount
from facebook_business.adobjects.ad import Ad
from facebook_business.api import FacebookAdsApi

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_ACCOUNT_ID>'
FacebookAdsApi.init(access_token=access_token)

fields = [
]
params = {
  'name': 'My Ad',
  'adset_id': '<adSetID>',
  'creative': {'creative_id':'<adCreativeID>'},
  'status': 'PAUSED',
}
print AdAccount(id).create_ad(
  fields=fields,
  params=params,
)
```

### Response
#### Success Response (200)
Details of the created ad.

#### Response Example
```
// Printed by print statement
```
```

--------------------------------

### Address Object Parameters

Source: https://developers.facebook.com/docs/marketing-api/real-estate-ads/get-started

Defines the structure and requirements for an address object used in property listings.

```APIDOC
## Address Object Parameters

### Description
Parameters for an address object, typically used for property listings.

### Parameters
#### Request Body
- **addr1** (string) - Required - Street address of the property. Example: `675 El Camino Real`
- **city** (string) - Required - City where the property is located. Example: `Palo Alto`
- **region** (string) - Required - State, county, region, or province for the property. Example: `California`
- **country** (string) - Required - Country of the property. Example: `United States`
- **postal_code** (string) - Required unless country does not have a postal code system - Postal or zip-code of the property. Examples: `94125`, `NW1 3FG`
```

--------------------------------

### Available Dates Price Config

Source: https://developers.facebook.com/docs/marketing-api/real-estate-ads/get-started

Allows specifying the availability and pricing of properties for given date ranges to influence product recommendations and ad creative.

```APIDOC
## Available Dates Price Config

### Description
Provides the availability and prices of each property for a given date range. Facebook uses this information for product recommendations and can display date-specific prices in ad creative.

### Parameters
#### Request Body
- **start_date** (string) - Optional if `end_date` is provided - Start of the available date range in ISO-8601 format; inclusive of the start date. If only `start_date` is provided, `end_date` defaults to a year from that date. Example: `YYYY-MM-DD`, such as `2018-01-01`.
- **end_date** (string) - Optional if `start_date` is provided - End of the available date range in ISO-8601 format; excludes the end date. If only `end_date` is provided, `start_date` defaults to the current date. Example: `YYYY-MM-DD`, such as `2018-02-01`.
- **rate** (string) - Integer price of the listing during this time range. Example: `10000` if the listing was `$100.00 USD`
- **currency** (string) - Required if you provide `rate` - ISO-4217 currency code. Example: `USD`, `GBP`, etc.
- **interval** (string) - Length of stay for the specified rate. Allowed values are: `nightly`, `weekly`, `monthly`, `sale`.

### Request Example
```json
{
  "available_dates_price_config": [
    {
      "end_date": "2018-11-01",
      "rate": "15000",
      "currency": "USD",
      "interval": "nightly"
    },
    {
      "start_date": "2018-11-01",
      "end_date": "2018-12-01",
      "rate": "20000",
      "currency": "USD",
      "interval": "nightly"
    },
    {
      "start_date": "2018-11-01",
      "rate": "50000",
      "currency": "USD",
      "interval": "weekly"
    }
  ]
}
```
```

--------------------------------

### Managing Cookie Interaction with Client-Side Libraries

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/client-side-onboarding

Examples demonstrating how to manage cookie interaction, including saving and reading fbc and fbp parameters, with consent integration.

```APIDOC
## Managing Cookie Interaction

### Integration with cookie consent
Businesses should implement code to handle cookie consent banners, ensuring affirmative consent before saving cookies for fbc and fbp.

### clientParamBuilder.js Cookie Management
The `clientParamBuilder.js` library offers an API to automatically set cookies.

```javascript
// Optional: Pass your current URL to process and collect parameters.
clientParamBuilder.processAndCollectParams();
```

### clientParamsHelper.js Cookie Management
The `clientParamsHelper.js` library provides an option to save cookies, respecting user consent.

```javascript
// When cookieConsent is true, cookies are allowed to be saved.
clientParamsHelper.collectAndSetParams(cookieConsent);
```
```

--------------------------------

### Set Travel Multiplier Bid Adjustments

Source: https://developers.facebook.com/docs/marketing-api/bidding-and-optimization/bid-multiplier

Examples of setting bid adjustments for travel-related targeting criteria, such as start day of the week, length of stay, booking window, and travel start date. These examples use `curl` and define specific multipliers for different ranges or values.

```shell
curl -X POST \
  -F 'bid_adjustments={"user_groups":{"travel_start_day_of_week":{"event_sources":["1862565504034757"],"1":0.1,"3":0.1,"default":0.9}}}' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/<API_VERSION>/<ADSET_ID>
```

```shell
  Length of Stay 'bid_adjustments={"user_groups":{"length_of_stay":{"event_sources":["1862565504034757"],"1-2":0.1,"3-7":0.2,"default":0.5}}}'
```

```shell
  Booking window 'bid_adjustments={"user_groups":{"booking_window":{"event_sources":["1862565504034757"],"1-2":0.1,"3-7":0.2,"default":0.5}}}'
```

```shell
  Travel start date: 'bid_adjustments={"user_groups":{"travel_start_date":{"event_sources":["1862565504034757"],"20180918-20190101":0.1,"default":0.5}}}'
```

```shell
  Day of week: 'bid_adjustments={"user_groups":{"travel_start_day_of_week":{"event_sources":["1862565504034757"],"1":0.1,"2":0.1,"0":0.2,"default":0.5}}}'
```

--------------------------------

### GET /v14.0/fbe_business/fbe_installs - Delete MBE Installs

Source: https://developers.facebook.com/docs/marketing-api/2tier-bm-solution/supported-operations

This endpoint appears to be related to deleting Mobile Business Extension (MBE) installs. However, the method is GET, which is unusual for a delete operation. Please verify the intended functionality and HTTP method.

```APIDOC
## GET /v14.0/fbe_business/fbe_installs

### Description
This endpoint appears to be related to deleting Mobile Business Extension (MBE) installs. However, the method is GET, which is unusual for a delete operation. Please verify the intended functionality and HTTP method.

### Method
GET

### Endpoint
`https://graph.facebook.com/v14.0/fbe_business/fbe_installs`

### Parameters
#### Query Parameters
- **fbe_external_business_id** (string) - Required - The external business ID associated with the installs.
- **access_token** (string) - Required - The user access token for authentication.

### Request Example
```
curl -X GET \
  'https://graph.facebook.com/v14.0/fbe_business/fbe_installs?fbe_external_business_id={{external_business_id}}&access_token={{user_access_token}}'
```

### Response
#### Success Response (200)
- **success** (boolean) - Indicates the status of the operation.

#### Response Example
```json
{
  "success": true
}
```
```

--------------------------------

### Node.js SDK Example for Creating Ad

Source: https://developers.facebook.com/docs/marketing-api/advantage-catalog-ads-for-leadgen

Example code using the Node.js Facebook Business SDK to create an ad.

```APIDOC
## Node.js SDK - Create Ad

### Description
This Node.js code snippet demonstrates how to create an ad using the Facebook Business SDK, linking it to a specific ad set and creative.

### Method
POST

### Endpoint
(Internal SDK method, corresponds to POST /act_<AD_ACCOUNT_ID>/ads)

### Parameters
- **access_token**: Your Facebook API access token.
- **app_secret**: Your Facebook App secret.
- **app_id**: Your Facebook App ID.
- **id**: The Ad Account ID.
- **params** (object): An object containing ad creation parameters:
  - **name** (string): The name of the ad.
  - **adset_id** (string): The ID of the ad set.
  - **creative** (object): An object with the `creative_id`.
  - **status** (string): The status of the ad (e.g., 'PAUSED').

### Request Example
```javascript
'use strict';
const bizSdk = require('facebook-nodejs-business-sdk');
const AdAccount = bizSdk.AdAccount;
const Ad = bizSdk.Ad;

const access_token = '<ACCESS_TOKEN>';
const app_secret = '<APP_SECRET>';
const app_id = '<APP_ID>';
const id = '<AD_ACCOUNT_ID>';
const api = bizSdk.FacebookAdsApi.init(access_token);
const showDebugingInfo = true; // Setting this to true shows more debugging info.
if (showDebugingInfo) {
  api.setDebug(true);
}

let fields, params;
fields = [
];
params = {
  'name' : 'My Ad',
  'adset_id' : '<adSetID>',
  'creative' : {'creative_id':'<adCreativeID>'},
  'status' : 'PAUSED',
};
const ads = (new AdAccount(id)).createAd(
  fields,
  params
);
console.log(ads); // Log the result
```
```

--------------------------------

### PHP SDK Example

Source: https://developers.facebook.com/docs/marketing-api/dynamic-ads-auto/ads-management

Example of creating an ad using the Facebook PHP SDK.

```APIDOC
## PHP SDK Example

### Description
This example demonstrates how to create an ad using the Facebook PHP SDK.

### Method
POST

### Endpoint
`/ads` (via SDK)

### Parameters
#### Request Body
- **name** (string) - Required - The name of the ad.
- **adset_id** (string) - Required - The ID of the ad set to which the ad belongs.
- **creative** (array) - Required - An array containing the creative details.
  - **creative_id** (string) - Required - The ID of the creative to be used for the ad.
- **status** (string) - Optional - The status of the ad (e.g., "PAUSED").

### Request Example
```php
require __DIR__ . '/vendor/autoload.php';

use FacebookAds\Object\AdAccount;
use FacebookAds\Object\Ad;
use FacebookAds\Api;
use FacebookAds\Logger\CurlLogger;

$access_token = '<ACCESS_TOKEN>';
$app_secret = '<APP_SECRET>';
$app_id = '<APP_ID>';
$id = '<AD_ACCOUNT_ID>';

$api = Api::init($app_id, $app_secret, $access_token);
$api->setLogger(new CurlLogger());

$fields = array(
);
$params = array(
  'name' => 'My Ad',
  'adset_id' => '<adSetID>',
  'creative' => array('creative_id' => '<adCreativeID>'),
  'status' => 'PAUSED',
);
echo json_encode((new AdAccount($id))->createAd(
  $fields,
  $params
)->exportAllData(), JSON_PRETTY_PRINT);
```

### Response
#### Success Response (200)
Details of the created ad.

#### Response Example
```json
// Printed by echo json_encode(...)
```
```

--------------------------------

### GET /insights

Source: https://developers.facebook.com/docs/marketing-api/insights-api/getting-started

Retrieves campaign statistics for a specified date range. This is a basic example to get the last 7 days of performance for a campaign.

```APIDOC
## GET /insights

### Description
Retrieves campaign statistics for a specified date range. This is a basic example to get the last 7 days of performance for a campaign.

### Method
GET

### Endpoint
`https://graph.facebook.com/API_VERSION/AD_CAMPAIGN_ID/insights`

### Parameters
#### Query Parameters
- **date_preset** (string) - Required - The date range for the insights (e.g., `last_7d`).
- **access_token** (string) - Required - Your valid access token.

### Request Example
```bash
curl -G \
  -d "date_preset=last_7d" \
  -d "access_token=ACCESS_TOKEN" \
  "https://graph.facebook.com/API_VERSION/AD_CAMPAIGN_ID/insights"
```

### Response
#### Success Response (200)
- **data** (array) - Contains the ad statistics.
- **paging** (object) - Contains cursors for pagination.

#### Response Example
```json
{
  "data": [
    {
      "impressions": "2466376",
      "date_start": "2009-03-28",
      "date_stop": "2016-04-01"
    }
  ],
  "paging": {
    "cursors": {
      "before": "MAZDZD",
      "after": "MAZDZD"
    }
  }
}
```
```

--------------------------------

### Real Estate Ads Overview

Source: https://developers.facebook.com/docs/marketing-api/dynamic-ads-for-real-estate

This section provides an overview of the Real Estate Ads API, its purpose, and how to get started.

```APIDOC
## Real Estate Ads API

### Description
Use Facebook's real estate ads to leverage cross-device intent signals to automatically promote relevant listings from your inventory with a unique creative on Facebook. For Facebook Marketplace, use this list of our Marketplace listing partners and contact them to arrange for your inventory to be on Marketplace. (Currently, this feature is only available in certain countries.).

### Key Features
- Promote relevant listings from your inventory.
- Leverage cross-device intent signals.
- Create customized ads with property information.
- Regularly update catalogs through various options (e.g., batch uploads).

### Special Ad Category
Advertisers must specify `HOUSING` as a `special_ad_category` for ad campaigns that market housing. This restricts the available targeting options for these campaigns. Advantage+ catalog ads using Home Listing Catalogs must adhere to these restrictions. See Special Ad Category for more information.
```

--------------------------------

### Conversions API Overview

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameters/custom-data

This section covers the foundational aspects of using the Conversions API, including initial setup and verification of your integration.

```APIDOC
## Conversions API

### Description
Provides tools and endpoints for sending web, offline, and app events to Facebook to measure and optimize marketing campaigns.

### Get Started
Instructions on how to begin integrating with the Conversions API.

### Using the API
General guidelines and best practices for interacting with the Conversions API.

### Verifying Setup
Methods to confirm that your Conversions API integration is correctly implemented and events are being received.

### Parameters
Details on the various parameters available for structuring your event data, categorized for clarity:

#### Main Body Parameters
Core parameters required for all Conversions API requests.

#### Server Event Parameters
Parameters specific to events generated on your server.

#### Customer Information Parameters
Parameters for identifying customers, such as email, phone number, and name.

#### Standard Parameters
Commonly used parameters for describing events, like event name, currency, and value.

#### App Data Parameters
Parameters related to app events, including app ID and session information.

#### Original Event Data
Information about the original event source, if applicable.

### Parameter Builder Library
Resources and tools to help construct valid API parameters.

### Conversions API for App Events
Specific guidance for integrating app-based events.

### Conversions API for Offline Events
Instructions for sending events that occur offline.

### Conversions API for Business Messaging
Details on integrating events from business messaging platforms.

### Conversion Leads Integration
How to integrate lead conversion data.

### Dataset Quality API
Tools for assessing the quality of the data sent via the API.

### Handling Duplicate Events
Strategies and mechanisms to prevent duplicate event submissions.

### Guides
Step-by-step guides for common integration scenarios.

### Payload Helper
Tools to assist in formatting your API request payloads.

### Best Practices
Recommendations for optimal performance and data accuracy.

### Troubleshooting
Common issues and solutions for Conversions API integration.
```

--------------------------------

### Ruby SDK - Get Ads by Campaign

Source: https://developers.facebook.com/docs/marketing-api/reference/adgroup

Example of how to retrieve ads from a campaign using the Ruby Facebook Business SDK.

```APIDOC
## Ruby SDK - Get Ads by Campaign

### Description
Retrieves ads from a campaign using the Ruby Facebook Business SDK.

### Method
N/A (SDK method)

### Endpoint
N/A (SDK method)

### Request Body
N/A (SDK method)

### Request Example
```ruby
require 'facebook_ads'

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_CAMPAIGN_ID>'

FacebookAds.configure do |config|
  config.access_token = access_token
  config.app_secret = app_secret
end

campaign = FacebookAds::Campaign.get(id)
adss = campaign.ads({
    fields: { 'name' },
})
```
```

--------------------------------

### Fetch Products with PHP SDK

Source: https://developers.facebook.com/docs/marketing-api/catalog/get-started/integrate-via-meta-sdk

This snippet demonstrates how to initialize the PHP SDK and fetch all products within a specified catalog. It iterates through the products, extracting and displaying their names and IDs. The example also shows how to manage cursor-based pagination and fetch subsequent pages of results.

```php
Api::init($app_id, $app_secret, $access_token);


// Get all products in a catalog
$catalog = new ProductCatalog($catalog_id);
$cursor = $catalog->getProducts();
//$cursor->setUseImplicitFetch(true); Set true for Auto Scroll


while ($cursor->valid()) {
   echo $cursor->current()->{ProductItemFields::NAME}.PHP_EOL;
   echo $cursor->current()->{ProductItemFields::ID}.PHP_EOL;
   $cursor->next();
}


$cursor->end(); // Set cursor to the end of the lst
$cursor->fetchAfter(); // Fetch the next page
$cursor->next(); // Move the cursor to the next item


while ($cursor->valid()) {
   echo $cursor->current()->{ProductItemFields::NAME}.PHP_EOL;
   echo $cursor->current()->{ProductItemFields::ID}.PHP_EOL;
   $cursor->next();
}
```

--------------------------------

### Install Conversions API Gateway using Bash

Source: https://developers.facebook.com/docs/marketing-api/gateway-products/gateway-gcp/create-instance-agencies-partners

This command downloads and executes the installation script for the Conversions API Gateway from a provided URL. It is intended to be run within a GCP Cloud Shell environment. Ensure you have the necessary permissions to run scripts and install services.

```bash
bash <(curl -sL https://storage.googleapis.com/capig-prod-public-release/install.sh)
```

--------------------------------

### Create Ad Creative with Advantage+ Creative Features

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

This endpoint allows you to create a standalone ad creative and opt-in to specific Advantage+ Creative features by specifying them in the `creative_features_spec`.

```APIDOC
## POST /act_{AD_ACCOUNT_ID}/adcreatives

### Description
Creates a new ad creative and enables specified Advantage+ Creative features.

### Method
POST

### Endpoint
`https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives`

### Parameters
#### Request Body
- **name** (string) - Required - The name of the ad creative.
- **degrees_of_freedom_spec** (object) - Required - Specifies the Advantage+ Creative features to opt-in.
  - **creative_features_spec** (object) - Required - Contains the list of creative features.
    - **[feature_name]** (object) - Required - Configuration for a specific creative feature.
      - **enroll_status** (string) - Required - Set to `"OPT_IN"` to enable the feature.
- **access_token** (string) - Required - Your valid access token.

### Request Example
```json
{
  "name": "Advantage+ Creative Creative",
  "degrees_of_freedom_spec": {
    "creative_features_spec": {
      "image_touchups": {
        "enroll_status": "OPT_IN"
      },
      "inline_comment": {
        "enroll_status": "OPT_IN"
      },
      "image_template": {
        "enroll_status": "OPT_IN"
      }
    }
  }
}
```

### Response
#### Success Response (200)
- **id** (string) - The ID of the newly created ad creative.
- **name** (string) - The name of the ad creative.

#### Response Example
```json
{
  "id": "123456789012345"
}
```
```

--------------------------------

### GET /<AD_ID>

Source: https://developers.facebook.com/docs/marketing-api/flexible-ad-format

Retrieve information about a specific ad, including its `creative_asset_groups_spec` to check the flexible ad format details.

```APIDOC
## GET /<AD_ID>

### Description
Retrieves details of a specific ad, including its creative asset groups specification, to verify the configuration of the flexible ad format.

### Method
GET

### Endpoint
https://graph.facebook.com/v24.0/<AD_ID>

### Parameters
#### Path Parameters
- **AD_ID** (string) - Required - The ID of the ad to retrieve.

#### Query Parameters
- **fields** (string) - Optional - Comma-separated list of fields to retrieve. Use `creative_asset_groups_spec` to get flexible ad format details.
- **access_token** (string) - Required - Your Facebook API access token.

### Request Example
```json
{
  "fields": "creative_asset_groups_spec",
  "access_token": "<ACCESS_TOKEN>"
}
```

### Response
#### Success Response (200)
- **id** (string) - The ID of the ad.
- **creative_asset_groups_spec** (object) - The creative asset groups specification for the ad.

#### Response Example
```json
{
  "creative_asset_groups_spec": {
    "groups": [
      {
        "images": [
          { "hash": "<IMAGE_HASH_1>" },
          { "hash": "<IMAGE_HASH_2>" }
        ],
        "texts": [
          { "text": "Summer Sale", "text_type": "primary_text" },
          { "text": "Everything 50% off", "text_type": "headline" }
        ],
        "videos": [
          { "video_id": "<VIDEO_ID_1>", "image_hash": "<VIDEO_THUMBNAIL_HASH_1>" },
          { "video_id": "<VIDEO_ID_2>", "image_hash": "<VIDEO_THUMBNAIL_HASH_2>" }
        ],
        "group_uuid": "<GROUP_ID>"
      }
    ]
  },
  "id": "<AD_ID>"
}
```
```

--------------------------------

### Incorrect Product Variant Setup Example

Source: https://developers.facebook.com/docs/marketing-api/catalog/product-variants

This example demonstrates an incorrect way to set up product variants. It shows a parent SKU without a color field and individual variants lacking a common item_group_id reference, which can lead to issues in catalog processing.

```text
ID | Name | Color | Price | item_group_id
---|---|---|---|---
CoolShirt123 | Cool shirt (parent) | | $9.99 | CoolShirt123
CoolShirt123_red | Cool Shirt - Red | red | $9.99 | CoolShirt123
CoolShirt123_blue | Cool Shirt - Blue | blue | $9.99 | CoolShirt123
```

--------------------------------

### Generating AI Backgrounds for Product Images API

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

This JSON configuration enables AI-powered background generation for product images. By setting `image_background_gen.enroll_status` to `OPT_IN`, the API will create and deliver different background versions to maximize audience response.

```JSON
{
    "creative_features_spec": {
        "image_background_gen": {
            "enroll_status": "OPT_IN"
        }
    }
}
```

--------------------------------

### Create Ad Set (PHP SDK)

Source: https://developers.facebook.com/docs/marketing-api/adset

This example shows how to initialize the Facebook Ads API and create an ad set using the PHP SDK, including setting various parameters.

```APIDOC
## POST /act_{AD_ACCOUNT_ID}/adsets

### Description
Initializes the Facebook Ads API and creates an ad set using the PHP SDK.

### Method
POST

### Endpoint
/act_{AD_ACCOUNT_ID}/adsets

### Parameters
#### Request Body
- **name** (string) - Required - The name of the ad set.
- **lifetime_budget** (string) - Optional - The lifetime budget for the ad set.
- **start_time** (string) - Optional - The start time for the ad set in ISO 8601 format.
- **end_time** (string) - Optional - The end time for the ad set in ISO 8601 format.
- **campaign_id** (string) - Required - The ID of the campaign.
- **bid_amount** (string) - Optional - The bid amount.
- **billing_event** (string) - Required - The billing event (e.g., LINK_CLICKS).
- **optimization_goal** (string) - Required - The optimization goal (e.g., LINK_CLICKS).
- **targeting** (array) - Required - Targeting criteria.
  - **facebook_positions** (array of strings) - Optional - Placements within Facebook.
  - **geo_locations** (array) - Required - Geographic targeting.
    - **countries** (array of strings) - Required - List of country codes.
  - **publisher_platforms** (array of strings) - Optional - Publisher platforms to target.
- **status** (string) - Required - The status of the ad set (e.g., PAUSED).

### Request Example
```php
require __DIR__ . '/vendor/autoload.php';

use FacebookAds\Object\AdAccount;
use FacebookAds\Object\AdSet;
use FacebookAds\Api;
use FacebookAds\Logger\CurlLogger;

$access_token = '<ACCESS_TOKEN>';
$app_secret = '<APP_SECRET>';
$app_id = '<APP_ID>';
$id = '<AD_ACCOUNT_ID>';

$api = Api::init($app_id, $app_secret, $access_token);
$api->setLogger(new CurlLogger());

$fields = array(
);
$params = array(
  'name' => 'My First Adset',
  'lifetime_budget' => '20000',
  'start_time' => '2024-07-29T17:54:57-0700',
  'end_time' => '2024-08-08T17:54:57-0700',
  'campaign_id' => '<adCampaignLinkClicksID>',
  'bid_amount' => '100',
  'billing_event' => 'LINK_CLICKS',
  'optimization_goal' => 'LINK_CLICKS',
  'targeting' => array('facebook_positions'=>array('feed'),'geo_locations'=>array('countries'=>array('US')),'publisher_platforms'=>array('facebook','audience_network')),
  'status' => 'PAUSED',
);
$adsets = (new AdAccount($id))->createAdSet($fields, $params);
```

### Response
#### Success Response (200)
- **id** (string) - The ID of the created ad set.

#### Response Example
```json
{
  "id": "<ad_set_id>"
}
```
```

--------------------------------

### Create Ad with Advantage+ Creative Features

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

This endpoint allows you to create a new ad, linking it to an ad set and specifying Advantage+ Creative features within the `degrees_of_freedom_spec` of the creative object.

```APIDOC
## POST /act_{AD_ACCOUNT_ID}/ads

### Description
Creates a new ad with an associated ad set and enables specified Advantage+ Creative features within the creative configuration.

### Method
POST

### Endpoint
`https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads`

### Parameters
#### Request Body
- **adset_id** (string) - Required - The ID of the ad set to which the ad will belong.
- **creative** (object) - Required - The creative object for the ad.
  - **name** (string) - Required - The name of the creative.
  - **object_story_spec** (object) - Required - Defines the content of the ad.
    - **link_data** (object) - Required - Data for link ads.
      - **image_hash** (string) - Required - The hash of the image to be used.
      - **link** (string) - Required - The URL for the ad.
      - **message** (string) - Required - The primary text of the ad.
    - **page_id** (string) - Required - The ID of the Facebook Page to use for the ad.
  - **degrees_of_freedom_spec** (object) - Required - Specifies the Advantage+ Creative features to opt-in.
    - **creative_features_spec** (object) - Required - Contains the list of creative features.
      - **[feature_name]** (object) - Required - Configuration for a specific creative feature.
        - **enroll_status** (string) - Required - Set to `"OPT_IN"` to enable the feature.

### Request Example
```json
{
  "adset_id": "<ADSET_ID>",
  "creative": {
    "name": "Advantage+ Creative Adgroup",
    "object_story_spec": {
      "link_data": {
        "image_hash": "<IMAGE_HASH>", 
        "link": "<URL>", 
        "message": "You got this."
      },
      "page_id": "<PAGE_ID>"
    },
    "degrees_of_freedom_spec": {
      "creative_features_spec": {
        "image_touchups": {
          "enroll_status": "OPT_IN"
        },
        "inline_comment": {
          "enroll_status": "OPT_IN"
        },
        "image_template": {
          "enroll_status": "OPT_IN"
        }
      }
    }
  }
}
```

### Response
#### Success Response (200)
- **id** (string) - The ID of the newly created ad.

#### Response Example
```json
{
  "id": "123456789012345"
}
```
```

--------------------------------

### Java SDK - Get Ads by Campaign

Source: https://developers.facebook.com/docs/marketing-api/reference/adgroup

Example of how to retrieve ads from a campaign using the Java Facebook Business SDK.

```APIDOC
## Java SDK - Get Ads by Campaign

### Description
Retrieves ads from a campaign using the Java Facebook Business SDK.

### Method
N/A (SDK method)

### Endpoint
N/A (SDK method)

### Request Body
N/A (SDK method)

### Request Example
```java
import com.facebook.ads.sdk.*;
import java.io.File;
import java.util.Arrays;

public class SAMPLE_CODE_EXAMPLE {
  public static void main (String args[]) throws APIException {

    String access_token = "<ACCESS_TOKEN>";
    String app_secret = "<APP_SECRET>";
    String app_id = "<APP_ID>";
    String id = "<AD_CAMPAIGN_ID>";
    APIContext context = new APIContext(access_token).enableDebug(true);

    new Campaign(id, context).getAds()
      .requestNameField()
      .execute();

  }
}
```
```

--------------------------------

### Node.js SDK Example

Source: https://developers.facebook.com/docs/marketing-api/dynamic-ads-auto/ads-management

Example of creating an ad using the Facebook Node.js SDK.

```APIDOC
## Node.js SDK Example

### Description
This example demonstrates how to create an ad using the Facebook Node.js SDK.

### Method
POST

### Endpoint
`/act_<AD_ACCOUNT_ID>/ads` (via SDK)

### Parameters
#### Request Body
- **name** (string) - Required - The name of the ad.
- **adset_id** (string) - Required - The ID of the ad set to which the ad belongs.
- **creative** (object) - Required - An object containing the creative details.
  - **creative_id** (string) - Required - The ID of the creative to be used for the ad.
- **status** (string) - Optional - The status of the ad (e.g., "PAUSED").

### Request Example
```javascript
'use strict';
const bizSdk = require('facebook-nodejs-business-sdk');
const AdAccount = bizSdk.AdAccount;
const Ad = bizSdk.Ad;

const access_token = '<ACCESS_TOKEN>';
const app_secret = '<APP_SECRET>';
const app_id = '<APP_ID>';
const id = '<AD_ACCOUNT_ID>';
const api = bizSdk.FacebookAdsApi.init(access_token);
const showDebugingInfo = true; // Setting this to true shows more debugging info.
if (showDebugingInfo) {
  api.setDebug(true);
}

let fields, params;
fields = [];
params = {
  'name' : 'My Ad',
  'adset_id' : '<adSetID>',
  'creative' : {'creative_id':'<adCreativeID>'},
  'status' : 'PAUSED',
};
const ads = (new AdAccount(id)).createAd(
  fields,
  params
);
```

### Response
#### Success Response (200)
Details of the created ad.

#### Response Example
```json
// Logged via logApiCallResult function in the example
```
```

--------------------------------

### Python SDK - Get Ads by Campaign

Source: https://developers.facebook.com/docs/marketing-api/reference/adgroup

Example of how to retrieve ads from a campaign using the Python Facebook Business SDK.

```APIDOC
## Python SDK - Get Ads by Campaign

### Description
Retrieves ads from a campaign using the Python Facebook Business SDK.

### Method
N/A (SDK method)

### Endpoint
N/A (SDK method)

### Request Body
N/A (SDK method)

### Request Example
```python
from facebook_business.adobjects.campaign import Campaign
from facebook_business.adobjects.ad import Ad
from facebook_business.api import FacebookAdsApi

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_CAMPAIGN_ID>'
FacebookAdsApi.init(access_token=access_token)

fields = [
  'name',
]
params = {
}
print Campaign(id).get_ads(
  fields=fields,
  params=params,
)
```
```

--------------------------------

### Async Examples

Source: https://developers.facebook.com/docs/marketing-api/asyncrequests

Provides practical examples for interacting with asynchronous requests, including fetching request status, retrieving results, listing request sets for an ad account, and listing requests for a campaign.

```APIDOC
## Async Request Examples

### Get Status of a Specific Async Request
Retrieves the status and details of a particular asynchronous request.

```bash
curl -G \
-d "id=6012384857989" \
-d "pretty=true" \
-d "access_token=_____" \
"https://graph.facebook.com/v24.0/"
```

**Return Values:**
```json
{
   "id": "6012384857989",
   "owner_id": 12345,
   "name": "testasyncset",
   "is_completed": true
}
```

### Get Results of Requests
Fetches the results associated with specific asynchronous requests, often used after a batch operation completes.

```bash
curl -G \
-d "id=6012384857989" \
-d "pretty=true" \
-d "fields=result" \
-d "access_token=_____" \
"https://graph.facebook.com/v24.0/requests"
```

**Returns:**
```json
{
   "data": [
      {
         "result": {
            "id": "6012384860989"
         },
         "id": "6012384858389"
      },
      {
         "result": {
            "id": "6012384858789"
         },
         "id": "6012384858189"
      }
   ],
   "paging": {
      "cursors": {
         "after": "___",
         "before": "___"
      }
   }
}
```

### Get List of Request Sets for an Ad Account
Lists all asynchronous request sets associated with a specific ad account, optionally filtering by completion status.

```bash
curl -G \
-d "is_completed=1" \
-d "pretty=true" \
-d "access_token=___" \
"https://graph.facebook.com/v24.0/act_71597454/asyncadrequestsets"
```

**Returns:**
```json
{
   "data": [
      {
         "id": "6012384253789",
         "owner_id": 71597454,
         "name": "testasyncset",
         "is_completed": true
      },
   ],
   "paging": {
      "cursors": {
         "after": "___",
         "before": "___"
      }
   }
}
```

### Get List of Requests for a Campaign
Retrieves a list of asynchronous requests related to a specific campaign, filterable by their status (e.g., SUCCESS, ERROR).

```bash
curl -G \
-d "status=SUCCESS,ERROR" \
-d "pretty=true" \
-d "access_token=___" \
"https://graph.facebook.com/v24.0/6008248529789/asyncadrequests"
```

**Return Values:**
```json
{
   "data": [
      {
         "id": "6012384951789",
         "scope_object_id": 6008248529789,
         "status": "SUCCESS"
      },
   ],
   "paging": {
      "cursors": {
         "after": "___",
         "before": "___"
      }
   }
}
```
```

--------------------------------

### Generate Ad Preview with Ruby SDK

Source: https://developers.facebook.com/docs/marketing-api/dynamic-ads-for-travel/catalog

This Ruby code example uses the `facebook_ads` gem to generate an ad preview. It requires the gem to be installed and configured with your Facebook App credentials.

```ruby
require 'facebook_ads'

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_CREATIVE_ID>'

FacebookAds.configure do |config|
  config.access_token = access_token
  config.app_secret = app_secret
end

ad_creative = FacebookAds::AdCreative.get(id)
previewss = ad_creative.previews({
    fields: {  },
    ad_format: 'DESKTOP_FEED_STANDARD',
    product_item_ids: ['<productItemID>'],
})
```

--------------------------------

### Conversions API Gateway - Troubleshooting Guide

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/guides/gateway/troubleshooting

A comprehensive guide to resolving common issues with the Conversions API Gateway.

```APIDOC
## Conversions API Gateway - Troubleshooting Guide

### Description
This guide provides solutions for common problems encountered while using the Conversions API Gateway.

### Method
N/A

### Endpoint
N/A

### Parameters
N/A

### Request Example
N/A

### Response
N/A
```

--------------------------------

### Previewing Advantage+ Creative Features

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

Preview Advantage+ Creative features by adding the `creative_feature` parameter to your preview request. This allows you to see how features like image templates, text optimizations, and AI-generated stickers will appear.

```APIDOC
## GET /{AD_ID}/previews

### Description
Preview Advantage+ Creative features by adding the `creative_feature` parameter to your preview request. This allows you to see how features like image templates, text optimizations, and AI-generated stickers will appear.

### Method
GET

### Endpoint
`https://graph.facebook.com/v24.0/<AD_ID>/previews`

### Parameters
#### Query Parameters
- **ad_format** (string) - Required - The desired ad format (e.g., `DESKTOP_FEED_STANDARD`).
- **creative_feature** (string) - Required - The name of the Advantage+ Creative feature to preview (e.g., `image_templates`, `text_optimizations`).
- **access_token** (string) - Required - User's access token.

### Request Example
```bash
curl -X GET -G \
  -d 'ad_format="DESKTOP_FEED_STANDARD"' \
  -d 'creative_feature=<FEATURE_NAME>' \
  -d 'access_token=<ACCESS_TOKEN>'
https://graph.facebook.com/v24.0/<AD_ID>/previews
```

### Response
#### Success Response (200)
Preview image or details of the ad creative with the specified feature applied.

#### Response Example
(Example response not provided in the source text)
```

--------------------------------

### App Install Ads Tracking Spec (Facebook App ID)

Source: https://developers.facebook.com/docs/marketing-api/tracking-specs

For App Install Ads, a tracking spec must be explicitly defined using the Facebook App ID. This example demonstrates tracking custom app events and mobile app installs.

```json
[{"action.type": "app_custom_event", "application": "APP_ID"}, {"action.type": "mobile_app_install", "application": "APP_ID"}]
```

--------------------------------

### Conversions API - Best Practices

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/guides/gateway/troubleshooting

Recommended practices for implementing and using the Conversions API effectively.

```APIDOC
## Conversions API - Best Practices

### Description
This document outlines the recommended best practices for implementing the Conversions API to maximize data accuracy, event matching, and campaign performance.

### Method
N/A

### Endpoint
N/A

### Parameters
N/A

### Request Example
N/A

### Response
N/A
```

--------------------------------

### Node.js SDK - Get Ads by Campaign

Source: https://developers.facebook.com/docs/marketing-api/reference/adgroup

Example of how to retrieve ads from a campaign using the Node.js Facebook Business SDK.

```APIDOC
## Node.js SDK - Get Ads by Campaign

### Description
Retrieves ads from a campaign using the Node.js Facebook Business SDK.

### Method
N/A (SDK method)

### Endpoint
N/A (SDK method)

### Request Body
N/A (SDK method)

### Request Example
```javascript
'use strict';
const bizSdk = require('facebook-nodejs-business-sdk');
const Campaign = bizSdk.Campaign;
const Ad = bizSdk.Ad;

const access_token = '<ACCESS_TOKEN>';
const app_secret = '<APP_SECRET>';
const app_id = '<APP_ID>';
const id = '<AD_CAMPAIGN_ID>';
const api = bizSdk.FacebookAdsApi.init(access_token);
const showDebugingInfo = true; // Setting this to true shows more debugging info.
if (showDebugingInfo) {
  api.setDebug(true);
}

const logApiCallResult = (apiCallName, data) => {
  console.log(apiCallName);
  if (showDebugingInfo) {
    console.log('Data:' + JSON.stringify(data));
  }
};

let fields, params;
fields = [
  'name',
];
params = {
};
const adss = (new Campaign(id)).getAds(
  fields,
  params
);
logApiCallResult('adss api call complete.', adss);
```
```

--------------------------------

### PHP SDK - Get Ads by Campaign

Source: https://developers.facebook.com/docs/marketing-api/reference/adgroup

Example of how to retrieve ads from a campaign using the PHP Facebook Business SDK.

```APIDOC
## PHP SDK - Get Ads by Campaign

### Description
Retrieves ads from a campaign using the PHP Facebook Business SDK.

### Method
N/A (SDK method)

### Endpoint
N/A (SDK method)

### Request Body
N/A (SDK method)

### Request Example
```php
require __DIR__ . '/vendor/autoload.php';

use FacebookAds\Object\Campaign;
use FacebookAds\Object\Ad;
use FacebookAds\Api;
use FacebookAds\Logger\CurlLogger;

$access_token = '<ACCESS_TOKEN>';
$app_secret = '<APP_SECRET>';
$app_id = '<APP_ID>';
$id = '<AD_CAMPAIGN_ID>';

$api = Api::init($app_id, $app_secret, $access_token);
$api->setLogger(new CurlLogger());

$fields = array(
  'name',
);
$params = array(
);
echo json_encode((new Campaign($id))->getAds(
  $fields,
  $params
)->getResponse()->getContent(), JSON_PRETTY_PRINT);
```
```

--------------------------------

### Product Catalog Image Settings - Creating

Source: https://developers.facebook.com/docs/marketing-api/reference/product-catalog-image-settings

Information on creating product catalog image settings.

```APIDOC
## POST /product_catalog/image_settings

### Description
This endpoint does not support creating product catalog image settings.

### Method
POST

### Endpoint
/product_catalog/image_settings

### Parameters
N/A

### Request Body
N/A

### Request Example
```json
{
  "example": "Operation not supported."
}
```

### Response
#### Error Response
- **message** (string) - Indicates that the operation is not supported.

#### Response Example
```json
{
  "error": {
    "message": "You can't perform this operation on this endpoint."
  }
}
```
```

--------------------------------

### Install Signals Gateway Pixel Code

Source: https://developers.facebook.com/docs/marketing-api/gateway-products/signals-gateway/pixel-setup-google-tag-manager

This JavaScript snippet is used to initialize the Signals Gateway Pixel on your website. It should be placed at the bottom of the header section, just above the closing </head> tag, and installed on every page. It requires your Pixel ID, Host, and Script URL for proper initialization and event tracking.

```html
<!-- Signals Gateway Pixel Code -->
  <script>
  !function(a,h,e,v,n,t,s)
    {if(a.cbq)return;n=a.cbq=function(){n.callMethod?
    
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    
if(!a._cbq)a._cbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=h.createElement(e);t.async=!0;
    t.src=v;s=h.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, 
document,'script',
    'https://sgw.test.com/sdk/123456789/events.js');
    cbq('setHost', 'https://sgw.test.com/');
    cbq('init', 123456789);
    cbq('track', 'PageView');
  </script>
    <!-- End Signals Gateway Pixel Code -->
```

--------------------------------

### Conversions API Guides - Zapier Integration

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/guides/gateway/troubleshooting

Instructions for integrating the Conversions API with Zapier.

```APIDOC
## Conversions API Guides - Zapier Integration

### Description
This guide provides step-by-step instructions on how to connect and use the Conversions API with Zapier for automating event data flow.

### Method
N/A

### Endpoint
N/A

### Parameters
N/A

### Request Example
N/A

### Response
N/A
```

--------------------------------

### Read Business Managed Partner Ads Funding Source Details via iOS SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/business/managed_partner_ads_funding_source_details

This iOS SDK example illustrates fetching business managed partner ads funding source details usingFBSDKGraphRequest. It configures a GET request with the specified path and parameters, then starts the request, providing a completion handler to manage the results and errors.

```objective-c
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/{business-id}/managed_partner_ads_funding_source_details"
                                      parameters:params
                                      HTTPMethod:@"GET"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];

```

--------------------------------

### Install Signals Gateway using Bash

Source: https://developers.facebook.com/docs/marketing-api/gateway-products/gateway-gcp/create-instance-agencies-partners

This command downloads and executes the installation script for the Signals Gateway from a provided URL. It is designed for use within a GCP Cloud Shell environment. Prior authorization may be required to proceed with the installation.

```bash
bash <(curl -sL https://storage.googleapis.com/sgw-prod-public-release/install.sh)
```

--------------------------------

### Python EtldPlusOneResolver Implementation

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/server-side-onboarding

This Python code provides a default implementation of the EtldPlusOneResolver class. It inherits from the base class and overrides the resolve method to return the input hostname as the etld+1. This serves as a basic example for developers to customize.

```python
from capi_param_builder import EtldPlusOneResolver


class DefaultEtldPlusOneResolver(EtldPlusOneResolver):
   """
   Default implementation of EtldPlusOneResolver
   """


   def resolve(self, host_name: str) -> Optional[str]:
        # Start your implementation to get etld+1 from host_name
        etld_plus_one = host_name
        # Return the resolved etld+1
        return etld_plus_one
```

--------------------------------

### Create Hotel Set using Python SDK

Source: https://developers.facebook.com/docs/marketing-api/dynamic-ads-for-hotels/catalog

This Python example demonstrates creating a hotel set with a brand filter using the Facebook Business SDK. It initializes the SDK and sets up the parameters for the product set creation.

```python
from facebook_business.adobjects.productcatalog import ProductCatalog
from facebook_business.adobjects.productset import ProductSet
from facebook_business.api import FacebookAdsApi

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<PRODUCT_CATALOG_ID>'
FacebookAdsApi.init(access_token=access_token)

fields = [
]
params = {
  'name': 'Test Hotel Set',
  'filter': {'brand':{'i_contains':'sample brand'}},
}
print ProductCatalog(id).create_product_set(
  fields=fields,
  params=params,
)

```

--------------------------------

### Python SDK - Get Ads by Ad Set

Source: https://developers.facebook.com/docs/marketing-api/reference/adgroup

Example of how to retrieve ads from an ad set using the Python Facebook Business SDK.

```APIDOC
## Python SDK - Get Ads by Ad Set

### Description
Retrieves ads from an ad set using the Python Facebook Business SDK.

### Method
N/A (SDK method)

### Endpoint
N/A (SDK method)

### Request Body
N/A (SDK method)

### Request Example
```python
from facebookads.objects import AdSet, Ad

adset_id = <AD_SET_ID>
ad_set = AdSet(adset_id)
ad_iter = ad_set.get_ads(fields=[Ad.Field.name])
for ad in ad_iter:
    print ad[Ad.Field.name]
```
```

--------------------------------

### Client-Side Parameter Builder Library

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/client-side-onboarding

This section details how to add the Meta Parameter Builder libraries as dependencies to your webpage for client-side integration.

```APIDOC
## Adding Client-Side Libraries

### clientParamBuilder.js
To use the `clientParamBuilder.js` library, include the following script tag in your HTML.

```html
<script src="https://capi-automation.s3.us-east-2.amazonaws.com/public/client_js/capiParamBuilder/clientParamBuilder.bundle.js"></script>
```

### clientParamsHelper.js
To use the `clientParamsHelper.js` library, include the following script tag in your HTML.

```html
<script src="https://capi-automation.s3.us-east-2.amazonaws.com/public/client_js/clientParamsHelper/clientParamsHelper.bundle.js" ></script>
```
```

--------------------------------

### Migration Example: Java

Source: https://developers.facebook.com/docs/marketing-api/server-side-api/using-the-api

Example demonstrating how to migrate existing systems using the Business SDK to incorporate the CAPIGatewayIngressRequest.

```APIDOC
## Migration Example: Java

### Description
This example shows how to integrate `CAPIGatewayIngressRequest` into an existing Java Business SDK setup.

### Method
N/A (Code example)

### Endpoint
N/A

### Parameters
#### Path Parameters
None

#### Query Parameters
None

#### Request Body
None

### Request Example
```java
// this is the standard event request that we attach events to


EventRequest eventRequest = new EventRequest(PIXEL_ID, context);

CAPIGatewayIngressRequest capiSyncRequest = new CAPIGatewayIngressRequest(CB_URL, CAPIG_ACCESS_KEY);
eventRequest.setCustomEndpoint(capiSyncRequest);
eventRequest.addDataItem(testEvent);
eventRequest.execute();
```

### Response
#### Success Response (200)
None

#### Response Example
None

```

--------------------------------

### Read Ad Account Targeting - HTTP Example

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-account/targetingbrowse

Demonstrates how to make an HTTP GET request to retrieve ad account targeting data. It requires the ad account ID and an access token. This is a foundational example for interacting with the API.

```http
GET /v24.0/{ad-account-id}/targetingbrowse HTTP/1.1
Host: graph.facebook.com
```

--------------------------------

### PHP SDK - Get Ads by Ad Set

Source: https://developers.facebook.com/docs/marketing-api/reference/adgroup

Example of how to retrieve ads from an ad set using the PHP Facebook Business SDK.

```APIDOC
## PHP SDK - Get Ads by Ad Set

### Description
Retrieves ads from an ad set using the PHP Facebook Business SDK.

### Method
N/A (SDK method)

### Endpoint
N/A (SDK method)

### Request Body
N/A (SDK method)

### Request Example
```php
use FacebookAds\Object\AdSet;
use FacebookAds\Object\Fields\AdSetFields;

$adset = new AdSet($adset_id);
$ads = $adset->getAds(array(
  AdFields::NAME,
));

// Outputs names of Ads .
foreach ($ads as $ad) {
  echo $ad->name;
}
```
```

--------------------------------

### GET /previews

Source: https://developers.facebook.com/docs/marketing-api/travel-ads

Generates a preview of an ad creative. You can specify product item IDs, start date, and end date to customize the preview.

```APIDOC
## GET /previews

### Description
Generates a preview of an ad creative. You can specify product item IDs, start date, and end date to customize the preview.

### Method
GET

### Endpoint
https://graph.facebook.com/v24.0/<AD_CREATIVE_ID>/previews

### Parameters
#### Path Parameters
- **AD_CREATIVE_ID** (string) - Required - The ID of the ad creative.

#### Query Parameters
- **ad_format** (string) - Required - The format of the ad (e.g., 'DESKTOP_FEED_STANDARD').
- **product_item_ids** (array of strings) - Required - A list of product item IDs to include in the preview.
- **access_token** (string) - Required - Your Facebook API access token.
- **start_date** (string) - Optional - The start date for the preview (YYYY-MM-DD).
- **end_date** (string) - Optional - The end date for the preview (YYYY-MM-DD).

### Request Example
```json
{
  "ad_format": "DESKTOP_FEED_STANDARD",
  "product_item_ids": [
    "<PRODUCT_ITEM_ID>"
  ],
  "access_token": "<ACCESS_TOKEN>"
}
```

### Response
#### Success Response (200)
- **preview_url** (string) - The URL to the ad preview.

#### Response Example
```json
{
  "preview_url": "https://www.facebook.com/ads/preview/..."
}
```
```

--------------------------------

### GET Request to Overrides API Endpoint

Source: https://developers.facebook.com/docs/marketing-api/catalog/localized-catalog/localized-catalog-setup/overrides-api

Demonstrates how to make a GET request to the Overrides API endpoint to retrieve override details for a given item ID. It includes an example of using filtering parameters for keys.

```HTTP
GET /v20.0/{item_id}/override_details?keys=US,en_XX,DE,es_XX
```

--------------------------------

### Migration Example: PHP

Source: https://developers.facebook.com/docs/marketing-api/server-side-api/using-the-api

Example demonstrating how to migrate existing systems using the Business SDK to incorporate the CAPIGatewayIngressRequest.

```APIDOC
## Migration Example: PHP

### Description
This example shows how to integrate `CAPIGatewayIngressRequest` into an existing PHP Business SDK setup.

### Method
N/A (Code example)

### Endpoint
N/A

### Parameters
#### Path Parameters
None

#### Query Parameters
None

#### Request Body
None

### Request Example
```php
// this is the standard event request that we attach events to
$event_request = new EventRequest($this->pixel_id);
$capiIngressRequest = new CAPIGatewayIngressRequest($this->cb_url, $this->access_key);
$event_request->setCustomEndpoint($capiIngressRequest);
// pass the events to this event Request object
$event_request->setEvents($events);
$event_request->execute()
```

### Response
#### Success Response (200)
None

#### Response Example
None

```

--------------------------------

### Conversions API Guides - Business SDK Features for Conversions API

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/guides/gateway/troubleshooting

Overview of Business SDK features relevant to the Conversions API.

```APIDOC
## Conversions API Guides - Business SDK Features for Conversions API

### Description
This document highlights features within the Meta Business SDK that can be utilized for implementing and managing the Conversions API.

### Method
N/A

### Endpoint
N/A

### Parameters
N/A

### Request Example
N/A

### Response
N/A
```

--------------------------------

### Graph API GET Request for Ad Account DSA Recommendations

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-account-dsa-recommendations

A basic HTTP GET request to the Graph API endpoint for Ad Account DSA Recommendations. This serves as a foundational example for direct API interaction.

```http
GET v24.0/...?fields={fieldname_of_type_AdAccountDsaRecommendations} HTTP/1.1
Host: graph.facebook.com
```

--------------------------------

### GET /insights/application_mobile_app_installs

Source: https://developers.facebook.com/docs/marketing-api/mobile-app-ads

Retrieves aggregated daily insights on the demographics of people who installed your app. Requires an app access token.

```APIDOC
## GET /insights/application_mobile_app_installs

### Description
Retrieves aggregated daily insights on the demographics of people who installed your app. Insights only apply for ads with a promoted object containing the app ID. App ID can be obtained by registering the app on Facebook.

### Method
GET

### Endpoint
https://graph.facebook.com/v24.0/<APP_ID>/insights/application_mobile_app_installs

### Parameters
#### Path Parameters
- **APP_ID** (string) - Required - The ID of the app for which to retrieve insights.

#### Query Parameters
- **access_token** (string) - Required - An app access token.
- **breakdown** (string) - Optional - Specifies how to break down the statistics. Accepted values are `gender_age`, `country`, or `locale`. Cannot be combined with other breakdowns.

### Request Example
```json
{
  "example": "https://graph.facebook.com/v24.0/<APP_ID>/insights/application_mobile_app_installs?access_token=<ACCESS_TOKEN>"
}
```

### Response
#### Success Response (200)
- **data** (array) - An array of insight data objects.
- **insight_data_object** (object) - Contains metrics and dimensions for the app installs.

#### Response Example
```json
{
  "example": "{\"data\": [{\"value\": 100, \"date_start\": \"2023-01-01\", \"date_stop\": \"2023-01-01\"}], \"paging\": {\"cursors\": {\"before\": \"...\", \"after\": \"...\"}}}"
}
```
```

--------------------------------

### Seller Onboarding API

Source: https://developers.facebook.com/docs/marketing-api/collaborative-ads/managed-partner-ads/faq

This section details how to onboard sellers using the Managed Partner Ads Seller Business Creation API. It includes information on required parameters, optional fields, and how to handle existing pages.

```APIDOC
## POST /aams_seller_businesses

### Description
Onboards a seller as a business entity within the Managed Partner Ads system.

### Method
POST

### Endpoint
`https://graph.facebook.com/v<API_VERSION><Business_id>/aams_seller_businesses`

### Parameters
#### Path Parameters
- **Business_id** (string) - Required - The ID of the business managing the partner.

#### Query Parameters
- **access_token** (string) - Required - The access token for API authentication.
- **API_VERSION** (string) - Required - The version of the Facebook Marketing API.

#### Request Body
- **id** (string) - Required - The Business ID.
- **catalog_id** (string) - Required - The ID of the catalog associated with the seller.
- **line_of_credit_id** (string) - Required - The ID of the line of credit.
- **child_business_external_id** (string) - Required - The external ID of the seller.
- **name** (string) - Required - The name of the seller business.
- **seller_external_website_url** (string) - Optional - The seller's external website URL.
- **page_name** (string) - Optional - The name of the advertising page to be created for the seller. Defaults will be used if not provided.
- **page_profile_image_url** (string) - Optional - The URL of the seller's page profile image. Defaults will be used if not provided.
- **sales_rep_email** (string) - Required - The email address of the sales representative.
- **partner_facebook_page_url** (string) - Optional - The URL of the seller's own official Facebook page for integrity checks.
- **partner_registration_countries** (array) - Required - A list of countries where the seller is registered.
- **ad_account_currency** (string) - Required - The currency for the ad account.
- **credit_limit** (string) - Required - The credit limit for the seller.
- **seller_targeting_countries** (array) - Required - A list of countries targeted for seller advertising.
- **vertical** (string) - Required - The business vertical of the seller.
- **timezone_id** (string) - Required - The timezone ID for the seller.
- **skip_partner_page_creation** (boolean) - Optional - If true, skips the creation of a partner page.

### Request Example
```json
{
  "id": "<BUSINESS_ID>",
  "catalog_id": "<CATALOG_ID>",
  "line_of_credit_id": "<CREDIT_LINE_ID>",
  "child_business_external_id": "<SELLER_ID>",
  "name": "<SELLER_NAME>",
  "seller_external_website_url": "<SELLER_WEBSITE>",
  "page_name": "<SELLER_PAGE_NAME>",
  "page_profile_image_url": "<SELLER_PAGE_PROFILE>",
  "sales_rep_email": "<SELLER_EMAIL>",
  "partner_facebook_page_url": "<SELLER_OWN_PAGE_URL>",
  "partner_registration_countries": ["US", "UK"],
  "ad_account_currency": "USD",
  "credit_limit": "<CREDIT_LIMIT>",
  "seller_targeting_countries": ["US", "UK"],
  "vertical": "<OTHER>",
  "timezone_id": "<TIMEZONE_ID>",
  "access_token": "<ACCESS_TOKEN>"
}
```

### Response
#### Success Response (200)
- **success** (boolean) - Indicates if the onboarding was successful.
- **id** (string) - The ID of the newly created seller business.

#### Response Example
```json
{
  "success": true,
  "id": "1234567890"
}
```
```

--------------------------------

### Enabling Image Expansion for Placements via API

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

This snippet shows how to opt-in to the `image_uncrop` feature. Setting `image_uncrop.enroll_status` to `OPT_IN` allows the API to automatically expand images to fit more ad placements, utilizing AI to ensure optimal presentation.

```JSON
{
    "creative_features_spec": {
        "image_uncrop": {
            "enroll_status": "OPT_IN"
        }
    }
}
```

--------------------------------

### Conversions API - Troubleshooting Guide

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/guides/gateway/troubleshooting

A detailed guide to help resolve common problems with the Conversions API.

```APIDOC
## Conversions API - Troubleshooting Guide

### Description
This comprehensive guide offers solutions to common issues and errors encountered when implementing and using the Conversions API.

### Method
N/A

### Endpoint
N/A

### Parameters
N/A

### Request Example
N/A

### Response
N/A
```

--------------------------------

### Generate Access Token API

Source: https://developers.facebook.com/docs/marketing-api/business-manager/system-user/install-apps-and-generate-tokens

This section details how to generate system user access tokens. It covers the necessary parameters, supported scopes, and provides examples for both permanent and expiring tokens.

```APIDOC
## Generate Access Token

This endpoint allows for the generation of a persisting access token for a system user after they have installed an app. Several restrictions apply:

* The system user must have installed the app.
* Apps can only target businesses that have claimed them.
* The system user and the owner of the access token used in the generation call must belong to the same Business Manager.

### Method

POST

### Endpoint

`https://graph.facebook.com/API-VERSION/SYSTEM-USER-ID/access_tokens`

### Parameters

#### Request Body

*   `business_app` (string) - Required - The ID of the app owned by the Business Manager.
*   `appsecret_proof` (string) - Required - An `appsecret_proof` calculated for the app to ensure the correct server is making the API call. See Login Security for details.
*   `scope` (string) - Required - A comma-separated string containing extended permissions.
*   `access_token` (string) - Required - A token belonging to a Business Manager admin, admin system user, or regular system user.
*   `set_token_expires_in_60_days` (boolean) - Optional - Set to `true` to generate an expiring system user access token.

#### Supported Scopes

*   `ads_management`
*   `ads_read`
*   `attribution_read`
*   `business_management`
*   `catalog_management`
*   `commerce_account_manage_orders`
*   `commerce_account_read_orders`
*   `commerce_account_read_settings`
*   `instagram_basic`
*   `instagram_branded_content_ads_brand`
*   `instagram_branded_content_brand`
*   `instagram_content_publish`
*   `instagram_manage_comments`
*   `instagram_manage_insights`
*   `instagram_manage_messages`
*   `instagram_shopping_tag_products`
*   `leads_retrieval`
*   `page_events`
*   `pages_manage_ads`
*   `pages_manage_cta`
*   `pages_manage_engagement`
*   `pages_manage_instant_articles`
*   `pages_manage_metadata`
*   `pages_manage_posts`
*   `pages_messaging`
*   `pages_read_engagement`
*   `pages_read_user_content`
*   `pages_show_list`
*   `private_computation_access`
*   `publish_video`
*   `read_audience_network_insights`
*   `read_insights`
*   `read_page_mailboxes`
*   `whatsapp_business_management`
*   `whatsapp_business_messaging`

**Deprecated Permission:** `publish_actions` (only visible to apps created before April 24, 2018)

**Permissions Gated by Capabilities:**

| Capability                           | Permission(s)                                                                  |
| :----------------------------------- | :----------------------------------------------------------------------------- |
| `business_creative_asset_management` | `business_creative_management`, `business_creative_insights`, `business_creative_insights_share`, `business_data_management` |
| `commerce_public_api_beta_testing`   | `commerce_manage_accounts`, `commerce_account_read_reports`                    |

### Generating an `appsecret_proof`

```php
$appsecret_proof = hash_hmac(
  'sha256',
  $access_token_used_in_the_call,
  $app_secret_for_the_app_used_in_the_call
);
```

The `appsecret_proof` should be a string like `"1734d0d1e1ca62c9762c10bbc7321fdf89ecc7d819312b2f3"`.

### Request Example (Permanent Token)

```bash
curl \
 -F "business_app=<APP_ID>" \
 -F "scope=ads_management,pages_read_engagement,pages_show_list" \
 -F "appsecret_proof=APPSECRET-PROOF" \
 -F "access_token=ACCESS-TOKEN" \
 "https://graph.facebook.com/API-VERSION/SYSTEM-USER-ID/access_tokens"
```

### Request Example (Expiring Token)

```bash
curl \
 -F "business_app=<APP_ID>" \
 -F "scope=ads_management,pages_read_engagement,pages_show_list" \
 -F "set_token_expires_in_60_days=true" \
 -F "appsecret_proof=APPSECRET-PROOF" \
 -F "access_token=ACCESS-TOKEN" \
 "https://graph.facebook.com/API-VERSION/SYSTEM-USER-ID/access_tokens"
```

### Response

#### Success Response (200)

*   `access_token` (string) - The generated system user access token.

#### Response Example

```json
{
  "access_token": "CAAB3rQQzTFABANaYYCmOuLhbC]Fu8cAnmkcvT0ZBIDNm1d1fSp4Eg4XA79gmYumZCoSuiMSUILUjzG3y15BJlrYwXdqwd5c7y3lOUzu6aT7MkXL6HpISksSuLP4aFKWPmwb6iOgGeugRSn766xMZCN72vTiGGLUNqC2MKRL"
}
```

**Note:** The endpoint `/SYSTEM-USER-ID/ads_access_token` is deprecated and no longer works.
```

--------------------------------

### Advantage+ Audience Relaxed Targeting Setup Example

Source: https://developers.facebook.com/docs/marketing-api/audiences/reference/targeting-expansion/advantage-audience

This JSON illustrates a relaxed targeting setup for Advantage+ Audience. It includes custom audiences, flexible targeting for interests, specific location types, and relaxation settings, indicating a broader audience approach with enabled Advantage+ Audience.

```json
{
   "targeting":{
      "age_max":65,
      "age_min":18,
      "custom_audiences":[
         {
            "id":"<CUSTOM_AUDIENCE_ID>"
         },
         {
            "id":"<LOOKALIKE_ID>"
         }
      ],
      "flexible_spec":[
         {
            "interests":[
               {
                  "id":"<INTEREST_ID>"
               }
            ]
         }
      ],
      "geo_locations":{
         "countries":[
            "US"
         ],
         "location_types":[
            "home",
            "recent"
         ]
      },
      "targeting_relaxation_types":{
         "custom_audience":1,
         "lookalike":1
      },
      "targeting_optimization":"expansion_all"
   }
}
```

--------------------------------

### Instant Experiences Preview Dialog (JavaScript SDK)

Source: https://developers.facebook.com/docs/marketing-api/guides/instant-experiences

Use the Facebook SDK for JavaScript to display a preview of an Instant Experience within your website, mimicking how it appears on Facebook.

```APIDOC
## FB.ui({ method: 'instant_experiences_preview' })

### Description
This method uses the Facebook SDK for JavaScript to trigger a dialog that previews an Instant Experience. Users must have the necessary permissions to view the experience.

### Method
POST (simulated via FB.ui)

### Endpoint
N/A (uses FB.ui JavaScript SDK)

### Parameters
#### Query Parameters
N/A

#### Request Body
```json
{
  "display": "popup",
  "method": "instant_experiences_preview",
  "canvas_id": "CANVAS-ID"
}
```

- **display** (string) - Required - Must be set to `popup`.
- **method** (string) - Required - Must be set to `instant_experiences_preview`.
- **canvas_id** (string) - Required - The ID of the Instant Experience you want to preview.

### Request Example
```javascript
FB.ui({
  display: 'popup',
  method: 'instant_experiences_preview',
  canvas_id: 'YOUR_CANVAS_ID'
});
```

### Response
#### Success Response (200)
This method triggers a UI dialog. There is no direct JSON response for successful dialog display. A callback can be used to handle actions within the dialog if implemented.

#### Response Example
N/A (UI dialog is displayed directly)
```

--------------------------------

### Bid Setup

Source: https://developers.facebook.com/docs/marketing-api/bidding-and-optimization

Explains how to set bids in the Facebook Marketing API, considering your advertising objective and willingness to pay.

```APIDOC
## Bid Setup
When you choose your bid:
  * Bid your true value: Think about your advertising objective and bid the maximum amount you're willing to pay for that objective.
  * Decide whether you want to maximize for profit or for growth.

You can also set `objective` and `billing_event` but neither directly impact `bid_amount` or your effective bid. If a `bid_amount` is set, your actual cost per result is usually around or less than `bid_amount`, depending on your **Bid Strategies**.
For example, use these settings to spend about $10.00 for 1,000 daily unique views:
  * Campaign `objective`: `APP_INSTALLS`
  * Ad set `optimization_goal`: `REACH`
  * Ad set `billing_event`: `IMPRESSIONS`

However, to spend $10.00 **for each app install** , use these settings:
  * Campaign `objective`: `APP_INSTALLS`
  * Ad set `optimization_goal`: `APP_INSTALLS`
  * Ad set `billing_event`: `IMPRESSIONS`
```

--------------------------------

### Advantage+ Audience Default Targeting Setup Example

Source: https://developers.facebook.com/docs/marketing-api/audiences/reference/targeting-expansion/advantage-audience

This JSON object represents a default targeting setup where Advantage+ Audience is implicitly opted-in. It includes basic geo-location targeting and sets the age range to default values, suitable for scenarios where specific targeting parameters are omitted.

```json
{
   "targeting":{
      "geo_locations":{
         "countries":[
            "US"
         ]
      },
      "age_max":65,
      "age_min":18,
   }
}
```

--------------------------------

### Add Java Dependency for Conversions API Parameter Builder

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/server-side-onboarding

This example illustrates how to add the CAPI Parameter Builder Java SDK to your Gradle build file. You should replace '{current_version}' with the actual latest version of the library.

```groovy
dependencies {
    implementation 'com.facebook.capi.sdk:capi-param-builder:{current_version}'
}
```

--------------------------------

### Example Private Key Configuration for Signals Gateway

Source: https://developers.facebook.com/docs/marketing-api/gateway-products/signals-gateway/google-bigquery-connection-setup

This snippet shows the expected format for the private key when configuring the Google BigQuery connector in Signals Gateway. It is part of the service account's JSON key file.

```json
"private_key": "-----BEGIN PRIVATE KEY-----\nMIIEvW6oPzDS4T......ZAA6Hc=\n-----END PRIVATE KEY-----\n"
```

--------------------------------

### Fetch Products with Node.js SDK

Source: https://developers.facebook.com/docs/marketing-api/catalog/get-started/integrate-via-meta-sdk

This Node.js example shows how to initialize the Facebook Node.js Business SDK and fetch products from a catalog. It retrieves product names and prices, and includes logic for handling pagination by checking if there are more products and fetching the next set.

```javascript
const bizSdk = require('facebook-nodejs-business-sdk');

const access_token = '<ACCESS_TOKEN>';
const catalog_id = '<CATALOG_ID>';

const FacebookAdsApi = bizSdk.FacebookAdsApi.init(access_token)
const FacebookAdsApi = bizSdk.FacebookAdsApi.init(access_token)
const ProductCatalog = bizSdk.ProductCatalog;
const ProductItem = bizSdk.ProductItem;

const catalog = new ProductCatalog(catalog_id);
catalog.getProducts([ProductItem.Fields.name, ProductItem.Fields.price], { limit: 2 })
.then((products) => {
 console.log(products.length);
 for (const product of products) {
   console.log(product.name, product.price);
 }
 if(products.hasNext()) {
   products.next().then((products) => {
     // process products
   });
 }
})
```

--------------------------------

### Create Ad Set (Ruby SDK)

Source: https://developers.facebook.com/docs/marketing-api/adset

This example demonstrates creating an ad set with specific targeting and budget parameters using the Ruby SDK for the Facebook Marketing API.

```APIDOC
## POST /act_{AD_ACCOUNT_ID}/adsets

### Description
Creates an ad set using the Ruby SDK.

### Method
POST

### Endpoint
/act_{AD_ACCOUNT_ID}/adsets

### Parameters
#### Request Body
- **name** (string) - Required - The name of the ad set.
- **optimization_goal** (string) - Required - The optimization goal (e.g., REACH).
- **billing_event** (string) - Required - The billing event (e.g., IMPRESSIONS).
- **bid_amount** (string) - Optional - The bid amount.
- **daily_budget** (string) - Optional - The daily budget.
- **campaign_id** (string) - Required - The ID of the campaign.
- **targeting** (hash) - Required - Targeting criteria.
  - **geo_locations** (hash) - Required - Geographic targeting.
    - **countries** (array of strings) - Required - List of country codes.
  - **facebook_positions** (array of strings) - Optional - Placements within Facebook.
- **status** (string) - Required - The status of the ad set (e.g., PAUSED).
- **promoted_object** (hash) - Required - The object being promoted.
  - **page_id** (string) - Required - The ID of the page being promoted.

### Request Example
```ruby
ad_account = FacebookAds::AdAccount.get(id)
adsets = ad_account.adsets.create({
    name: 'My Reach Ad Set',
    optimization_goal: 'REACH',
    billing_event: 'IMPRESSIONS',
    bid_amount: '2',
    daily_budget: '1000',
    campaign_id: '<adCampaignLinkClicksID>',
    targeting: {'geo_locations':{'countries':['US']},'facebook_positions':['feed']},
    status: 'PAUSED',
    promoted_object: {'page_id':'<pageID>'},
})
```

### Response
#### Success Response (200)
- **id** (string) - The ID of the created ad set.

#### Response Example
```json
{
  "id": "<ad_set_id>"
}
```
```

--------------------------------

### PipelineBasicInfo Object

Source: https://developers.facebook.com/docs/marketing-api/gateway-products/gateway-control-plane-api/setup-data-pipelines/objects

Basic information about a data pipeline.

```APIDOC
## PipelineBasicInfo Object

### Description
Provides essential details about a gateway data pipeline.

### Fields

- **id** (ID) - Unique ID of the gateway data pipeline.
- **name** (String) - Name of the gateway data pipeline.
- **type** (PipelineType) - Type of the data pipeline (e.g., `GATEWAY_PIPELINE`).
```

--------------------------------

### Create Ad via iOS SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/adgroup

This iOS SDK example shows how to create an Ad using the Facebook iOS SDK (FBSDK). It involves creating a dictionary of parameters and starting a Graph API request with a completion handler.

```Objective-C
NSDictionary *params = @{
  @"name": @"My Ad",
  @"adset_id": @"<AD_SET_ID>",
  @"creative": @"{\"creative_id\":\"<CREATIVE_ID>\"}",
  @"status": @"PAUSED",
};
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/act_<AD_ACCOUNT_ID>/ads"
                                      parameters:params
                                      HTTPMethod:@"POST"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];
```

--------------------------------

### Sale Price Effective Date Formatting Example

Source: https://developers.facebook.com/docs/marketing-api/reference/product-catalog/items_batch

Shows the required format for the start and end dates and times of a sale. Dates should be in YYYY-MM-DD format, followed by 'T' and the time in 24-hour format, with the start and end separated by a '/'.

```text
2014-11-01T12:00-0300/2014-12-01T00:00-0300
```

--------------------------------

### Pseudocode for Processing HTTP Requests with Parameter Builder

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/server-side-onboarding

This pseudocode outlines the general steps for using the Parameter Builder library server-side. It involves initializing the builder with your domain(s), processing the incoming request to extract fbc and fbp, and then setting these cookies. Finally, it shows how to retrieve the fbc and fbp values separately if needed for the Conversions API call.

```php
// Pseudocode on client's server:

// Call library. Param is list of etld+1 for your websites. 
$param_builder = new ParamBuilder(arrays['example.com', 'test.com']);

// Get fbc, fbp
$cookies = $param_builder->processRequest($host, $url, $cookies);

// Save fbc and fbp provided by $cookies
set_cookie($cookies);

// Get fbc
$fbc = $param_builder->getFbc();
// Get fbp
$fbp = $param_build->getFbp();

// Call Conversion API and bypass $fbc, $fbp     
     
```

--------------------------------

### Advantage+ Creative Features - `creative_features_spec`

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

Configure various Advantage+ Creative features through the `creative_features_spec` field. Features include adding dynamic overlays, AI-generated stickers, and revealing product details over time. The `enroll_status` field is used for each feature.

```APIDOC
## PUT /adcreatives/{ad_creative_id}

### Description
Configure various Advantage+ Creative features through the `creative_features_spec` field. Features include adding dynamic overlays, AI-generated stickers, and revealing product details over time. The `enroll_status` field is used for each feature.

### Method
PUT

### Endpoint
`https://graph.facebook.com/v24.0/{ad_creative_id}`

### Parameters
#### Request Body
- **creative_features_spec** (object) - Optional - Contains specifications for creative features.
  - **add_text_overlay** (object) - Optional - Opt-in to add information from catalog items as visually-unique overlays. 
    - **enroll_status** (string) - Required - `OPT_IN` or `OPT_OUT`.
  - **creative_stickers** (object) - Optional - Opt-in to add AI-generated stickers for storytelling and CTAs.
    - **enroll_status** (string) - Required - `OPT_IN` or `OPT_OUT`.
  - **reveal_details_over_time** (object) - Optional - Opt-in to reveal information from product pages over time.
    - **enroll_status** (string) - Required - `OPT_IN` or `OPT_OUT`.

### Request Example
```json
{
  "creative_features_spec": {
    "add_text_overlay": {
      "enroll_status": "OPT_IN"
    },
    "creative_stickers": {
      "enroll_status": "OPT_IN"
    },
    "reveal_details_over_time": {
      "enroll_status": "OPT_IN"
    }
  }
}
```

### Response
#### Success Response (200)
Details of the updated ad creative, including the final `creative_features_spec`.

#### Response Example
(Example response not provided in the source text)
```

--------------------------------

### Google BigQuery Connection Setup

Source: https://developers.facebook.com/docs/marketing-api/gateway-products/signals-gateway/google-bigquery-connection-setup

This section details how to set up Google BigQuery as a data destination for Signals Gateway.

```APIDOC
## Google BigQuery Connection Setup

Google BigQuery is a fully managed, multi-engine, multi-format data analytics platform. Use this plugin to add it as a data destination for your Signals Gateway pipelines, and to access and analyze data stored in Google BigQuery.
You can set up a Google BigQuery account as a data destination for this data pipeline. Once setup is complete, your pipeline will be able to send outbound events to the selected Google BigQuery account.

### Create Table

1. Navigate to the BigQuery console in GCP.
2. Create a new dataset within your project.
3. Create a new table within the dataset.
4. Edit the table schema to include a single JSON type field called `data`.

For detailed steps, see Googles official documentation [here](https://cloud.google.com/bigquery/docs/tables-create-intro).

### Create Service Account

1. Navigate to the **Service accounts** section of the IAM Admin.
2. Follow Googles documentation to create a service account.
3. During creation ensure the service account is given permissions to write to BigQuery. See details on [Google BigQuery required permissions](https://cloud.google.com/bigquery/docs/access-control#bigquery.tables.create).
4. Create a JSON key for the service account.
5. Once created the JSON file will be automatically saved to your computer. Make sure to store this securely.

### Setup Google Bigquery destination on Signals Gateway

1. Enable the plugin.
2. Select the Google BigQuery connector during pipeline setup.
3. Configurations:
   a) Table ID: [Specify your BigQuery Table ID]
   b) **Service Account Email**: This can be found in the downloaded JSON key file - `client_email` (e.g., `bigqueryadmin@cloudbridge-devc7e720c7.iam.gserviceaccount.com`).
   c) Private Key: This can be found in the downloaded JSON key file.
     ```json
     "private_key": "-----BEGIN PRIVATE KEY-----\nMIIEvW6oPzDS4T......ZAA6Hc=\n-----END PRIVATE KEY-----"
     ```
```

--------------------------------

### POST /access_token

Source: https://developers.facebook.com/docs/marketing-api/business-manager-api/business-onboarding/obo

Step 2: Fetches the access token of a system user under the client's Business Manager. This action installs the partner's app in the client's Business Manager and creates a system user.

```APIDOC
## POST /access_token

### Description
Fetches the access token for a system user created under the client's Business Manager. This action also installs the partner's application into the client's Business Manager and creates a system user with a default name (e.g., "{Client_Business_Manager_Name} SYSTEM USER"). The system user is linked to the On Behalf Of relationship.

### Method
POST

### Endpoint
`https://graph.facebook.com/v24.0/<CLIENT_BM_ID>/access_token`

### Parameters
#### Path Parameters
- **CLIENT_BM_ID** (string) - Required - The ID of the client's Business Manager.

#### Query Parameters
- **scope** (string) - Required - A comma-separated list of permissions required for the system user (e.g., `ads_management,pages_read_engagement`).
- **app_id** (string) - Required - The ID of the partner's application.
- **access_token** (string) - Required - The `PARTNER_BM_ADMIN_SYSTEM_USER_ACCESS_TOKEN`. This token must have `business_management` permission and all permissions specified in the `scope` parameter.

### Request Example
```curl
curl -i -X POST \
 "https://graph.facebook.com/v24.0/<CLIENT_BM_ID>/access_token?scope=ads_management,pages_read_engagement&app_id=<APP_ID>&access_token=<PARTNER_BM_ADMIN_SYSTEM_USER_ACCESS_TOKEN>"
```

### Response
#### Success Response (200)
- **access_token** (string) - The access token for the newly created system user under the client's Business Manager.
- **token_type** (string) - The type of the token (e.g., 'bearer').
- **expires_in** (integer) - The expiration time of the token in seconds.

#### Response Example
```json
{
  "access_token": "<CLIENT_BM_SU_ACCESS_TOKEN>",
  "token_type": "bearer",
  "expires_in": 5183999
}
```
```

--------------------------------

### GET /<CREATIVE_ID>/previews

Source: https://developers.facebook.com/docs/marketing-api/dynamic-ads-for-travel/catalog

Generates a preview of an ad creative with specified catalog items. You can optionally include start and end dates for the preview.

```APIDOC
## GET /<CREATIVE_ID>/previews

### Description
Generates a preview of an ad creative. Allows specifying catalog items to include in the preview, and optionally date ranges.

### Method
GET

### Endpoint
`https://graph.facebook.com/v24.0/<CREATIVE_ID>/previews`

### Parameters
#### Query Parameters
- **ad_format** (string) - Required - The format of the ad (e.g., "DESKTOP_FEED_STANDARD").
- **product_item_ids** (array of strings) - Required - A list of catalog item IDs to display in the preview.
- **access_token** (string) - Required - Your Facebook API access token.
- **start_date** (string) - Optional - The start date for the preview (YYYY-MM-DD).
- **end_date** (string) - Optional - The end date for the preview (YYYY-MM-DD).

### Request Example
```json
{
  "ad_format": "DESKTOP_FEED_STANDARD",
  "product_item_ids": [
    "<PRODUCT_ITEM_ID>"
  ],
  "access_token": "<ACCESS_TOKEN>"
}
```

### Response
#### Success Response (200)
- **preview_data** (object) - Contains the generated ad preview information.

#### Response Example
```json
{
  "preview_data": {
    "url": "https://www.facebook.com/ads/preview/..."
  }
}
```
```

--------------------------------

### Conversions API - Verify Setup

Source: https://developers.facebook.com/docs/marketing-api/facebook-pixel/server-side-api

Instructions on how to verify that your events are being received by Meta and are being deduplicated and matched correctly.

```APIDOC
## Verify Your Setup

### Description
Confirm that Meta systems have successfully received your events sent via the Conversions API. This verification process ensures that events are being deduplicated and matched correctly to user profiles for accurate reporting and optimization.

### Method
GET

### Endpoint
/vX.X/verification

### Parameters
#### Query Parameters
- **test_event_code** (string) - Required - A unique code generated for test events.

#### Request Body
None

### Request Example
None

### Response
#### Success Response (200)
- **status** (string) - The verification status (e.g., 'RECEIVED', 'MATCHED').
- **details** (object) - Additional details about the verification.

#### Response Example
```json
{
  "status": "MATCHED",
  "details": {
    "message": "Test events are being received and matched."
  }
}
```
```

--------------------------------

### Read Custom Conversions - cURL Example

Source: https://developers.facebook.com/docs/marketing-api/reference/custom-conversion

This example shows how to retrieve a list of custom conversions for a specific ad account using cURL. It utilizes the GET method with parameters for desired fields (pixel, rule, custom_event_type), the access token, and the API endpoint.

```shell
curl -G \
-d 'fields=["pixel","rule","custom_event_type"]' \
-d "access_token=<ACCESS_TOKEN>" \
https://graph.facebook.com/<API_VERSION>/act_<AD_ACCOUNT_ID>/customconversions
```

--------------------------------

### Get Delivery Estimate - Android SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-campaign/delivery_estimate

Requests delivery estimates for an ad set via the Facebook Android SDK. This example utilizes `GraphRequest` to make a GET request and defines a `Callback` interface to handle the asynchronous response. The `onCompleted` method is where the API result is processed.

```java
/* make the API call */
new GraphRequest(
    AccessToken.getCurrentAccessToken(),
    "/{ad-set-id}/delivery_estimate",
    null,
    HttpMethod.GET,
    new GraphRequest.Callback() {
        public void onCompleted(GraphResponse response) {
            /* handle the result */
        }
    }
).executeAsync();
```

--------------------------------

### Reach Estimate Response Example

Source: https://developers.facebook.com/docs/marketing-api/lookalike-audience-targeting

An example of a response from the Facebook Marketing API's reach estimate endpoint. It shows a 'users' value of -1, indicating that the estimate is not yet ready, and provides a 'targeting_status' detailing a specific issue with the lookalike container setup.

```json
{
    "users": -1,
    "estimate_ready": true,
    "targeting_status": "lookalike_container_without_delivery_lookalike"
}
```

--------------------------------

### System Users API

Source: https://developers.facebook.com/docs/marketing-api/business-manager/guides

Learn about system users. Create, retrieve and update a system user, manage system users permissions, and make API calls using system users. Also learn how to Install Apps and Generate Tokens.

```APIDOC
## System Users API

### Description
Manages system users within a Business Manager account, including creation, retrieval, updates, permissions, and token generation.

### Method
N/A

### Endpoint
N/A

### Parameters
None

### Request Example
None

### Response
None
```

--------------------------------

### Pass fbc/fbp to Conversions API (Python)

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/server-side-onboarding

This Python example shows the instantiation of ParamBuilder, processing the request with host, query parameters, and cookies, and then retrieving fbc and fbp values using their respective getter methods.

```python
fbcBuilder = ParamBuilder(["example.com", "your-domain.com"])
       # host: str, queries: dict[str, str], cookies: dict[str, str]
       updated_cookies = fbcBuilder.process_request(
           domain_only, query_params, cookie_dict
       )
       # after process_request got called, you could call get_fbc() and get_fbp() to get the actual value for fbc and fbp
       fbc = fbcBuilder.get_fbc()


       fbp = fbcBuilder.get_fbp()
        
# Pass the fbc and fbp to the Conversions API

```

--------------------------------

### Adding Catalog Items to Ads via API

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

This JSON configuration enables the `product_extensions` feature. By setting `product_extensions.enroll_status` to `OPT_IN`, items from your product catalog can be displayed alongside your selected ad media when it is likely to improve performance.

```JSON
{
    "creative_features_spec": {
        "product_extensions": {
            "enroll_status": "OPT_IN"
        }
    }
}
```

--------------------------------

### Create App Installs Campaign - PHP SDK

Source: https://developers.facebook.com/docs/marketing-api/mobile-app-ads

This PHP script uses the Facebook Ads SDK to programmatically create an app install campaign. It initializes the API with credentials and then constructs the campaign details, including name, objective, and status.

```php
require __DIR__ . '/vendor/autoload.php';

use FacebookAds\Object\AdAccount;
use FacebookAds\Object\Campaign;
use FacebookAds\Api;
use FacebookAds\Logger\CurlLogger;

$access_token = '<ACCESS_TOKEN>';
$app_secret = '<APP_SECRET>';
$app_id = '<APP_ID>';
$id = '<AD_ACCOUNT_ID>';

$api = Api::init($app_id, $app_secret, $access_token);
$api->setLogger(new CurlLogger());

$fields = array(
);
$params = array(
  'name' => 'App Installs Campaign with Dynamic Product Ads',
  'objective' => 'OUTCOME_APP_PROMOTION',
  'status' => 'PAUSED',
  'special_ad_categories' => array(),
);
echo json_encode((new AdAccount($id))->createCampaign(
  $fields,
  $params
)->exportAllData(), JSON_PRETTY_PRINT);
```

--------------------------------

### Get FBP API

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/server-side-onboarding

Retrieves the Facebook Page ID (_fbp) after the processRequest API has been called.

```APIDOC
## GET /getFbp

### Description
You will need to call `processRequest` above first in order to get the accurate `_fbp`.

### Method
GET

### Endpoint
/getFbp

### Parameters
#### Path Parameters
None

#### Query Parameters
None

#### Request Body
None

### Request Example
```json
{
  "message": "GET request to /getFbp"
}
```

### Response
#### Success Response (200)
- **String** - The Facebook Page ID (`_fbp`).

#### Response Example
```json
{
  "fbp": "fb.1.1678886400123.zyxwvu987"
}
```
```

--------------------------------

### Reading Business Clients - iOS SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/business/clients

Example for iOS using the Graph API. This demonstrates making a GET request to the /clients endpoint and handling the results or errors in the completion handler.

```objective-c
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/{business-id}/clients"
                                      parameters:params
                                      HTTPMethod:@"GET"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];

```

--------------------------------

### Create Empty Custom Audience with Python SDK

Source: https://developers.facebook.com/docs/marketing-api/custom-audience-api

This Python example shows how to create an empty custom audience using the Facebook Business SDK. It requires your access token, app secret, app ID, and ad account ID. Ensure the SDK is installed (`pip install facebook_business`).

```python
from facebook_business.adobjects.adaccount import AdAccount
from facebook_business.adobjects.customaudience import CustomAudience
from facebook_business.api import FacebookAdsApi

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_ACCOUNT_ID>'
FacebookAdsApi.init(access_token=access_token)

fields = [
]
params = {
  'name': 'My new Custom Audience',
  'subtype': 'CUSTOM',
  'description': 'People who purchased on my website',
  'customer_file_source': 'USER_PROVIDED_ONLY',
}
print AdAccount(id).create_custom_audience(
  fields=fields,
  params=params,
)
```

--------------------------------

### Get FBC API

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/server-side-onboarding

Retrieves the Facebook Click ID (_fbc) after the processRequest API has been called.

```APIDOC
## GET /getFbc

### Description
You will need to call `processRequest` above first in order to get the accurate `_fbc`.

### Method
GET

### Endpoint
/getFbc

### Parameters
#### Path Parameters
None

#### Query Parameters
None

#### Request Body
None

### Request Example
```json
{
  "message": "GET request to /getFbc"
}
```

### Response
#### Success Response (200)
- **String** - The Facebook Click ID (`_fbc`).

#### Response Example
```json
{
  "fbc": "fb.1.1678886400123.abcdef123"
}
```
```

--------------------------------

### Adjusting Image Brightness and Contrast via API

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

This snippet shows how to opt-in to automatic adjustments for image brightness and contrast. The `image_brightness_and_contrast.enroll_status` is set to `OPT_IN` to allow the API to modify these settings when it is likely to enhance ad performance.

```JSON
{
    "creative_features_spec": {
        "image_brightness_and_contrast": {
            "enroll_status": "OPT_IN"
        }
    }
}
```

--------------------------------

### Process Request API

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/server-side-onboarding

The core API to process fbc and fbp. It takes host, query parameters, and cookies as input and returns a list of CookieSettings to manage user cookies.

```APIDOC
## POST /processRequest

### Description
This is the core API to process fbc and fbp. In most cases, processRequest API will need 3 params.

### Method
POST

### Endpoint
/processRequest

### Parameters
#### Path Parameters
None

#### Query Parameters
None

#### Request Body
- **host** (String) - Required - The host or domain this request is coming from.
- **query_params** (Map<String, String>) - Required - URL query parameters in Map format. Example: `{"test":"123", "name":"hello"}` for `Example.com?test=123&name=hello`.
- **cookies** (Map<String, String>) - Required - Current cookies in Map format. Example: `{"my_cookie1":"test", "_fbc":"xxxxx"}`.

### Request Example
```json
{
  "host": "example.com",
  "query_params": {
    "test": "123",
    "name": "hello"
  },
  "cookies": {
    "my_cookie1": "test",
    "_fbc": "xxxxx"
  }
}
```

### Response
#### Success Response (200)
- **List<CookieSetting>** - A list of CookieSetting objects. You could set your user cookies based on the returned value.

`CookieSetting` model:
- **name** (String) - The name of the cookie.
- **value** (String) - The value of the cookie.
- **domain** (String) - The domain for the cookie.
- **maxAge** (int) - The maximum age of the cookie in seconds.

#### Response Example
```json
[
  {
    "name": "_fbc",
    "value": "fb.1.1678886400123.abcdef123",
    "domain": "example.com",
    "maxAge": 31536000
  }
]
```
```

--------------------------------

### Guides for Real Estate Ads Use Cases

Source: https://developers.facebook.com/docs/marketing-api/dynamic-ads-for-real-estate

Explore use-case specific guides to perform particular actions with Real Estate Ads.

```APIDOC
## Real Estate Ads Guides

### Description
This section provides access to various use-case based guides designed to assist you in performing specific actions when utilizing Facebook's Real Estate Ads.

### Available Guides
- Guides for creating and managing real estate listings.
- Guides for optimizing ad creative for properties.
- Guides for targeting specific audience segments interested in real estate.
- Guides for integrating with Facebook Marketplace.
```

--------------------------------

### Conversions API Guides - Conversions API as a Platform

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/guides/gateway/troubleshooting

Information on leveraging the Conversions API as a platform for event tracking.

```APIDOC
## Conversions API Guides - Conversions API as a Platform

### Description
This guide explores how to utilize the Conversions API as a foundational platform for managing and reporting on conversion events across various touchpoints.

### Method
N/A

### Endpoint
N/A

### Parameters
N/A

### Request Example
N/A

### Response
N/A
```

--------------------------------

### Facebook Feed Adjacent Content Delivery Report GET Request

Source: https://developers.facebook.com/docs/marketing-api/brand-safety-and-suitability/feed-verification

Example GET request to retrieve the adjacent content delivery report for Facebook feed placements. It specifies platform, position, datetime, desired summary fields, and a limit.

```http
GET /{ad_set_id}/adjacent_content_delivery_report
?platform=facebook
&position=feed
&datetime=2024-02-31T23:00
&summary=total_count,earliest_datetime,latest_datetime
&limit=1
```

--------------------------------

### Filter Product Catalog with cURL

Source: https://developers.facebook.com/docs/marketing-api/real-estate-ads/get-started

This cURL command demonstrates how to filter a product catalog to create a listing set for Advantage+ catalog ads. It utilizes various operators and data fields to define the filtering criteria, such as availability and price.

```bash
curl \
  -F "name=test set" \
  -F 'filter={"availability":{"eq":"for_sale"}}' \
  -F "access_token=" \
  https://graph.facebook.com/<API_VERSION>/<CATALOG_ID>/product_sets
```

--------------------------------

### Create App Installs Campaign - Ruby SDK

Source: https://developers.facebook.com/docs/marketing-api/mobile-app-ads

This Ruby script uses the Facebook Ads gem to create an app install campaign. It configures the SDK with access token and app secret, then retrieves the ad account and creates a new campaign with specified parameters.

```ruby
require 'facebook_ads'

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_ACCOUNT_ID>'

FacebookAds.configure do |config|
  config.access_token = access_token
  config.app_secret = app_secret
end

ad_account = FacebookAds::AdAccount.get(id)
campaigns = ad_account.campaigns.create({
    name: 'App Installs Campaign with Dynamic Product Ads',
    objective: 'OUTCOME_APP_PROMOTION',
    status: 'PAUSED',
    special_ad_categories: [],
})
```

--------------------------------

### Java Code Example (Synchronous)

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/using-the-api

Illustrates a synchronous event execution using the Conversions API Gateway in Java.

```APIDOC
## Java Code Example (Synchronous)

### Description
Shows how to send events synchronously to the Conversions API Gateway using the Java Business SDK.

### Request Example
```java
EventRequest eventRequest = new EventRequest(PIXEL_ID, context);
UserData userData = new UserData()
       .email("abc@eg.com");
CAPIGatewayIngressRequest capiSyncRequest = new CAPIGatewayIngressRequest(CB_URL, CAPIG_ACCESS_KEY);
eventRequest.setCustomEndpoint(capiSyncRequest);
Event testEvent = new Event();
testEvent.eventId("125").eventName("Purchase")
       .eventTime(System.currentTimeMillis() / 1000L)
       .userData(userData)
       .dataProcessingOptions(new String[]{}).setEventId("134423232");
eventRequest.namespaceId("11")
       .uploadId("22222")
       .uploadTag("upload-tag-4")
       .uploadSource("upload-source-4")
       .testEventCode("test-event-code-5")
       .partnerAgent("partner-agent-6");
eventRequest.addDataItem(testEvent);
eventRequest.execute();
```

### Response
#### Success Response (200)
- **response** (void) - This method executes the request and does not return a value.
```

--------------------------------

### Create Gateway Data Pipeline - Sample Response (JSON)

Source: https://developers.facebook.com/docs/marketing-api/gateway-products/gateway-control-plane-api/setup-data-pipelines/data-pipelines

Example JSON response upon successfully creating a gateway data pipeline. It details the `id`, `name`, `active` status, and empty arrays for `dataSources` and `dataDestinations` if not specified during creation. Also includes `dataFilter` and `pipelineDestinationFilters` configurations.

```json
{
    "data": {
        "tenantMutations": {
            "dataPipelineMutations": {
                "createPipeline": {
                    "id": "sg_v1_pl_c280b69f-7a8f-486b-a5d0-1018d9bf41bc",
                    "name": "Pipeline C7P2ZR",
                    "active": true,
                    "dataSources": [],
                    "dataDestinations": [],
                    "dataFilter": {
          "filterStatus": false,
          "blockedEventTypes": []
        },
        "pipelineDestinationFilters": []
                }
            }
        }
    }
}
```

--------------------------------

### Add Client-Side Meta Library as Dependency

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/client-side-onboarding

Includes the Meta Conversions API Parameter Builder JavaScript library into your webpage by adding a script tag to the HTML. This makes the functionality available for use in your client-side code.

```html
<script src="https://capi-automation.s3.us-east-2.amazonaws.com/public/client_js/capiParamBuilder/clientParamBuilder.bundle.js"></script>
```

```html
<script src="https://capi-automation.s3.us-east-2.amazonaws.com/public/client_js/clientParamsHelper/clientParamsHelper.bundle.js" ></script>
```

--------------------------------

### Example Catalog Field Definition (JSON Schema)

Source: https://developers.facebook.com/docs/marketing-api/catalog/reference

This snippet illustrates the structure of a single field within the Meta catalog JSON schema. It shows essential properties like description, example value, data type, and requirement status, guiding developers on how to define and use catalog fields.

```json
{
          "item_group_id": {
            "description": "Use this field to create variants of the same item. Enter the same group ID for all variants within a group. Learn more about variants: https:\/\/www.facebook.com\/business\/help\/2256580051262113 Character limit: 100.",
            "example": "K456653443",
            "type": "String",
            "required": false,
            "recommended": false
          }
        }
```

--------------------------------

### Data Pipelines API

Source: https://developers.facebook.com/docs/marketing-api/gateway-products/gateway-control-plane-api/setup-data-pipelines

APIs for managing data pipelines, including creation, connection, retrieval, update, deletion, and filter configuration.

```APIDOC
## Data Pipelines API

### Description
APIs for managing data pipelines, which are used to process and route event data. This includes creating, connecting Meta Pixels, retrieving, updating, deleting pipelines, and configuring filters.

### Endpoints

#### Create Gateway Data Pipeline
- **Method**: POST
- **Endpoint**: `/data-pipelines`

#### Connect Meta Pixel
- **Method**: POST
- **Endpoint**: `/data-pipelines/{pipelineId}/connect-pixel`
  - **Request Body**:
    - **pixelId** (string) - Required - The ID of the Meta Pixel to connect.

#### Get Data Pipeline
- **Method**: GET
- **Endpoint**: `/data-pipelines/{pipelineId}`

#### Update Pipeline
- **Method**: PUT
- **Endpoint**: `/data-pipelines/{pipelineId}`

#### Delete Pipeline
- **Method**: DELETE
- **Endpoint**: `/data-pipelines/{pipelineId}`

#### Update Pipeline Filter
- **Method**: PUT
- **Endpoint**: `/data-pipelines/{pipelineId}/filter`
  - **Request Body**:
    - **filterRules** (object) - Required - The rules for filtering pipeline data.

#### Update Pipeline Destination Filter
- **Method**: PUT
- **Endpoint**: `/data-pipelines/{pipelineId}/destination-filter`
  - **Request Body**:
    - **filterRules** (object) - Required - The rules for filtering data sent to the destination.
```

--------------------------------

### Create Ad Set

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-campaign

This section provides examples for creating a new ad set with various SDKs and cURL, specifying details like name, budget, targeting, and optimization goals.

```APIDOC
## POST /act_<AD_ACCOUNT_ID>/adsets

### Description
Creates a new ad set with specified parameters such as name, budget, optimization goal, and targeting.

### Method
POST

### Endpoint
`https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets`

### Parameters
#### Path Parameters
- **AD_ACCOUNT_ID** (string) - Required - The ID of the ad account.

#### Query Parameters
- **access_token** (string) - Required - Your Facebook API access token.

#### Request Body
- **name** (string) - Required - The name of the ad set.
- **optimization_goal** (string) - Required - The goal for optimization (e.g., "REACH").
- **billing_event** (string) - Required - The billing event (e.g., "IMPRESSIONS").
- **bid_amount** (integer) - Optional - The bid amount.
- **daily_budget** (integer) - Optional - The daily budget for the ad set.
- **campaign_id** (string) - Required - The ID of the campaign this ad set belongs to.
- **targeting** (object) - Required - Targeting specifications for the ad set.
  - **geo_locations** (object) - Specifies geographical targeting.
    - **countries** (array of strings) - List of country codes.
  - **facebook_positions** (array of strings) - Specifies placements on Facebook.
- **status** (string) - Optional - The status of the ad set (e.g., "PAUSED").
- **promoted_object** (object) - Required - The object being promoted.
  - **page_id** (string) - The ID of the Facebook Page.

### Request Example (cURL)
```bash
curl -X POST \
  -F 'name="My Reach Ad Set"' \
  -F 'optimization_goal="REACH"' \
  -F 'billing_event="IMPRESSIONS"' \
  -F 'bid_amount=2' \
  -F 'daily_budget=1000' \
  -F 'campaign_id="<AD_CAMPAIGN_ID>"' \
  -F 'targeting={"geo_locations": {"countries": ["US"]}, "facebook_positions": ["feed"]}' \
  -F 'status="PAUSED"' \
  -F 'promoted_object={"page_id": "<PAGE_ID>"}' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets
```

### Request Example (Node.js SDK)
```javascript
// ... SDK initialization code ...

let fields, params;
fields = [];
params = {
  'name' : 'My Reach Ad Set',
  'optimization_goal' : 'REACH',
  'billing_event' : 'IMPRESSIONS',
  'bid_amount' : '2',
  'daily_budget' : '1000',
  'campaign_id' : '<adCampaignLinkClicksID>',
  'targeting' : {'geo_locations':{'countries':['US']},'facebook_positions':['feed']},
  'status' : 'PAUSED',
  'promoted_object' : {'page_id':'<pageID>'},
};
const adsets = (new AdAccount(id)).createAdSet(fields, params);
// ... logApiCallResult ...
```

### Request Example (PHP SDK)
```php
// ... SDK initialization code ...

$fields = array();
$params = array(
  'name' => 'My Reach Ad Set',
  'optimization_goal' => 'REACH',
  'billing_event' => 'IMPRESSIONS',
  'bid_amount' => '2',
  'daily_budget' => '1000',
  'campaign_id' => '<adCampaignLinkClicksID>',
  'targeting' => array('geo_locations' => array('countries' => array('US')),'facebook_positions' => array('feed')),
  'status' => 'PAUSED',
  'promoted_object' => array('page_id' => '<pageID>'),
);
echo json_encode((new AdAccount($id))->createAdSet($fields, $params)->exportAllData(), JSON_PRETTY_PRINT);
```

### Response
#### Success Response (200)
- **id** (string) - The unique identifier of the newly created ad set.
- **name** (string) - The name of the ad set.

#### Response Example
```json
{
  "id": "<AD_SET_ID>",
  "name": "My Reach Ad Set"
}
```
```

--------------------------------

### Read System User - HTTP Request

Source: https://developers.facebook.com/docs/marketing-api/reference/system-user

Example of how to read system user information using an HTTP GET request. This is a direct API call.

```http
GET /v24.0/{system-user-id} HTTP/1.1
Host: graph.facebook.com
```

--------------------------------

### Managed Partner Ads Integration Guide

Source: https://developers.facebook.com/docs/marketing-api/collaborative-ads/managed-partner-ads

Steps to integrate with the Managed Partner Ads API, including preparation, integration, and launch phases.

```APIDOC
## Get Started

There are three main steps to start the integration process for Managed Partner Ads:
  1. Preparation - ensure you meet all the minimum requirements to be eligible for Managed Partner Ads
  2. Integration - start building the integration for your sellers using our APIs
  3. Launch - communicate and launch this service to your sellers

To understand these steps in more detail, please review the Integration Section of the Managed Partner Ads developer documentation to start the integration process.
```

--------------------------------

### Conversions API End-to-End Implementation

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/guides/end-to-end-implementation

This section outlines the process of integrating with the Conversions API, covering preparation, direct integration, and integration as a platform.

```APIDOC
## Conversions API End-to-End Implementation

The Conversions API supports advertisers efforts to provide consumers with appropriate data transparency and control while also helping them to continue providing personal experiences. With the API, you can share data directly from your server, rather than through a browser.

### Benefits of Integration
  * **Deeper-Funnel Visibility** : The Conversions API allows you to share a wider array of data when compared to the Meta Pixel. With the API, you can make decisions taking into account more information, such as CRM data, lower funnel events (including qualified leads), and multi-site conversion paths across a website and a physical location.
  * **Data Control** : When used via a Server-Only implementation (for example, without the Meta Pixel), the Conversions API gives you added control over what data you share. You can choose to append insights to your events, providing data such as product margins or historical information, like customer value scores.
  * **Signal Reliability and Resiliency** : Data sharing through the Conversions API may be more reliable than browser-based methods alone, like the Meta Pixel. The API is designed to be less susceptible to issues like a browser crash or connectivity problems. New industry data transmission restrictions may limit the efficacy of cookies and Pixel tracking, so the Conversions API helps you have control on sharing signals that may no longer be captured by the Pixel.

### Overview
You can think about your Conversions API integration in two main stages:
  * **Preparation**  Select which type of integration makes sense for you, define which events to send, and review available optimization options.
  * **Execution**  Learn how to implement the API. For this stage, you can also use a partner integration.

### Direct Integration
  * **Step 1: Set Up Requirements** - Ensure your business assets (Meta Pixel, Meta Application, Business Manager, Server Connection, System User) are properly set up.
  * **Step 2: Implement the API** - Send events manually or automated using the system user's token. This step confirms authentication setup.
  * **Step 3: Add Parameters for Deduplication** - Implement parameters to ensure events are not double-counted and are sent in near real-time.
  * **Optional Step 4: Explore Business SDK Features** - Utilize SDK features for advanced capabilities.

### Integration as a Platform
  * **Step 1: Set Up Requirements** - Configure necessary business assets.
  * **Step 2: Send Events on Behalf of Clients** - Implement functionality to send events for your clients.
  * **Step 3: Attribute Events to Your Platform** - Ensure events are correctly attributed to your platform.

### Considerations for Existing Pixel Users
If you have an existing Meta Pixel integration, the Conversions API integration should be built as an extension of the Pixel integration, instead of as an entirely different connection.

### General Consent
If you have logic for controlling consent with respect to sharing Pixel data, use the same logic with respect to sharing data via Conversions API.
```

--------------------------------

### Read Business Initiated Audience Sharing Requests (iOS SDK)

Source: https://developers.facebook.com/docs/marketing-api/reference/business/initiated_audience_sharing_requests

This iOS SDK example shows how to get business-initiated audience sharing requests. It usesFBSDKGraphRequest to construct and execute a GET request, with a completion handler to process the results or any errors.

```objectivec
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/{business-id}/initiated_audience_sharing_requests"
                                      parameters:params
                                      HTTPMethod:@"GET"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];
```

--------------------------------

### Ad Set Scheduling Example

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-campaign

Defines the ad set schedule for a single day, including start and end minutes, active days, and timezone type. This is crucial for controlling when ads are shown.

```json
{
  "adset_schedule": [
    {
      "start_minute": 480, 
      "end_minute": 1020, 
      "days": [1, 2, 3, 4, 5], 
      "timezone_type": "USER"
    }
  ]
}
```

--------------------------------

### Pass fbc/fbp to Conversions API (Node.js)

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/server-side-onboarding

This Node.js example demonstrates initializing the ParamBuilder, parsing request cookies, processing the request, and extracting fbc and fbq (likely a typo, should be fbp) values to send to the Conversions API.

```javascript
// Get builder 
const builder = new ParamBuilder(["example.com", "your-domain.com"]);

// Get cookies from request
const requestCookies = parseCookie(req.headers.cookie);
builder.processRequest(
    req.headers.host, // host
    params, // query params
    requestCookies // current cookie
  );

fbc = builder.getCookiesToSet().getFbc();
fbq = builder.getCookiesToSet().getFbq();

// Pass the fbc and fbp to the Conversions API

```

--------------------------------

### Read Ad Account Minimum Budgets (iOS SDK)

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-account/minimum_budgets

This iOS SDK example shows how to get ad account minimum budgets. It uses theFBSDKGraphRequest class to make a GET request and handles the response or errors within a completion handler.

```objective-c
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/{ad-account-id}/minimum_budgets"
                                      parameters:params
                                      HTTPMethod:@"GET"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];
```

--------------------------------

### cURL for Direct Product Feed Upload

Source: https://developers.facebook.com/docs/marketing-api/real-estate-ads/get-started

This cURL command shows how to manually perform a one-time upload of a product feed to the Facebook Graph API. It requires the feed URL, an access token, and the product feed ID.

```bash
curl \
  -F "url=http://www.example.com/sample_feed.xml" \
  -F "access_token=<ACCESS_TOKEN>" \
  https://graph.facebook.com/<API_VERSION>/<PRODUCT_FEED_ID>/uploads
```

--------------------------------

### Send Events via Conversions API Gateway in Java

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/using-the-api

Illustrates how to configure and execute an event request using CAPIGatewayIngressRequest in Java. This example shows user data creation, event setup, and sending the request. Requires the Meta Business SDK for Java.

```java
EventRequest eventRequest = new EventRequest(PIXEL_ID, context);
UserData userData = new UserData()
       .email("abc@eg.com");
CAPIGatewayIngressRequest capiSyncRequest = new CAPIGatewayIngressRequest(CB_URL, CAPIG_ACCESS_KEY);
eventRequest.setCustomEndpoint(capiSyncRequest);
Event testEvent = new Event();
testEvent.eventId("125").eventName("Purchase")
       .eventTime(System.currentTimeMillis() / 1000L)
       .userData(userData)
       .dataProcessingOptions(new String[]{}).setEventId("134423232");
eventRequest.namespaceId("11")
       .uploadId("22222")
       .uploadTag("upload-tag-4")
       .uploadSource("upload-source-4")
       .testEventCode("test-event-code-5")
       .partnerAgent("partner-agent-6");
eventRequest.addDataItem(testEvent);
eventRequest.execute();
```

--------------------------------

### Locales API

Source: https://developers.facebook.com/docs/marketing-api/audiences/reference/targeting-search

Allows searching for targetable locales by locale codes. Provides an example for searching all locales starting with 'en'.

```APIDOC
## Locales API

### Description
Allows searching for targetable locales by locale codes. Provides an example for searching all locales starting with 'en'.

### Method
GET

### Endpoint
`https://graph.facebook.com/v<API_VERSION>/search`

### Query Parameters
- **`type`** (string) - Required - Set to `adlocale`.
- **`q`** (string) - String to autocomplete values. To get all locales, leave this blank (`q=`), and set the limit to a large number (`limit=1000`). Example: `en`.
- **`access_token`** (string) - Required - Your Facebook API access token.

### Request Example
```json
{
  "url": "curl -G \
  -d 'type=adlocale' \
  -d 'q=en' \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v<API_VERSION>/search"
}
```

### Response
#### Success Response (200)
- **`data`** (array) - Contains a list of matching locale objects.
  - **`key`** (integer) - The unique identifier for the locale.
  - **`name`** (string) - The name of the locale (e.g., "English (US)").

#### Response Example
```json
{
  "data": [
    {
      "key": 51,
      "name": "English (Upside Down)"
    },
    {
      "key": 6,
      "name": "English (US)"
    },
    {
      "key": 24,
      "name": "English (UK)"
    }
  ]
}
```
```

--------------------------------

### Pixel Management API

Source: https://developers.facebook.com/docs/marketing-api/gateway-products/gateway-control-plane-api/setup-data-pipelines

APIs for managing Meta Pixel connections and event settings.

```APIDOC
## Pixel Management API

### Description
APIs for managing Meta Pixel connections, including creation, deletion, activation/deactivation of event receiving and publishing, and website blocking.

### Endpoints

#### Create Pixel Connection
- **Method**: POST
- **Endpoint**: `/pixels/connections`

#### Delete Pixel Connection
- **Method**: DELETE
- **Endpoint**: `/pixels/connections/{connectionId}`

#### Get List of Meta Pixel Connections
- **Method**: GET
- **Endpoint**: `/pixels/connections`

#### Activate / Deactivate Gateway from receiving Pixel events
- **Method**: PUT
- **Endpoint**: `/pixels/connections/{connectionId}/receive-events`
  - **Request Body**:
    - **enabled** (boolean) - Required - Whether to enable or disable receiving events.

#### Activate / Deactivate Pixel event publishing status
- **Method**: PUT
- **Endpoint**: `/pixels/connections/{connectionId}/publish-events`
  - **Request Body**:
    - **enabled** (boolean) - Required - Whether to enable or disable event publishing.

#### Activate / Deactivate Pixel event publishing status by event name
- **Method**: PUT
- **Endpoint**: `/pixels/connections/{connectionId}/publish-events/{eventName}`
  - **Request Body**:
    - **enabled** (boolean) - Required - Whether to enable or disable publishing for the specific event.

#### Block / Unblock websites permitted to receive and publish events
- **Method**: PUT
- **Endpoint**: `/pixels/connections/{connectionId}/websites`
  - **Request Body**:
    - **websiteUrl** (string) - Required - The URL of the website to block or unblock.
    - **action** (string) - Required - The action to perform, either 'block' or 'unblock'.
```

--------------------------------

### Upload Chunked Videos - Start

Source: https://developers.facebook.com/docs/marketing-api/business-creative-asset-management/get-started

Initiates a video upload session by sending a 'start' request with file details. This is the first step in uploading a large video file.

```APIDOC
## POST /<BUSINESS_ID>/videos (Upload Start)

### Description
Initiates a video upload session for large video files. Requires `upload_phase` set to 'start', `file_size`, and other relevant parameters.

### Method
POST

### Endpoint
`https://graph-video.facebook.com/<API_VERSION>/<BUSINESS_ID>/videos`

### Parameters
#### Query Parameters
- **access_token** (string) - Required - Your Facebook API access token.
- **upload_phase** (string) - Required - Must be set to 'start'.
- **file_size** (integer) - Required - The total size of the video file in bytes.

#### Request Body
- **title** (string) - Required - The name of the video.
- **creative_folder_id** (string) - Optional - The ID of the creative folder to store the video.

### Request Example
```json
{
  "title": "{video-name}",
  "creative_folder_id": "{business-creative-folder-id}",
  "access_token": "{access-token}",
  "upload_phase": "start",
  "file_size": "{video_file_size_in_bytes}"
}
```

### Response
#### Success Response (200)
- **upload_session_id** (string) - The ID of the created upload session.
- **business_video_id** (string) - The ID of the business video object.
- **video_id** (string) - The ID of the video.
- **start_offset** (string) - The starting byte position for the first chunk.
- **end_offset** (string) - The ending byte position for the first chunk.

#### Response Example
```json
{
  "upload_session_id": "{session-id}",
  "business_video_id": "{business-video-id}",
  "video_id": "{video-id}",
  "start_offset": "0",
  "end_offset": "52428800"
}
```
```

--------------------------------

### Retrieve Installed Apps on Facebook Page via API (cURL)

Source: https://developers.facebook.com/docs/marketing-api/guides/lead-ads/quickstart/webhooks-integration

This snippet shows how to retrieve a list of applications installed on a Facebook Page using a cURL command. It requires a Page access token and the Page ID. The API call makes a GET request to the '{page-id}/subscribed_apps' endpoint.

```curl
curl -i -X GET "https://graph.facebook.com/{page-id}/subscribed_apps
  ?access_token={page-access-token}"
```

--------------------------------

### Retrieve Custom Audiences (Java SDK)

Source: https://developers.facebook.com/docs/marketing-api/dynamic-product-ads/product-audiences

Example for retrieving Custom Audiences using the Facebook Java SDK. This demonstrates the setup and execution of the API call.

```APIDOC
## GET /customaudiences (Java SDK)

### Description
Provides an example of using the Facebook Java SDK to fetch Custom Audiences. Includes API context setup and making the request.

### Method
GET (via SDK)

### Endpoint
(Internal SDK method that maps to the Graph API endpoint)

### Parameters
#### Path Parameters
- **id** (string) - Required - The Ad Account ID.

### Request Example
```java
import com.facebook.ads.sdk.*;
import java.io.File;
import java.util.Arrays;

public class SAMPLE_CODE_EXAMPLE {
  public static void main (String args[]) throws APIException {

    String access_token = "<ACCESS_TOKEN>";
    String app_secret = "<APP_SECRET>";
    String app_id = "<APP_ID>";
    String id = "<AD_ACCOUNT_ID>";
    APIContext context = new APIContext(access_token).enableDebug(true);

    new AdAccount(id, context).getCustomAudiences()
      .requestField("data_source")
      .requestField("subtype")
      .execute();

  }
}
```

### Response
#### Success Response (200)
- The `execute()` method returns a `APINodeList` object containing the Custom Audiences.

#### Response Example
(The SDK handles parsing; the actual response structure will mirror the Graph API JSON response.)
```

--------------------------------

### Rich Text Description Formatting Example (HTML)

Source: https://developers.facebook.com/docs/marketing-api/reference/product-catalog/items_batch

Illustrates how to format a product description using HTML for rich text display. Supports various tags for text formatting, lists, and tables. Ensure to provide a plain text 'description' as a backup.

```html
<html>
<p>A comfortable royal blue women's T-shirt in organic cotton. Cap sleeves and relaxed fit. Perfect for warm summer days. Features graphic print of logo in white on upper left sleeve.</p>
<ul>
<li>100% organic cotton</li>
<li>Machine wash, tumble dry low</li>
</ul>
</html>
```

--------------------------------

### Opt-in for Advantage+ Catalog Ads

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

This JSON snippet demonstrates how to set the `enroll_status` field to `OPT_IN` for Advantage+ catalog ads, enabling AI to identify product names and selling points for ad footers.

```json
{
  "text_extraction": {
    "enroll_status": "OPT_IN"
  }
}
```

--------------------------------

### Ruby EtldPlusOneResolver Implementation

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/server-side-onboarding

This Ruby code demonstrates a default implementation of the EtldPlusOneResolver, similar to the Python version. It inherits from the EtldPlusOneResolver class and the resolve method is implemented to return the provided host_name. Developers can modify this for custom logic.

```ruby
require 'capi_param_builder/etld_plus_one_resolver'

class DefaultEtldPlusOneResolver < EtldPlusOneResolver
   def resolve(host_name)
        # Your implementation
        return host_name
   
   end

end
```

--------------------------------

### Read Adgroup Issues Info - Android SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/adgroup-issues-info

This example illustrates how to get adgroup issues information using the Facebook Android SDK. It utilizes the GraphRequest class to make a GET request and defines a callback to handle the results or any errors encountered during the API call.

```Java
/* make the API call */
new GraphRequest(
    AccessToken.getCurrentAccessToken(),
    "...?fields={fieldname_of_type_AdgroupIssuesInfo}",
    null,
    HttpMethod.GET,
    new GraphRequest.Callback() {
        public void onCompleted(GraphResponse response) {
            /* handle the result */
        }
    }
).executeAsync();
```

--------------------------------

### Reading Business Clients - HTTP Request

Source: https://developers.facebook.com/docs/marketing-api/reference/business/clients

Example of an HTTP GET request to retrieve a list of businesses that have granted access to their assets. This is a basic request structure.

```http
GET /v24.0/{business-id}/clients HTTP/1.1
Host: graph.facebook.com
```

--------------------------------

### Create Ad Set (Node.js SDK)

Source: https://developers.facebook.com/docs/marketing-api/adset

This example demonstrates creating an ad set using the Node.js SDK for the Facebook Marketing API, including defining targeting and budget parameters.

```APIDOC
## POST /act_{AD_ACCOUNT_ID}/adsets

### Description
Creates an ad set using the Node.js SDK.

### Method
POST

### Endpoint
/act_{AD_ACCOUNT_ID}/adsets

### Parameters
#### Request Body
- **name** (string) - Required - The name of the ad set.
- **lifetime_budget** (string) - Optional - The lifetime budget for the ad set.
- **start_time** (string) - Optional - The start time for the ad set in ISO 8601 format.
- **end_time** (string) - Optional - The end time for the ad set in ISO 8601 format.
- **campaign_id** (string) - Required - The ID of the campaign.
- **bid_amount** (string) - Optional - The bid amount.
- **billing_event** (string) - Required - The billing event (e.g., LINK_CLICKS).
- **optimization_goal** (string) - Required - The optimization goal (e.g., LINK_CLICKS).
- **targeting** (object) - Required - Targeting criteria.
  - **facebook_positions** (array of strings) - Optional - Placements within Facebook.
  - **geo_locations** (object) - Required - Geographic targeting.
    - **countries** (array of strings) - Required - List of country codes.
  - **publisher_platforms** (array of strings) - Optional - Publisher platforms to target.
- **status** (string) - Required - The status of the ad set (e.g., PAUSED).

### Request Example
```javascript
const bizSdk = require('facebook-nodejs-business-sdk');
const AdAccount = bizSdk.AdAccount;
const AdSet = bizSdk.AdSet;

const access_token = '<ACCESS_TOKEN>';
const app_secret = '<APP_SECRET>';
const app_id = '<APP_ID>';
const id = '<AD_ACCOUNT_ID>';
const api = bizSdk.FacebookAdsApi.init(access_token);

let fields, params;
fields = [];
params = {
  'name' : 'My First Adset',
  'lifetime_budget' : '20000',
  'start_time' : '2024-07-29T17:54:57-0700',
  'end_time' : '2024-08-08T17:54:57-0700',
  'campaign_id' : '<adCampaignLinkClicksID>',
  'bid_amount' : '100',
  'billing_event' : 'LINK_CLICKS',
  'optimization_goal' : 'LINK_CLICKS',
  'targeting' : {'facebook_positions':['feed'],'geo_locations':{'countries':['US']},'publisher_platforms':['facebook','audience_network']},
  'status' : 'PAUSED',
};
const adsets = (new AdAccount(id)).createAdSet(fields, params);
```

### Response
#### Success Response (200)
- **id** (string) - The ID of the created ad set.

#### Response Example
```json
{
  "id": "<ad_set_id>"
}
```
```

--------------------------------

### Home Listings Supported Fields

Source: https://developers.facebook.com/docs/marketing-api/real-estate-ads/get-started

This section details the fields supported for home listings in the Facebook Marketing API, crucial for creating Advantage+ catalog ads and commerce listings.

```APIDOC
## Home Listings Supported Fields

### Description
This endpoint details the supported fields for items added to your product catalog, specifically for home listings. These fields are essential for Advantage+ catalog ads and commerce features.

### Method
POST (Implied for adding to catalog)

### Endpoint
/websites/developers_facebook_marketing-api

### Parameters
#### Supported Fields

- **`home_listing_id`** (string) - Required for Advantage+ catalog ads and commerce. Unique home listing ID.
- **`home_listing_group_id`** (string) - Not applicable to Advantage+ catalog ads. Optional for commerce. Unique ID for a building or apartment group.
- **`name`** (string) - Required for Advantage+ catalog ads and commerce. Title of the home listing.
- **`availability`** (string) - Required for Advantage+ catalog ads and commerce. Current availability status (e.g., `for_sale`, `for_rent`).
- **`address`** (object) - Required for Advantage+ catalog ads and commerce. Street address of the property.
  - **`address.city`** (string) - Required. City where the property is located.
  - **`address.region`** (string) - Required. State, county, region, or province.
  - **`address.country`** (object) - Required. Country where the property is located.
  - **`address.postal_code`** (string) - Required. Postal code of the property.
- **`latitude`** (float) - Required for Advantage+ catalog ads and commerce. Latitude coordinate of the listing.
- **`longitude`** (float) - Required for Advantage+ catalog ads and commerce. Longitude coordinate of the listing.
- **`neighborhood`** (string) - Required for Advantage+ catalog ads. Optional, but recommended for commerce. Listing neighborhood(s).
- **`price`** (string) - Required for Advantage+ catalog ads and commerce. Sale or rental price of the property (e.g., `13,999 USD`).
- **`image`** (object) - Required for Advantage+ catalog ads and commerce. URL for the image used in the ad.
- **`url`** (string) - Required for Advantage+ catalog ads and commerce. Link to the property listing page.
- **`description`** (string) - Optional for Advantage+ catalog ads. Required for commerce. Description of the property.
- **`num_beds`** (float) - Optional for Advantage+ catalog ads. Required for commerce. Total number of bedrooms.
- **`num_baths`** (float) - Optional for Advantage+ catalog ads. Required for commerce. Total number of bathrooms.
- **`num_rooms`** (float) - Not applicable for Advantage+ catalog ads. Required for commerce. Total number of rooms.

### Request Example
```json
{
  "home_listing_id": "FB_home_1234",
  "name": "Modern Eichler in Green Oaks",
  "availability": "for_sale",
  "address": {
    "street": "1 Hacker Way",
    "city": "Menlo Park",
    "region": "California",
    "country": "United States",
    "postal_code": "94025"
  },
  "latitude": 37.484100,
  "longitude": -122.148252,
  "price": "13,999 USD",
  "image": {
    "url": "http://example.com/image.jpg"
  },
  "url": "http://www.realestate.com/listing/1234",
  "description": "Beautiful 3BD home available in Belmont.",
  "num_beds": 3,
  "num_baths": 2,
  "num_rooms": 5
}
```

### Response
#### Success Response (200)
- **message** (string) - Confirmation of successful processing.

#### Response Example
```json
{
  "message": "Home listing processed successfully."
}
```

#### Error Response
- **error** (object) - Details about the error.
  - **code** (integer) - Error code.
  - **message** (string) - Error description.
```

--------------------------------

### PHP Code Example (Synchronous)

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/using-the-api

Illustrates a synchronous event execution using the Conversions API Gateway in PHP.

```APIDOC
## PHP Code Example (Synchronous)

### Description
Shows how to send events synchronously to the Conversions API Gateway using the PHP Business SDK.

### Request Example
```php
$api = Api::init(null, null, $this->access_token);
$api->setLogger(new CurlLogger());
$event_request = new EventRequest($this->pixel_id);
$capiIngressRequest = new CAPIGatewayIngressRequest($this->cb_url, $this->access_key);
$event_request->setCustomEndpoint($capiIngressRequest);
$user_data = (new UserData())
   ->setEmails(array('joe@eg.com'))
   ->setPhones(array('12345678901', '14251234567'))
   ->setFbc('fb.1.1554763741205.AbCdEfGhIjKlMnOpQrStUvWxYz1234567890')
   ->setFbp('fb.1.1558571054389.1098115397');
$event1 = (new Event())
   ->setEventName('Purchase')
   ->setEventId('125')
   ->setEventTime(time())
   ->setEventSourceUrl('http://jaspers-market.com/product/123')
   ->setUserData($user_data);
$events = array($event1, $event2);
$event_request->setEvents($events);
$response = $event_request->execute();
print($response->__toString());
```

### Response
#### Success Response (200)
- **response** (string) - The string representation of the API response.
```

--------------------------------

### Create Ad Pixel (iOS SDK)

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-account/adspixels

An example of creating an Ad Pixel using the Facebook iOS SDK. It initializes parameters and starts the request with a completion handler.

```objectivec
NSDictionary *params = @{
  @"name": @"My WCA Pixel",
};
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/act_<AD_ACCOUNT_ID>/adspixels"
                                      parameters:params
                                      HTTPMethod:@"POST"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];
```

--------------------------------

### Create Ad Set - PHP

Source: https://developers.facebook.com/docs/marketing-api/adset

Initializes the Facebook Ads SDK for PHP and prepares parameters to create an ad set. This snippet focuses on parameter setup and requires further execution steps.

```php
require __DIR__ . '/vendor/autoload.php';

use FacebookAds\Object\AdAccount;
use FacebookAds\Object\AdSet;
use FacebookAds\Api;
use FacebookAds\Logger\CurlLogger;

$access_token = '<ACCESS_TOKEN>';
$app_secret = '<APP_SECRET>';
$app_id = '<APP_ID>';
$id = '<AD_ACCOUNT_ID>';

$api = Api::init($app_id, $app_secret, $access_token);
$api->setLogger(new CurlLogger());

$fields = array(
);
$params = array(

```

--------------------------------

### Set Ad Status to ACTIVE

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

This endpoint allows you to set the status of an ad to 'ACTIVE' after reviewing creative previews. It requires the ad ID and an access token.

```APIDOC
## POST /v24.0/<AD_ID>

### Description
Sets the status of an ad to 'ACTIVE'. This is typically done after reviewing creative previews.

### Method
POST

### Endpoint
`https://graph.facebook.com/v24.0/<AD_ID>`

### Parameters
#### Path Parameters
- **AD_ID** (string) - Required - The ID of the ad to update.

#### Form Data Parameters
- **status** (string) - Required - The desired status for the ad (e.g., 'ACTIVE').
- **access_token** (string) - Required - Your Facebook API access token.

### Request Example
```json
{
  "status": "ACTIVE",
  "access_token": "<ACCESS_TOKEN>"
}
```

### Response
#### Success Response (200)
- **success** (boolean) - Indicates if the operation was successful.

#### Response Example
```json
{
  "success": true
}
```
```

--------------------------------

### Read Ad Creative Asset Feed with Python SDK

Source: https://developers.facebook.com/docs/marketing-api/ad-creative/asset-feed-spec

This Python example shows how to get the asset feed specification for an ad creative using the Facebook Business SDK for Python. It requires initializing the API with an access token and then making a `get` call on the `AdCreative` object.

```python
from facebook_business.adobjects.adcreative import AdCreative
from facebook_business.api import FacebookAdsApi

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_CREATIVE_ID>'
FacebookAdsApi.init(access_token=access_token)

fields = [
  'asset_feed_spec',
]
params = {
}
print AdCreative(id).get(
  fields=fields,
  params=params,
)
```

--------------------------------

### Initialize and Configure SDKs in AppDelegate (Swift)

Source: https://developers.facebook.com/docs/marketing-api/gateway-products/signals-gateway/signals-gateway-sdk-onboarding

This snippet demonstrates how to initialize and configure both the Signals Gateway SDK and the Facebook SDK for iOS within the AppDelegate of an iOS application. It includes setting user information and handling application launch options.

```swift
/* AppDelegate.swift example */
import AHSDK
import FBSDKCoreKit
import StoreKit
import UIKit

@UIApplicationMain
final class AppDelegate: UIResponder, UIApplicationDelegate {

  internal var window: UIWindow?


func application(
    _ application: UIApplication,
    didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?
  ) -> Bool {

    AHSDK.ApplicationDelegate.shared.application(application, didFinishLaunchingWithOptions: launchOptions)
    FBSDKCoreKit.ApplicationDelegate.shared.application(application, didFinishLaunchingWithOptions: launchOptions)

    AHSDK.AppEvents.shared.setUserEmail(
      "apptest@meta.com",
      firstName: "Hua",
      lastName: nil,
      phone: "s123456",
      dateOfBirth: "19980713",
      gender: "M",
      city: "Bellevue",
      state: "WA",
      zip: "98005",
      country: "USA",
      externalId: "11111"
    )

    FBSDKCoreKit.AppEvents.shared.setUser(
      email: "apptest@meta.com",
      firstName: "Hua",
      lastName: nil,
      phone: "s123456",
      dateOfBirth: "19980713",
      gender: "M",
      city: "Bellevue",
      state: "WA",
      zip: "98005",
      country: "USA"
    )
   
    return true
  }

 @objc dynamic
 func application(_ app: UIApplication, open url: URL, options: [UIApplication.OpenURLOptionsKey: Any] = [:]) -> Bool {
    AHSDK.ApplicationDelegate.shared.application(app, open: url, options: options)
    return FBSDKCoreKit.ApplicationDelegate.shared.application(app, open: url, options: options)
  }

  @objc dynamic
 func application(_ application: UIApplication, continue userActivity: NSUserActivity, restorationHandler: @escaping ([UIUserActivityRestoring]?) -> Void) -> Bool {
    return true
  }
}

```

--------------------------------

### Create Ad using Python SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/adgroup

Provides a Python example for creating an ad using the Facebook Business SDK. The code initializes the API and then calls the create_ad method.

```python
from facebook_business.adobjects.adaccount import AdAccount
from facebook_business.adobjects.ad import Ad
from facebook_business.api import FacebookAdsApi

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_ACCOUNT_ID>'
FacebookAdsApi.init(access_token=access_token)

fields = [
]
params = {
  'name': 'My AdGroup with Redownload',
  'adset_id': '<adSetID>',
  'creative': {'creative_id':'<adCreativeID>'},
  'redownload': '1',
  'status': 'PAUSED',
}
print AdAccount(id).create_ad(
  fields=fields,
  params=params,
)

```

--------------------------------

### Get Ad Placement Validation Results for Media (JSON Response Examples)

Source: https://developers.facebook.com/docs/marketing-api/business-creative-asset-management/guides/media-level-ad-format-validation

These examples show the JSON response structure when checking ad placement validation for existing images or videos. It details the ad placement, label, validation status, and any associated error messages.

```json
{
  "data": [
    {
      "ad_placement": "FACEBOOK_STORY_MOBILE",
      "ad_placement_label": "Facebook Stories",
      "is_valid": false,
      "error_messages": [
        "Fb Story Ads Resolution Is Too Low: The width of photo and video has to be larger than 500px for ads in Facebook Stories."
      ]
    }
  ]
}
```

```json
{
  "data": [
    {
      "ad_placement": "INSTREAM_VIDEO_MOBILE",
      "ad_placement_label": "Facebook In-Stream Video (Mobile)",
      "is_valid": false,
      "error_messages": [
        "Ad Video Duration Is Too Short: Duration of the video used in the ad is too short."
      ]
    },
    {
      "ad_placement": "FACEBOOK_STORY_MOBILE",
      "ad_placement_label": "Facebook Stories",
      "is_valid": true
    }
  ]
}
```

--------------------------------

### Configure Facebook Ads API (Ruby)

Source: https://developers.facebook.com/docs/marketing-api/mobile-app-ads

Configures the Facebook Ads API client with access token and app secret. Requires the `facebook_ads` gem to be installed. This setup is essential before making any API calls.

```ruby
access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_ACCOUNT_ID>'

FacebookAds.configure do |config|
  config.access_token = access_token
  config.app_secret = app_secret
end
```

--------------------------------

### Advantage+ Catalog Ads and Carousel Ads Configuration

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

Configure Advantage+ catalog ads to use item information for dynamic descriptions and static carousel ads for dynamic carousel descriptions. The `enroll_status` field controls opt-in/out.

```APIDOC
## POST /adcreatives

### Description
Configure Advantage+ catalog ads to use item information for dynamic descriptions and static carousel ads for dynamic carousel descriptions. The `enroll_status` field controls opt-in/out.

### Method
POST

### Endpoint
`https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives`

### Parameters
#### Request Body
- **name** (string) - Required - Name for the Advantage+ Creative.
- **object_story_spec** (object) - Required - Specifies the page ID.
  - **page_id** (string) - Required - The ID of the Facebook page.
- **asset_feed_spec** (object) - Optional - Used for opting into features like music. Example includes `audios` for random audio selection.
- **access_token** (string) - Required - User's access token.

### Request Example
```json
{
  "name": "Advantage+ Creative Music",
  "object_story_spec": {
    "page_id": "<PAGE_ID>"
  },
  "asset_feed_spec": {
    "audios": [
      {
        "type": "random"
      }
    ]
  },
  "access_token": "<ACCESS_TOKEN>"
}
```

### Response
#### Success Response (200)
Details of the created ad creative.

#### Response Example
(Example response not provided in the source text)
```

--------------------------------

### Facebook Marketing API: Get Initiated Audience Sharing Requests

Source: https://developers.facebook.com/docs/marketing-api/business-asset-management/guides/share-custom-audiences

This example demonstrates how to retrieve audience sharing requests initiated by a business using a GET request. It outlines the endpoint and fields required for the query, along with the structure of the response, including details about the initiator, recipient, and shared audiences.

```http
GET <BUSINESS_ID>/initiated_audience_sharing_requests?fields=custom_audiences,initiator,recipient,relationship_type,request_status,request_type
```

```json
{
    "data": [
        {
            "initiator": {
                "id": "<BUSINESS_ID>",
                "name": "business_name1"
            },
            "recipient": {
                "id": "<BUSINESS_ID>",
                "name": "business_name2"
            },
            "request_status": "IN_PROGRESS",
            "relationship_type": "[<relationship_type>]",
            "id": "<SHARING_RELATIONSHIP_ID>",
            "custom_audiences": [
                {
                    "id": "<CUSTOM_AUDIENCE_ID>",
                    "name": "<CUSTOM_AUDIENCE_NAME>",
                    "share_account_name": "<ACCOUNT_NAME>",
                    "share_account_id": "<ACCOUNT_ID>"
                }
            ]
        }
        ...
    ],
    "paging": {
        "cursors": {
            "before": "<CURSOR>",
            "after": "<CURSOR>"
        }
    }
}
```

--------------------------------

### Onboard Seller with Existing Page using API

Source: https://developers.facebook.com/docs/marketing-api/collaborative-ads/managed-partner-ads/faq

This snippet demonstrates how to onboard a seller using their existing Facebook Page for advertising. It involves two main API calls: one to create the seller business and another to request access to the seller's page with advertisement permissions. Ensure you replace placeholders with actual values.

```bash
curl -X POST \
 -F "id=<BUSINESS_ID>" \
 -F "catalog_id=<CATALOG_ID>" \
 -F "line_of_credit_id=<CREDIT_LINE_ID>" \
 -F "child_business_external_id=<SELLER_ID>" \
 -F "name=<SELLER_NAME>" \
 -F "seller_external_website_url=<SELLER_WEBSITE>" \
 -F "page_name=<SELLER_PAGE_NAME>" \
 -F "page_profile_image_url=<SELLER_PAGE_PROFILE>" \
 -F "sales_rep_email=<SELLER_EMAIL>" \
 -F "partner_facebook_page_url=<SELLER_OWN_PAGE_URL>" \
 -F "partner_registration_countries=['US', 'UK']" \
 -F "ad_account_currency=USD" \
 -F "credit_limit=<CREDIT_LIMIT>" \
 -F "seller_targeting_countries=['US', 'UK']" \
 -F "vertical=<OTHER>" \
 -F "timezone_id=<TIMEZONE_ID>" \
 -F "access_token=<ACCESS_TOKEN>" \
 "https://graph.facebook.com/v<API_VERSION><Business_id>/aams_seller_businesses"
```

```bash
curl -X POST \
 -F "page_id=<SELLER_PAGE_ID>" \
 -F 'permitted_tasks=["ADVERTISE"]' \
 -F "access_token=<ACCESS_TOKEN>" \
"https://graph.facebook.com/v<API_VERSION>/<SELLER_ID>/client_pages"
```

--------------------------------

### Retrieve Custom Audiences (Python SDK)

Source: https://developers.facebook.com/docs/marketing-api/dynamic-product-ads/product-audiences

Example using the Facebook Python SDK to fetch Custom Audiences. It covers SDK initialization and the call to get audience details.

```APIDOC
## GET /customaudiences (Python SDK)

### Description
Shows how to use the Facebook Python SDK to retrieve Custom Audiences. This includes initializing the SDK and making the request.

### Method
GET (via SDK)

### Endpoint
(Internal SDK method that maps to the Graph API endpoint)

### Parameters
#### Path Parameters
- **id** (string) - Required - The Ad Account ID.

#### Query Parameters
- **fields** (list of strings) - Required - List of fields to retrieve (e.g., ['data_source', 'subtype']).
- **params** (dict) - Optional - Additional parameters for the API call.

### Request Example
```python
from facebook_business.adobjects.adaccount import AdAccount
from facebook_business.adobjects.customaudience import CustomAudience
from facebook_business.api import FacebookAdsApi

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_ACCOUNT_ID>'
FacebookAdsApi.init(access_token=access_token)

fields = [
  'data_source',
  'subtype',
]
params = {
}
print AdAccount(id).get_custom_audiences(
  fields=fields,
  params=params,
)
```

### Response
#### Success Response (200)
- The SDK returns an object or list representing the Custom Audiences with the requested fields.

#### Response Example
(The SDK handles parsing; the actual response structure will mirror the Graph API JSON response.)
```

--------------------------------

### Create Instant Experience Settings

Source: https://developers.facebook.com/docs/marketing-api/guides/collection

This section details the required and optional settings for creating an Instant Experience.

```APIDOC
## POST /<PAGE_ID>/canvas_elements

### Description
Used to create an Instant Experience with specified settings.

### Method
POST

### Endpoint
https://graph.facebook.com/v24.0/<PAGE_ID>/canvas_elements

### Parameters
#### Request Body
- **display** (string) - Required. Value: `popup`
- **method** (string) - Required. Value: `instant_experiences_builder`
- **account_id** (string) - Required. Your ad account ID.
- **business_id** (string) - Required. Your business ID.
- **page_id** (string) - Required. The Page ID you want to associate with the Instant Experience.
- **template_id** (string) - Required. The ID of the template you want to use.
- **product_catalog_id** (string) - Required, if `product_set_id` is provided. The ID of the product catalog.
- **product_set_id** (string) - Optional. The ID of the product set.

### Response
#### Success Response (200)
- **success** (boolean) - Indicates if the creation was successful.
- **id** (string) - The ID of the unpublished Instant Experience.

#### Response Example
```json
{
  "success": true,
  "id": "<CANVAS_ID>"
}
```
```

--------------------------------

### Retrieve Ad Set Fields (name, status) using Python SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-campaign

This Python snippet retrieves 'name' and 'status' for an Ad Set using the Facebook Business SDK. It initializes the FacebookAdsApi with an access token and then calls the get() method on an AdSet object, passing the desired fields. Ensure the SDK is installed (`pip install facebook_business`).

```python
from facebook_business.adobjects.adset import AdSet
from facebook_business.api import FacebookAdsApi

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_SET_ID>'
FacebookAdsApi.init(access_token=access_token)

fields = [
  'name',
  'status',
]
params = {
}
print AdSet(id).get(
  fields=fields,
  params=params,
)
```

--------------------------------

### Facebook Pixel (for websites) - Search Event

Source: https://developers.facebook.com/docs/marketing-api/dynamic-ads-auto/auto-event

This guide assumes a Facebook pixel is already installed. It provides a code sample for tracking the 'Search' event on websites.

```APIDOC
## Facebook Pixel (for websites)

### Search Pixel Event

```javascript
    // This sample assumes the FB Pixel base code is already loaded

fbq('track', 'Search', {
      content_type: 'vehicle', // RECOMMENDED: If sent, it must be set to 'vehicle'
      content_ids: ['123'], // RECOMMENDED: array of vehicle IDs
      postal_code: '94025', // RECOMMENDED
      country: 'United States', // RECOMMENDED  don't use abbreviations
      make: 'Lexus', // RECOMMENDED
      model: 'ES', // RECOMMENDED
      year: '2017', // RECOMMENDED
      state_of_vehicle: 'CPO', // RECOMMENDED
      exterior_color: 'black', // RECOMMENDED
      transmission: 'automatic', // RECOMMENDED
      body_style: 'sedan', // RECOMMENDED
      fuel_type: 'gasoline', // RECOMMENDED
      drivetrain: 'awd', // RECOMMDENDED
      price: 1234.99, // RECOMMENDED, up to 2 decimals optional
      currency: 'USD', // REQUIRED if price and preferred_price_range is used, currency has to be the same for both price and preferred_price_range 
      preferred_price_range: '[10000,20000]' // Optional up to two decimals, min,max
});
```
```

--------------------------------

### Read Business Client Pages - HTTP

Source: https://developers.facebook.com/docs/marketing-api/reference/business/client_pages

Example of how to make an HTTP GET request to retrieve a list of client-owned pages associated with a business. This is a direct API call.

```HTTP
GET /v24.0/{business-id}/client_pages HTTP/1.1
Host: graph.facebook.com
```

--------------------------------

### Conversions API Gateway and Signals Gateway Control Plane API - Prerequisites

Source: https://developers.facebook.com/docs/marketing-api/gateway-products/gateway-control-plane-api

Steps required before integrating with the control plane API, including onboarding as a host and generating API account credentials.

```APIDOC
## Prerequisites

### Description
Steps to prepare for integration with the control plane API.

### Steps
1. **Onboard as a host** of a Conversions API Gateway instance.
2. **Generate API account name and API secret key**:
   - Navigate to `https://<Gateway Products Endpoint>/hub/`.
   - Go to the **Host settings** tab and select **Manage API accounts**.
   - Click **Add API account**.
   - Enter your password and click **Continue**.
   - Enter an API account name (letters and numbers, max 20 characters, no spaces).
   - Click **Continue**.
   - **Copy and save the generated secret key**. It will not be viewable again.

### Actions
- **Delete API account**: Removes an API account. This action is irreversible and may disrupt services.
```

--------------------------------

### Create Product Feed - Graph API Explorer

Source: https://developers.facebook.com/docs/marketing-api/reference/product-feed

This example demonstrates creating a product feed using the Graph API Explorer or a direct HTTP POST request. It targets the `/product_feeds` edge with necessary parameters such as name and schedule. This is useful for testing and direct API interaction.

```http
POST /v24.0/{product-catalog-id}/product_feeds HTTP/1.1
Host: graph.facebook.com

name=Test+Feed&schedule=%7B%22interval%22%3A%22DAILY%22%2C%22url%22%3A%22http%3A%2F%2Fwww.example.com%2Fsample_feed.tsv%22%2C%22hour%22%3A%2222%22%7D
```

--------------------------------

### Advantage+ Creative Features Specification

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

This section details the various Advantage+ Creative features available for opt-in. Each feature can be controlled using the `enroll_status` field, which accepts `OPT_IN` or `OPT_OUT`.

```APIDOC
## Advantage+ Creative Features

### Description
This section outlines the parameters for Advantage+ Creative features within the `creative_features_spec`.

### Method
N/A (Configuration parameter)

### Endpoint
N/A (Configuration parameter)

### Parameters
#### Request Body (within `creative_features_spec`)
- **`text_translation`** (object) - Optional. Opt-in for ad translation. Requires `enroll_status` (`OPT_IN` or `OPT_OUT`).
- **`inline_comment`** (object) - Optional. Opt-in to display relevant comments below the ad. Requires `enroll_status` (`OPT_IN` or `OPT_OUT`).
- **`image_templates`** (object) - Optional. Opt-in for AI-generated overlays on images. Requires `enroll_status` (`OPT_IN` or `OPT_OUT`).
- **`image_touchups`** (object) - Optional. Opt-in for automatic cropping and expansion of image ads. Requires `enroll_status` (`OPT_IN` or `OPT_OUT`).
- **`video_auto_crop`** (object) - Optional. Opt-in for automatic cropping and expansion of video ads. Requires `enroll_status` (`OPT_IN` or `OPT_OUT`).
- **`image_brightness_and_contrast`** (object) - Optional. Opt-in for automatic adjustment of image brightness and contrast. Requires `enroll_status` (`OPT_IN` or `OPT_OUT`).
- **`enhance_cta`** (object) - Optional. Opt-in to pair ad sources with CTA. Requires `enroll_status` (`OPT_IN` or `OPT_OUT`) and optionally `customizations` (e.g., `{"text_extraction": {"enroll_status": "OPT_IN"}}`).
- **`text_optimizations`** (object) - Optional. Opt-in for text improvements like generating primary text, headlines, or descriptions. Requires `enroll_status` (`OPT_IN` or `OPT_OUT`) and optionally `customizations` (e.g., `{"text_extraction": {"enroll_status": "OPT_IN"}}`).
- **`image_background_gen`** (object) - Optional. Opt-in for AI-generated backgrounds for product images. Requires `enroll_status` (`OPT_IN` or `OPT_OUT`).
- **`image_uncrop`** (object) - Optional. Opt-in for AI-powered image expansion to fit more placements. Requires `enroll_status` (`OPT_IN` or `OPT_OUT`).
- **`adapt_to_placement`** (object) - Optional. Opt-in to display 9:16 catalog images in supported placements. Requires `enroll_status` (`OPT_IN` or `OPT_OUT`).
- **`media_type_automation`** (object) - Optional. Opt-in to display videos from catalog alongside images. Requires `enroll_status` (`OPT_IN` or `OPT_OUT`).
- **`product_extensions`** (object) - Optional. Opt-in to show catalog items next to selected media. Requires `enroll_status` (`OPT_IN` or `OPT_OUT`).
- **`description_automation`** (object) - Optional. Opt-in for automated description generation.

### Request Example
```json
{
  "creative_features_spec": {
    "text_translation": {
      "enroll_status": "OPT_IN"
    },
    "inline_comment": {
      "enroll_status": "OPT_IN"
    },
    "image_templates": {
      "enroll_status": "OPT_IN"
    }
  }
}
```

### Response
#### Success Response (200)
Details on the successful application of creative features.

#### Response Example
```json
{
  "success": true
}
```
```

--------------------------------

### Enabling Dynamic Media in Facebook Marketing API

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

This code snippet shows how to opt-in to the `media_type_automation` feature. When enabled (`enroll_status` set to `OPT_IN`), videos from your catalog can be displayed alongside images in supported placements, offering dynamic content options.

```JSON
{
    "creative_features_spec": {
        "media_type_automation": {
            "enroll_status": "OPT_IN"
        }
    }
}
```

--------------------------------

### Locales Search API

Source: https://developers.facebook.com/docs/marketing-api/targeting-search

This endpoint allows you to search for targetable locales by their locale codes. An example request is provided for searching locales starting with 'en'.

```APIDOC
## Locales Search API

### Description
Allows searching for targetable locales using locale codes. You can search for locales starting with a specific prefix or retrieve all locales.

### Method
GET

### Endpoint
`https://graph.facebook.com/v<API_VERSION>/search`

### Query Parameters
- **type** (string) - Required - Must be `adlocale`.
- **q** (string) - Optional - String to autocomplete values. Leave blank (`q=`) to get all locales, combined with a large `limit`.
- **access_token** (string) - Required - Your API access token.
- **limit** (integer) - Optional - Maximum number of results to return. Set to a large number (e.g., `1000`) to get all locales when `q` is blank.

### Request Example
```bash
curl -G \
  -d 'type=adlocale' \
  -d 'q=en' \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v<API_VERSION>/search
```

### Response
#### Success Response (200)
Returns a list of matching locales.
- **data** (array) - Contains locale objects.
  - **key** (integer) - The unique ID of the locale.
  - **name** (string) - The name of the locale (e.g., `"English (US)"`).

#### Response Example
```json
{
  "data": [
    {
      "key": 51,
      "name": "English (Upside Down)"
    },
    {
      "key": 6,
      "name": "English (US)"
    },
    {
      "key": 24,
      "name": "English (UK)"
    }
  ]
}
```
```

--------------------------------

### GET Ad Account Detail

Source: https://developers.facebook.com/docs/marketing-api/2tier-bm-solution/supported-operations

Retrieves detailed information about a specific ad account.  This example focuses on retrieving the terms of service (TOS) acceptance status.

```APIDOC
## GET /{{meta-api-version}}/{{cbm_adacccount_id}}

### Description
Retrieves detailed information about an ad account.

### Method
GET

### Endpoint
/{{meta-api-version}}/{{cbm_adacccount_id}}

### Parameters
#### Query Parameters
- **fields** (string) - Required - Specifies the fields to return (tos_accepted).
- **access_token** (string) - Required - The access token for the child Business Manager.

### Request Example
N/A

### Response
#### Success Response (200)
- **tos_accepted** (boolean) - Indicates if the terms of service have been accepted.

#### Response Example
{
  "tos_accepted": true
}

```

--------------------------------

### Generate Ad Preview - PHP SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-account/generatepreviews

This PHP SDK example shows how to generate an ad preview by making a GET request to the Facebook Marketing API. It includes error handling for potential API or SDK exceptions.

```php
/* PHP SDK v5.0.0 */
/* make the API call */
try {
  // Returns a `Facebook\FacebookResponse` object
  $response = $fb->get(
    '/act_<AD_ACCOUNT_ID>/generatepreviews?creative=%3CCREATIVE_SPEC%3E&ad_format=%3CAD_FORMAT%3E',
    '{access-token}'
  );
} catch(Facebook\Exceptions\FacebookResponseException $e) {
  echo 'Graph returned an error: ' . $e->getMessage();
  exit;
} catch(Facebook\Exceptions\FacebookSDKException $e) {
  echo 'Facebook SDK returned an error: ' . $e->getMessage();
  exit;
}
$graphNode = $response->getGraphNode();
/* handle the result */

```

--------------------------------

### Read Business Pending Client Apps (HTTP)

Source: https://developers.facebook.com/docs/marketing-api/reference/business/pending_client_apps

Demonstrates how to make an HTTP GET request to retrieve pending client app requests for a business. This is a foundational example for understanding API interaction.

```HTTP
GET /v24.0/{business-id}/pending_client_apps HTTP/1.1
Host: graph.facebook.com
```

--------------------------------

### Marketing API Versioning FAQ

Source: https://developers.facebook.com/docs/marketing-api/overview/versioning

Answers common questions about Marketing API versioning, including handling unversioned calls, calling older versions, and differences compared to Platform API versioning.

```APIDOC
## Marketing API Versioning FAQ

### Unversioned Calls

**Question:** What if I don't specify a version for the Marketing API?

**Answer:** Calls without a specified version (unversioned calls) are invalid and will result in failure when made against Marketing API endpoints.

### Calling Older Versions

**Question:** Can I make calls to versions older than the current version?

**Answer:** You can call the Marketing API version that was latest available when your app was created, provided it has not been deprecated. You can also call newer, undeprecated versions. Starting May 14, 2024, for deprecated versions, the platform might upgrade selected endpoints to the next available version instead of failing the request.

**Example Scenarios:**

*   **App created before v17.0 (v16.0 was latest):** Can call v16.0 until its deprecation. After v16.0 deprecation, calls to v16.0 will fail. Calls to v17.0 and later (if undeprecated) are also possible.
*   **App created after v17.0 release:** Can call v17.0 until its deprecation, and subsequent undeprecated versions (v18.0, etc.). After v17.0 deprecation, calls to v17.0 will fail.
*   **App created before v17.0, but not used until after v17.0 launch:** Can only use v17.0 and later, not v16.0.
*   **App created when v16.0 was latest and used before v17.0 launch:** Can still use v16.0 even after v17.0 launch.

### Difference from Platform API Versioning

**Marketing API vs. Platform API Versioning:**

1.  **Deprecation Schedule:** Marketing API uses a 90-day deprecation schedule, while Platform API has core APIs with a 2-year guarantee.
2.  **Unversioned Calls:** Marketing API does not support unversioned calls; they will fail. Platform API may have different handling for unversioned requests.
```

--------------------------------

### Example of Dynamic Date Formatting for Trip Start

Source: https://developers.facebook.com/docs/marketing-api/dynamic-ads-for-destinations/template-tags/v2

Illustrates the syntax for formatting the trip start date within template tags. This allows for dynamic updating of dates in ads without re-uploading data, especially useful for Advantage+ catalog ads in verticals like hotels and travel. It supports various date formats.

```text
{{trip.checkin_date}}
{{trip.checkin_date date_format:Y-m-d}}
```

--------------------------------

### Get FBP Cookie Value (JavaScript)

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/client-side-onboarding

Retrieves the value of the 'fbp' cookie. This function is available in both ClientParamBuilder and ClientParamsHelper.

```javascript
// @return fbp string
function getFbp() {
}
```

--------------------------------

### Get FBC Cookie Value (JavaScript)

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/client-side-onboarding

Retrieves the value of the 'fbc' cookie. This function is available in both ClientParamBuilder and ClientParamsHelper.

```javascript
// @return fbc string
function getFbc() {
}
```

--------------------------------

### XML Example ATOM - Basic

Source: https://developers.facebook.com/docs/marketing-api/reference/product-item

An example of an ATOM feed for product data without deep links.

```APIDOC
## XML Example ATOM - Basic

### Description
This is an example of an ATOM XML feed used for providing product data to Facebook. It includes basic product information like ID, title, description, price, and image link.

### Content
```xml
<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:g="http://base.google.com/ns/1.0">
    <title>Test Store</title>
    <link rel="self" href="http://www.example.com"/>
 
    <entry>
        <g:id>DB_1</g:id>
        <g:title>Dog Bowl In Blue</g:title>
        <g:description>Solid plastic Dog Bowl in marine blue color</g:description>
        <g:link>http://www.example.com/bowls/db-1.html</g:link>
        <g:image_link>http://images.example.com/DB_1.png</g:image_link>
        <g:brand>Example</g:brand>
        <g:condition>new</g:condition>
        <g:availability>in stock</g:availability>
        <g:price>9.99 GBP</g:price>

                        
        <g:google_product_category>Animals &gt; Pet Supplies</g:google_product_category>
    </entry>
</feed>
```
```

--------------------------------

### Create App Installs Campaign - Node.js SDK

Source: https://developers.facebook.com/docs/marketing-api/mobile-app-ads

This Node.js script utilizes the Facebook Marketing SDK to create a campaign for app installs. It requires initialization with access token, app secret, and app ID, and then defines campaign parameters like name, objective, and status.

```javascript
'use strict';
const bizSdk = require('facebook-nodejs-business-sdk');
const AdAccount = bizSdk.AdAccount;
const Campaign = bizSdk.Campaign;

const access_token = '<ACCESS_TOKEN>';
const app_secret = '<APP_SECRET>';
const app_id = '<APP_ID>';
const id = '<AD_ACCOUNT_ID>';
const api = bizSdk.FacebookAdsApi.init(access_token);
const showDebugingInfo = true; // Setting this to true shows more debugging info.
if (showDebugingInfo) {
  api.setDebug(true);
}

const logApiCallResult = (apiCallName, data) => {
  console.log(apiCallName);
  if (showDebugingInfo) {
    console.log('Data:' + JSON.stringify(data));
  }
};

let fields, params;
fields = [
];
params = {
  'name' : 'App Installs Campaign with Dynamic Product Ads',
  'objective' : 'OUTCOME_APP_PROMOTION',
  'status' : 'PAUSED',
  'special_ad_categories' : [],
};
const campaigns = (new AdAccount(id)).createCampaign(
  fields,
  params
);
logApiCallResult('campaigns api call complete.', campaigns);
```

--------------------------------

### Pass fbc/fbp to Conversions API (Ruby)

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/server-side-onboarding

This Ruby snippet demonstrates initializing ParamBuilder, processing the request with host, query parameters, cookies, and an optional referral link, then retrieving fbc and fbp values.

```ruby
builder = ParamBuilder.new(["localhost", "example.com"])
cookies_to_be_updated = builder.process_request(
        host, # current host name
        query_params, # query params as hash type
        cookie_dict, # current cookies as hash type
        referral_link) # optional current referer
# recommended to save cookies_to_be_updated to your cookies.
 
# after process_request got called, you could use get_fbc and get_fbp to get the actual value
fbc = builder.get_fbc()
fbp = builder.get_fbp()
        
# Pass the fbc and fbp to the Conversions API

```

--------------------------------

### Preview Existing Ad Creative using Ruby SDK

Source: https://developers.facebook.com/docs/marketing-api/generatepreview/v17

This Ruby example shows how to preview an existing ad creative using the `facebook_ads` gem. It configures the SDK with your access token and app secret, then fetches the ad creative and its previews. Note that the `fields` parameter is empty in this example.

```ruby
require 'facebook_ads'

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_CREATIVE_ID>'

FacebookAds.configure do |config|
  config.access_token = access_token
  config.app_secret = app_secret
end

ad_creative = FacebookAds::AdCreative.get(id)
previewss = ad_creative.previews({
    fields: {  },
    ad_format: 'DESKTOP_FEED_STANDARD',
})

```

--------------------------------

### ClientParamsHelper API

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/client-side-onboarding

An add-on helper library for `paramBuilder`, supporting client-side and server-side integrations. It provides functions for collecting and decorating URLs with marketing parameters.

```APIDOC
## ClientParamsHelper

### Description
This helper library is an add-on expansion to better support `paramBuilder` (on either the server or client side). This helper supports five APIs: `collectParams`, `decorateUrl`, `collectAndSetParams`, `getFbc`, and `getFbp`.

### `collectParams()`

#### Description
Collects parameters from in-app-browsers, primarily focusing on click IDs. When `fbclid` or `fbc` are not present, it fetches a backup click ID.

#### Method
```
collectParams(): Promise<string>
```

#### Return Value
- A promise that resolves to the backup click ID string.

#### Usage Example
```javascript
(async() => {
	var clickID = await clientParamsHelper.collectParams();
})();
```

### `decorateUrl(existingUrl)`

#### Description
Collects parameters from in-app-browsers. If a backup click ID is available, it appends `fbclid` to the end of the input URL.

#### Method
```
decorateUrl(existingUrl: string): Promise<string>
```

#### Parameters
- **existingUrl** (string) - The URL that needs to be decorated.

#### Return Value
- A promise that resolves to the decorated URL string.

#### Example
- Input: `'https://test.com/example?utm=test'`
- Output: `'https://test.com/example?utm=test&fbclid=xxxxx'`

#### Usage Example
```javascript
var decoratedUrl = await clientParamsHelper.decorateUrl("https://myexample.com?utm=test");
// If integrating with server-side paramBuilder, send a fetch call to the integrated endpoint.
fetch(decoratedUrl)...
```

### `collectAndSetParams(cookieConsent)`

#### Description
Collects parameters from in-app-browsers, primarily focusing on click IDs. It saves the retrieved click ID into `fbc` and saves `fbp` cookies if they are not already available.

#### Method
```
collectAndSetParams(cookieConsent: boolean): Promise<any>
```

#### Parameters
- **cookieConsent** (boolean) - `true` if user cookie consent has been received and cookies can be saved; `false` otherwise.

#### Return Value
- A promise that resolves after saving `fbc` and `fbp` cookies if available.

#### Usage Example
```javascript
var savedCookie = await clientParamsHelper.collectAndSetParams(true);
```

### `getFbc()`

#### Description
Returns the `fbc` value from the cookie.

#### Method
```
getFbc(): string
```

#### Return Value
- The `fbc` string.

### `getFbp()`

#### Description
Returns the `fbp` value from the cookie.

#### Method
```
getFbp(): string
```

#### Return Value
- The `fbp` string.
```

--------------------------------

### Facebook Marketing API: Get Received Audience Sharing Requests

Source: https://developers.facebook.com/docs/marketing-api/business-asset-management/guides/share-custom-audiences

This example shows how to retrieve audience sharing requests received by a business using a GET request. It includes the necessary endpoint and fields to query, along with the structure of the response data, detailing initiator, recipient, and audience information.

```http
GET <BUSINESS_ID>/received_audience_sharing_requests?fields=custom_audiences,initiator,recipient,relationship_type,request_status,request_type
```

```json
{
    "data": [
        {
           "initiator": {
               "id": "<BUSINESS_ID>",
               "name": "business_name1"
            },
            "recipient": {
               "id": "<BUSINESS_ID>",
               "name": "business_name2"
            },
            "request_status": "IN_PROGRESS",
            "relationship_type": "[<relationship_type>]",
            "id": "<SHARING_RELATIONSHIP_ID>",
            "custom_audiences": [
                {
                    "id": "<CUSTOM_AUDIENCE_ID>",
                    "name": "<CUSTOM_AUDIENCE_NAME>",
                    "share_account_name": "<ACCOUNT_NAME>",
                    "share_account_id": "<ACCOUNT_ID>"
                }
            ]
         }
         ...
    ],
    "paging": {
        "cursors": {
            "before": "<CURSOR>",
            "after": "<CURSOR>"
        }
    }
}
```

--------------------------------

### Query Data Pipeline Variables JSON

Source: https://developers.facebook.com/docs/marketing-api/gateway-products/gateway-control-plane-api/setup-data-pipelines/data-pipelines

Example JSON object containing variables required for the DataPipelineQuery, specifying the tenant ID and the unique identifier for the data pipeline.

```json
{
  "tenantId": "IaoreXfj",
  "id": "sg_v1_pl_1a8c443d-9ace-440e-9eb7-147322344723"
}
```

--------------------------------

### Offline Conversions API

Source: https://developers.facebook.com/docs/marketing-api/real-estate-ads/get-started

Send offline conversion events to Facebook using the Offline Conversions API to track user actions that occur outside of the website or app.

```APIDOC
## Offline Conversions API

### Description
Allows you to send offline conversion events (e.g., purchases made in-store) to Facebook. This helps attribute these conversions to your Facebook ad campaigns by matching conversion data with users who saw or clicked your ads. This is typically done via the "Upload Offline Events" endpoint, requiring specific match keys and custom data.

### Match Keys
Match keys are used to compare a conversion event to a user. All values should be hashed using SHA-256.

| Key         | Description                                      |
|-------------|--------------------------------------------------|
| `email`     | Email address(es)                                |
| `phone`     | Phone number(s)                                  |
| `fn`        | First name                                       |
| `ln`        | Last name                                        |
| `madid`     | Apple or Android advertising ID                  |
| `zip`       | ZIP code(s)                                      |
| `ct`        | City                                             |
| `st`        | State                                            |
| `country`   | Country                                          |
| `dob`       | Date of birth (DD format)                        |
| `doby`      | Date of birth (YYYY format)                      |
| `gen`       | Gender                                           |
| `age`       | Age                                              |
| `lead_id`   | Lead ID of Marketplace leads                     |

### Custom Data
Custom data provides additional context for the conversion event.

| Field         | Description                                      |
|---------------|--------------------------------------------------|
| `content_ids` | `home_listing_id` from the catalog upload.       |
| `content_type`| Set to `APARTMENT`.                              |

### Request Example (Illustrative - Actual endpoint and structure may vary)
```json
{
  "event_name": "PURCHASE",
  "event_time": 1678886400,
  "user_data": {
    "email": "d431508c39086f719526f57a2323e624919433d58c051949f5856d3637a56331", // Hashed email
    "phone": "...", // Hashed phone
    "fn": "...", // Hashed first name
    "ln": "...", // Hashed last name
    "madid": "...", // Hashed mobile advertiser ID
    "zip": "...", // Hashed zip code
    "ct": "...", // Hashed city
    "st": "...", // Hashed state
    "country": "...", // Hashed country
    "dob": "...", // Hashed date of birth (DD)
    "doby": "...", // Hashed date of birth (YYYY)
    "gen": "...", // Hashed gender
    "age": "...", // Hashed age
    "lead_id": "..." // Marketplace lead ID
  },
  "custom_data": {
    "content_ids": ["YOUR_HOME_LISTING_ID"],
    "content_type": "APARTMENT",
    "value": 100.50,
    "currency": "USD"
  }
}
```

### Response
#### Success Response (200)
- **{:success: true}** - Indicates the event was received successfully.

#### Response Example
```json
{
  "{:success: true}": true
}
```
```

--------------------------------

### Send Events via Conversions API Gateway in PHP

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/using-the-api

Provides a complete PHP code example for initializing the SDK, configuring a CAPIGatewayIngressRequest, creating user data and events, and executing the request to send events asynchronously. Requires the Meta Business SDK for PHP and a logger.

```php
$api = Api::init(null, null, $this->access_token);
$api->setLogger(new CurlLogger());
$event_request = new EventRequest($this->pixel_id);
$capiIngressRequest = new CAPIGatewayIngressRequest($this->cb_url, $this->access_key);
$event_request->setCustomEndpoint($capiIngressRequest);
$user_data = (new UserData())
   ->setEmails(array('joe@eg.com'))
   ->setPhones(array('12345678901', '14251234567'))
   ->setFbc('fb.1.1554763741205.AbCdEfGhIjKlMnOpQrStUvWxYz1234567890')
   ->setFbp('fb.1.1558571054389.1098115397');
$event1 = (new Event())
   ->setEventName('Purchase')
   ->setEventId('125')
   ->setEventTime(time())
   ->setEventSourceUrl('http://jaspers-market.com/product/123')
   ->setUserData($user_data);
$events = array($event1, $event2);
$event_request->setEvents($events);
$response = $event_request->execute();
print($response->__toString());
```

--------------------------------

### Create App Installs Campaign - Java SDK

Source: https://developers.facebook.com/docs/marketing-api/mobile-app-ads

This Java code snippet shows how to create an app install campaign using the Facebook Ads SDK for Java. It initializes the API context and then uses the AdAccount object to set campaign details like name, objective, and status.

```java
import com.facebook.ads.sdk.*;
import java.io.File;
import java.util.Arrays;

public class SAMPLE_CODE_EXAMPLE {
  public static void main (String args[]) throws APIException {

    String access_token = "<ACCESS_TOKEN>";
    String app_secret = "<APP_SECRET>";
    String app_id = "<APP_ID>";
    String id = "<AD_ACCOUNT_ID>";
    APIContext context = new APIContext(access_token).enableDebug(true);

    new AdAccount(id, context).createCampaign()
      .setName("App Installs Campaign with Dynamic Product Ads")
      .setObjective(Campaign.EnumObjective.VALUE_OUTCOME_APP_PROMOTION)
      .setStatus(Campaign.EnumStatus.VALUE_PAUSED)
      .setParam("special_ad_categories", "[]")
      .execute();

  }
}
```

--------------------------------

### POST /act_<AD_ACCOUNT_ID>/ads

Source: https://developers.facebook.com/docs/marketing-api/flexible-ad-format

Create an ad using the flexible ad format by providing multiple creative assets within the `creative_asset_groups_spec`. This allows for multi-asset creative automation.

```APIDOC
## POST /act_<AD_ACCOUNT_ID>/ads

### Description
Creates an ad using the flexible ad format, enabling multi-asset creative automation by grouping related assets. Supports `OUTCOME_SALES` and `OUTCOME_APP_PROMOTION` campaign objectives.

### Method
POST

### Endpoint
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads

### Parameters
#### Path Parameters
- **AD_ACCOUNT_ID** (string) - Required - Your Facebook Ads account ID.

#### Query Parameters
- **access_token** (string) - Required - Your Facebook API access token.

#### Request Body
- **adset_id** (string) - Required - The ID of the ad set to which the ad will be added.
- **creative** (object) - Required - The creative specification for the ad. See [Ad Creative documentation](https://developers.facebook.com/docs/marketing-api/reference/ad/creative).
- **creative_asset_groups_spec** (object) - Required - Specifies the creative assets to be grouped for the flexible ad format. Each group must have at least one image or video, and all call_to_action types must be the same within a group. There can be a maximum of 5 texts per text_type.
  - **groups** (array) - List of creative asset groups.
    - **images** (array) - List of image objects. Each object must contain a `hash`.
    - **videos** (array) - List of video objects. Each object must contain a `video_id`.
    - **texts** (array) - List of text objects, each with a `text` and `text_type` (e.g., `primary_text`, `headline`).
    - **call_to_action** (object) - The call to action for the ad group. Requires a `type` and a `value` object containing a `link`.
- **status** (string) - Optional - The status of the ad (e.g., `PAUSED`, `ACTIVE`).

### Request Example
```json
{
  "adset_id": "<ADSET_ID>",
  "creative": {
    "name": "Sample Creative",
    "object_story_spec": { ... }
  },
  "creative_asset_groups_spec": {
    "groups": [
      {
        "images": [
          { "hash": "<IMAGE_HASH_1>" },
          { "hash": "<IMAGE_HASH_2>" }
        ],
        "videos": [
          { "video_id": "<VIDEO_ID_1>" },
          { "video_id": "<VIDEO_ID_2>" }
        ],
        "texts": [
          { "text": "Summer Sale", "text_type": "primary_text" },
          { "text": "Everything 50% Off", "text_type": "headline" }
        ],
        "call_to_action": {
          "type": "LEARN_MORE",
          "value": { "link": "https://www.example.com/" }
        }
      }
    ]
  },
  "status": "PAUSED"
}
```

### Response
#### Success Response (200)
- **id** (string) - The ID of the created ad.
- **creative_asset_groups_spec** (object) - The creative asset groups specification for the ad.

#### Response Example
```json
{
  "creative_asset_groups_spec": {
    "groups": [
      {
        "images": [
          { "hash": "<IMAGE_HASH_1>" },
          { "hash": "<IMAGE_HASH_2>" }
        ],
        "texts": [
          { "text": "Summer Sale", "text_type": "primary_text" },
          { "text": "Everything 50% off", "text_type": "headline" }
        ],
        "videos": [
          { "video_id": "<VIDEO_ID_1>", "image_hash": "<VIDEO_THUMBNAIL_HASH_1>" },
          { "video_id": "<VIDEO_ID_2>", "image_hash": "<VIDEO_THUMBNAIL_HASH_2>" }
        ],
        "group_uuid": "<GROUP_ID>"
      }
    ]
  },
  "id": "<AD_ID>"
}
```
```

--------------------------------

### Get Threads Account ID (cURL)

Source: https://developers.facebook.com/docs/marketing-api/ad-creative/threads-ads

This example shows how to retrieve the Threads account ID associated with an Instagram account using a GET request to the Facebook Graph API. It requires an access token and specific fields to be requested. The API returns a Threads account object including the `threads_user_id` or an empty response if no account exists.

```curl
curl -G \
  -d "access_token=<ACCESS_TOKEN>"\
  -d "fields=threads_user_id" \
"https://graph.facebook.com/v24.0/<IG_USER_ID>/instagram_backed_threads_user"
```

--------------------------------

### Create Desktop App Install Video Ad (cURL)

Source: https://developers.facebook.com/docs/marketing-api/mobile-app-ads

Uploads a video for a desktop app install ad. This differs from mobile by using a 'PLAY_GAME' call to action and potentially different thumbnail paths. Requires page ID, thumbnail path, video path, and access token.

```curl
curl \
  -F 'name=My Video' \
  -F 'message=Check out this app!' \
  -F 'thumbnail=<THUMBNAIL_PATH>' \
  -F 'published=0' \
  -F 'call_to_action={"type":"PLAY_GAME","value":{"link":"<THUMBNAIL_PATH>"}}' \
  -F 'source=@<VIDEO_PATH>' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/<PAGE_ID>/videos
```

--------------------------------

### Python SDK Example for Creating an Ad

Source: https://developers.facebook.com/docs/marketing-api/guides/local-awareness

Example code using the Python SDK to create an ad for event ticket sales.

```APIDOC
## Python SDK Example

### Description
This code snippet demonstrates how to create an ad using the Python SDK for optimizing event ticket sales.

### Code
```python
from facebook_business.adobjects.adaccount import AdAccount
from facebook_business.adobjects.ad import Ad
from facebook_business.api import FacebookAdsApi

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_ACCOUNT_ID>'
FacebookAdsApi.init(access_token=access_token)

fields = [
]
params = {
  'name': 'My Ad',
  'adset_id': '<adSetID>',
  'creative': {'creative_id':'<adCreativeID>'},
  'status': 'PAUSED',
}
print AdAccount(id).create_ad(
  fields=fields,
  params=params,
)
```
```

--------------------------------

### ETags Examples

Source: https://developers.facebook.com/docs/marketing-api/asyncrequests

Examples demonstrating how to use ETags for checking changes in ad accounts and ads using `curl`.

```APIDOC
## Etags Examples

### Example 1: Check if user's ad accounts have changed

**Step 1**: Determine the ETag for the current data

```bash
curl -i "https://graph.beta.facebook.com/me/adaccounts?access_token=___"
```

**Response Header (includes ETag):**

```
HTTP/1.1 200 OK
...
ETag: "7776cdb01f44354af8bfa4db0c56eebcb1378975"
...
```

**Step 2**: Determine if there have been any changes to the data

```bash
curl -i -H "If-None-Match: \"7776cdb01f44354af8bfa4db0c56eebcb1378975\"" "https://graph.beta.facebook.com/me/adaccounts?access_token=___"
```

**Response if no changes:**

```
HTTP/1.1 304 Not Modified
...
```

### Example 2: Batch request to check if user's ads have changed

**Step 1**: Determine the ETags for the current data

```bash
curl -i -F 'access_token=___' -F 'batch=[
  {"method":"GET", "relative_url": "?ids=6003356308839,6004164369439" },
  {"method":"GET", "relative_url": "act_12345678/ads?campaign_ids=[6003356307839, 6004164259439]"}]
' https://graph.facebook.com
```

**Response (includes ETags):**

```
...{"name":"ETag","value":"\"21d371640127490b2ed0387e8af3f0f8c9eff012\""}...
...{"name":"ETag","value":"\"410e53bb257f116e8716e4ebcc76df1c567b87f4\""}...
```

**Step 2**: Determine if there have been any changes to the data

```bash
curl -F 'access_token=___' -F 'batch=[
  {"method":"GET", "headers":["If-None-Match: \"21d371640127490b2ed0387e8af3f0f8c9eff012\""], "relative_url": "?ids=6003356308839,6004164369439" },
  {"method":"GET",  "headers":["If-None-Match: \"410e53bb257f116e8716e4ebcc76df1c567b87f4\""], "relative_url": "act_12345678/ads?campaign_ids=[6003356307839, 6004164259439]"}]
' https://graph.facebook.com
```

**Response if no changes:**

```json
[
    {
        "code": 304,
        ...
        "body": null
    },
    {
        "code": 304,
        ...
        "body": null
    }
]
```
```

--------------------------------

### Start Chunked Video Upload (cURL)

Source: https://developers.facebook.com/docs/marketing-api/business-creative-asset-management/get-started

Initiates a video upload session for large videos. This POST request to the Marketing API requires parameters such as `upload_phase` set to 'start', `file_size`, and video details. It returns an `upload_session_id` for subsequent transfers.

```bash
curl -X POST \
  -F 'title={video-name}' \
  -F 'creative_folder_id={business-creative-folder-id}' \
  -F 'access_token={access-token}' \
  -F 'upload_phase=start' \
  -F 'file_size={video_file_size_in_bytes}' \
  https://graph-video.facebook.com/<API_VERSION>/<BUSINESS_ID>/videos
```

--------------------------------

### Read Ad Account Tracking (HTTP)

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-account/tracking

Example of making an HTTP GET request to retrieve ad account tracking information. This is a basic request to the specified API endpoint.

```http
GET /v24.0/{ad-account-id}/tracking HTTP/1.1
Host: graph.facebook.com
```

--------------------------------

### POST /campaigns

Source: https://developers.facebook.com/docs/marketing-api/mobile-app-ads

Creates a new campaign for app installs using dynamic product ads. This is the first step in setting up an Advantage+ Catalog Ads campaign for mobile app installations.

```APIDOC
## POST /campaigns

### Description
Creates a new campaign for app installs using dynamic product ads. This is the first step in setting up an Advantage+ Catalog Ads campaign for mobile app installations.

### Method
POST

### Endpoint
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/campaigns

### Parameters
#### Path Parameters
- **AD_ACCOUNT_ID** (string) - Required - The ID of the ad account.

#### Query Parameters
None

#### Request Body
- **name** (string) - Required - The name of the campaign.
- **objective** (string) - Required - The objective of the campaign. For app installs, use 'OUTCOME_APP_PROMOTION'.
- **status** (string) - Optional - The status of the campaign. Examples: 'PAUSED', 'ACTIVE'.
- **special_ad_categories** (array) - Optional - An array of special ad categories if applicable.
- **is_adset_budget_sharing_enabled** (boolean) - Optional - Whether ad set budget sharing is enabled.
- **access_token** (string) - Required - Your Facebook API access token.

### Request Example
```json
{
  "name": "App Installs Campaign with Dynamic Product Ads",
  "objective": "OUTCOME_APP_PROMOTION",
  "status": "PAUSED",
  "special_ad_categories": [],
  "is_adset_budget_sharing_enabled": 0,
  "access_token": "<ACCESS_TOKEN>"
}
```

### Response
#### Success Response (200)
- **id** (string) - The ID of the created campaign.
- **name** (string) - The name of the created campaign.

#### Response Example
```json
{
  "id": "1234567890",
  "name": "App Installs Campaign with Dynamic Product Ads"
}
```
```

--------------------------------

### Read Ad Account Advertisable Applications (JavaScript SDK)

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-account/advertisable_applications

This JavaScript SDK example shows how to call the API to get advertisable applications. The response is handled in a callback function, where you can process the data or check for errors.

```javascript
/* make the API call */
FB.api(
    "/{ad-account-id}/advertisable_applications",
    function (response) {
      if (response && !response.error) {
        /* handle the result */
      }
    }
);
```

--------------------------------

### Create Hotel Set using Node.js SDK

Source: https://developers.facebook.com/docs/marketing-api/dynamic-ads-for-hotels/catalog

This Node.js example shows how to create a hotel set using the Facebook Business SDK. It initializes the API and defines parameters for the new product set, including a brand filter.

```javascript
'use strict';
const bizSdk = require('facebook-nodejs-business-sdk');
const ProductCatalog = bizSdk.ProductCatalog;
const ProductSet = bizSdk.ProductSet;

const access_token = '<ACCESS_TOKEN>';
const app_secret = '<APP_SECRET>';
const app_id = '<APP_ID>';
const id = '<PRODUCT_CATALOG_ID>';
const api = bizSdk.FacebookAdsApi.init(access_token);
const showDebugingInfo = true; // Setting this to true shows more debugging info.
if (showDebugingInfo) {
  api.setDebug(true);
}

const logApiCallResult = (apiCallName, data) => {
  console.log(apiCallName);
  if (showDebugingInfo) {
    console.log('Data:' + JSON.stringify(data));
  }
};

let fields, params;
fields = [
];
params = {
  'name' : 'Test Hotel Set',
  'filter' : {'brand':{'i_contains':'sample brand'}},
};
const product_sets = (new ProductCatalog(id)).createProductSet(
  fields,
  params
);
logApiCallResult('product_sets api call complete.', product_sets);

```

--------------------------------

### Retrieve Custom Audiences (PHP SDK)

Source: https://developers.facebook.com/docs/marketing-api/dynamic-product-ads/product-audiences

Example of retrieving Custom Audiences using the Facebook PHP SDK. This snippet shows the setup and the call to fetch audience data.

```APIDOC
## GET /customaudiences (PHP SDK)

### Description
Demonstrates how to retrieve Custom Audiences using the Facebook PHP SDK, including API initialization and fetching the response content.

### Method
GET (via SDK)

### Endpoint
(Internal SDK method that maps to the Graph API endpoint)

### Parameters
#### Path Parameters
- **id** (string) - Required - The Ad Account ID.

#### Query Parameters
- **fields** (array of strings) - Required - List of fields to retrieve (e.g., ['data_source', 'subtype']).
- **params** (array) - Optional - Additional parameters for the API call.

### Request Example
```php
require __DIR__ . '/vendor/autoload.php';

use FacebookAds\Object\AdAccount;
use FacebookAds\Object\CustomAudience;
use FacebookAds\Api;
use FacebookAds\Logger\CurlLogger;

$access_token = '<ACCESS_TOKEN>';
$app_secret = '<APP_SECRET>';
$app_id = '<APP_ID>';
$id = '<AD_ACCOUNT_ID>';

$api = Api::init($app_id, $app_secret, $access_token);
$api->setLogger(new CurlLogger());

$fields = array(
  'data_source',
  'subtype',
);
$params = array(
);
echo json_encode((new AdAccount($id))->getCustomAudiences(
  $fields,
  $params
)->getResponse()->getContent(), JSON_PRETTY_PRINT);
```

### Response
#### Success Response (200)
- The `getResponse()->getContent()` method returns the JSON string of the API response.

#### Response Example
```json
{
  "data": [
    {
      "data_source": "...",
      "subtype": "..."
    }
  ]
}
```
```

--------------------------------

### Create Video Views Campaign using Ruby SDK

Source: https://developers.facebook.com/docs/marketing-api/bidding/guides/cost-per-action-ads

This Ruby example shows how to create a video views campaign using the Facebook Ads Ruby gem. It configures the SDK with your access token and app secret, then retrieves the ad account and creates a campaign with the specified parameters.

```ruby
require 'facebook_ads'

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_ACCOUNT_ID>'

FacebookAds.configure do |config|
  config.access_token = access_token
  config.app_secret = app_secret
end

ad_account = FacebookAds::AdAccount.get(id)
campaigns = ad_account.campaigns.create({
    name: 'Video Views campaign',
    objective: 'OUTCOME_ENGAGEMENT',
    status: 'PAUSED',
    special_ad_categories: [],
})

```

--------------------------------

### Deep Link Setup

Source: https://developers.facebook.com/docs/marketing-api/mobile-app-ads

Information on setting up deep links for mobile app ads. This includes prerequisites like app setup for deep links and necessary permissions, along with sample code for specifying deep links in call-to-actions and validating them.

```APIDOC
## Deep Links

### Description
This section provides guidance on setting up and using deep links within Facebook ads to direct users to specific content within a mobile application.

### Before You Start
- Ensure your mobile application is configured to handle deep links.
- You need the `pages_manage_ads` permission.
- A Page access token is required, obtained by a person with the `ADVERTISE` task on the Page.
- If your app supports app links, you will need the app link URL.

### Sample Code for Call to Action
```
"call_to_action={'type':'LEARN_MORE', 'value':{'link':'https://itunes.apple.com/us/app/facebook/id284882215', 'app_link':'facebook://path/to/page'}}"
```

### Validating App Links
Before specifying an app link in your ad creative, it's recommended to validate that Facebook has successfully scraped it. You can do this by calling the following endpoint:

### Endpoint
`https://graph.facebook.com/v24.0/?type=og&scrape=true&id=<APP_LINK>`

### Request Example
`https://graph.facebook.com/v24.0/?type=og&scrape=true&id=facebook://path/to/page`

### Response
#### Success Response (200)
Indicates successful scraping or provides details about the scraped Open Graph data.

#### Response Example
```json
{
  "og_object": {
    "id": "<SCRAPED_ID>",
    "title": "Facebook",
    "type": "article",
    "url": "https://itunes.apple.com/us/app/facebook/id284882215"
  },
  "url": "facebook://path/to/page"
}
```
```

--------------------------------

### Get Event Statistics (Ruby SDK)

Source: https://developers.facebook.com/docs/marketing-api/catalog/guides/cat-signals-quality

Retrieve event statistics for a product catalog using the Facebook Ads Ruby gem. This example requires authentication configuration and the product catalog ID.

```ruby
require 'facebook_ads'

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<PRODUCT_CATALOG_ID>'

FacebookAds.configure do |config|
  config.access_token = access_token
  config.app_secret = app_secret
end

product_catalog = FacebookAds::ProductCatalog.get(id)
event_statss = product_catalog.event_stats({
    fields: {  },
})
```

--------------------------------

### Graph API GET Request for Offsite Signal Container Business Objects

Source: https://developers.facebook.com/docs/marketing-api/reference/business/client_offsite_signal_container_business_objects

This is a raw HTTP GET request example for retrieving Business Client Offsite Signal Container Business Objects using the Meta Graph API. It specifies the API version and the endpoint. This format is useful for understanding the underlying API calls or when not using an SDK.

```http
GET /v24.0/{business-id}/client_offsite_signal_container_business_objects HTTP/1.1
Host: graph.facebook.com
```

--------------------------------

### Create Video Views Campaign using Python SDK

Source: https://developers.facebook.com/docs/marketing-api/bidding/guides/cost-per-action-ads

This Python example shows the creation of a video views campaign via the Facebook Marketing API. It initializes the API with your credentials and then calls the create_campaign method on an AdAccount object with the specified parameters.

```python
from facebook_business.adobjects.adaccount import AdAccount
from facebook_business.adobjects.campaign import Campaign
from facebook_business.api import FacebookAdsApi

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_ACCOUNT_ID>'
FacebookAdsApi.init(access_token=access_token)

fields = [
]
params = {
  'name': 'Video Views campaign',
  'objective': 'OUTCOME_ENGAGEMENT',
  'status': 'PAUSED',
  'special_ad_categories': [],
}
print AdAccount(id).create_campaign(
  fields=fields,
  params=params,
)

```

--------------------------------

### Sending Content IDs with 'content_ids' Parameter

Source: https://developers.facebook.com/docs/marketing-api/best-practices/omni-optimal-setup-guide

This example demonstrates sending specific content IDs for products or product groups using the 'content_ids' parameter. The provided IDs must exactly match those in your product catalog. This method is an alternative to the 'contents' parameter.

```json
{
  "content_type": "product",
  "content_ids": ["123", "456"]
}
```

--------------------------------

### Conversions API - Using the API

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/guides/gateway-multiple-accounts

Details on how to use the Conversions API, including request formats, parameters, and best practices for sending events.

```APIDOC
## Using the Conversions API

### Description
This section covers the practical aspects of integrating the Conversions API into your systems. It explains how to format event data and send it to Meta's servers.

### Key Topics
*   **Event Parameters:** Understand the required and optional parameters for different event types (e.g., Purchase, Lead, Add to Cart).
*   **Payload Structure:** Learn the correct JSON structure for your event payloads.
*   **API Endpoints:** Information on the specific endpoints to use for sending events.
*   **Best Practices:** Recommendations for optimizing event delivery and data quality.

### Resources
*   **Parameters:** Detailed list of all available parameters.
*   **Payload Helper:** Tools to assist in constructing correct payloads.
```

--------------------------------

### Read Business Extended Credits (Objective-C)

Source: https://developers.facebook.com/docs/marketing-api/reference/business/extendedcredits

Fetches extended credit details for a business via the Facebook SDK for Objective-C. This example shows how to initialize and start a Graph API request.

```Objective-C
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
    initWithGraphPath:@"/BUSINESS-ID/extendedcredits"
           parameters:nil
           HTTPMethod:@"GET"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection, id result, NSError *error) {
    // Insert your code here
}];
```

--------------------------------

### Create Product Audience - iOS SDK

Source: https://developers.facebook.com/docs/marketing-api/adaccount

This iOS SDK example shows how to create a product audience. It constructs a dictionary of parameters including name, product set ID, and inclusion/exclusion rules. A `FBSDKGraphRequest` is created and started with a completion handler to process the API response.

```objectivec
NSDictionary *params = @{
  @"name": @"Test Iphone Product Audience",
  @"product_set_id": @"<PRODUCT_SET_ID>",
  @"inclusions": @"[\"{\"retention_seconds\":86400,\"rule\":{\"and\":[{\"event\":{\"eq\":\"AddToCart\"}},{\"userAgent\":{\"i_contains\":\"iPhone\"}}]}}]",
  @"exclusions": @"[\"{\"retention_seconds\":172800,\"rule\":{\"event\":{\"eq\":\"Purchase\"}}}]",
};
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/act_<AD_ACCOUNT_ID>/product_audiences"
                                      parameters:params
                                      HTTPMethod:@"POST"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];
```

--------------------------------

### Create Ad Set Example - Facebook Marketing API

Source: https://developers.facebook.com/docs/marketing-api/guides/advantage-shopping-campaigns

This snippet illustrates creating an ad set for an Advantage+ Shopping Campaign via the Facebook Marketing API. It includes targeting, bidding, and placement configurations.

```json
{
  "name": "ASC Ad Set",
  "campaign_id": "CAMPAIGN_ID",
  "optimization_goal": "OFFSITE_CONVERSIONS",
  "billing_event": "IMPRESSIONS",
  "bid_strategy": "LOWEST_COST_WITHOUT_CAP",
  "status": "PAUSED",
  "promoted_object": {
    "pixel_id": "PIXEL_ID",
    "custom_event_type": "PURCHASE"
  },
  "targeting": {
    "geo_locations": {
      "countries": ["US"]
    }
  },
  "access_token": "YOUR_ACCESS_TOKEN"
}
```

--------------------------------

### Retrieve Objectives

Source: https://developers.facebook.com/docs/marketing-api/guides/lift-studies

You can read the objectives that were created for a study by making a GET call to the study's `objectives` edge. Note that 'buyers' metrics are only available for studies started before 7/13/2021.

```APIDOC
## GET /<API_VERSION>/<STUDY_OBJECTIVE_ID>

### Description
Retrieves the objectives defined for a study.

### Method
GET

### Endpoint
`https://graph.facebook.com/<API_VERSION>/<STUDY_OBJECTIVE_ID>`

### Parameters
#### Query Parameters
- **access_token** (string) - Required - Your Facebook API access token.
- **fields** (string) - Required - Specifies the fields to retrieve. Use `results` to get objective results.
- **breakdowns** (array) - Optional - Specifies breakdowns to apply to the results. Use `["cell_id"]` for cell-level results.

### Request Example
```bash
curl -G \
  -d 'access_token=<ACCESS_TOKEN>' \
  'https://graph.facebook.com/<API_VERSION>/<STUDY_OBJECTIVE_ID>?fields=results&breakdowns=["cell_id"]'
```

### Response
#### Success Response (200)
- **results** (array) - An array containing the objective results. The structure of the objects within this array depends on whether 'buyers' metrics are available.
- **id** (string) - The ID of the objective.

#### Response Example (With Buyers Metrics)
```json
{
  "results": [
    "{\"cell_id\":\"<cell_id>\",\n\"population_test\":2334212,\n\"population_control\":123407,\n\"population_reached\":1862084,\n\"impressions\":19020874,\n\"spend\":26059,\n\"buyers_control_raw_scaled\":37672.615701199,\n\"buyers_exposed\":30085.482427228,\n\"buyers_frequentist_pValue\":0.00064950107027983,\n\"conversions_control_raw_scaled\":110918.27003534,\n\"conversions_exposed\":86961.044050743,\n\"conversions_raw_pValue\":0.12863848309723,\n\"conversions_test\":104412.89695396,\n\"conversions_control_scaled\":104575.81331581,\n\"conversions_incremental\":-162.91636184894,\n\"conversions_notExposed\":87123.960412592,\n\"conversions_confidence\":0.69291721817069,\n\"conversions_multicell_confidence\":null,\n\"conversions_incremental_lower\":-3470.6251396487,\n\"conversions_incremental_upper\":3235.0644420632,\n\"conversions_multicell_rank\":null,\n\"conversions_incremental_share\":-0.001873440730011,\n\"conversions_CPiC\":-159.95324044961,\n\"buyers_test\":40732.369934386,\n\"buyers_control_scaled\":41990.129061459,\n\"buyers_incremental\":-1257.7591270729,\n\"buyers_notExposed\":36617.935710157,\n\"buyers_confidence\":0.19318944031404,\n\"buyers_multicell_confidence\":null,\n\"buyers_incremental_lower\":-2905.5296282828,\n\"buyers_incremental_upper\":426.25813050358,\n\"buyers_multicell_rank\":null,\n\"buyers_incremental_share\":-0.041806181107957,\n\"buyers_CPiB\":-20.718593440578}"
  ],
  "id": "<objective_id>"
}
```

#### Response Example (Without Buyers Metrics)
```json
{
  "results": [
    "{\"cell_id\":\"<cell_id>\",\n\"population_test\":2334212,\n\"population_control\":123407,\n\"population_reached\":1862084,\n\"impressions\":19020874,\n\"spend\":26059,\n\"conversions_control_raw_scaled\":110918.27003534,\n\"conversions_exposed\":86961.044050743,\n\"conversions_raw_pValue\":0.12863848309723,\n\"conversions_test\":104412.89695396,\n\"conversions_control_scaled\":104575.81331581,\n\"conversions_incremental\":-162.91636184894,\n\"conversions_notExposed\":87123.960412592,\n\"conversions_confidence\":0.69291721817069,\n\"conversions_multicell_confidence\":null,\n\"conversions_incremental_lower\":-3470.6251396487,\n\"conversions_incremental_upper\":3235.0644420632,\n\"conversions_multicell_rank\":null,\n\"conversions_incremental_share\":-0.001873440730011,\n\"conversions_CPiC\":-159.95324044961}"
  ],
  "id": "<objective_id>"
}
```
```

--------------------------------

### Ad Creative Create Example

Source: https://developers.facebook.com/docs/marketing-api/ad-creative/messaging-ads/click-to-whatsapp

Provides a comprehensive example using `curl` to create a standard ad creative. This example demonstrates how to structure the request body, including page ID, link data, welcome message, and call to action for WhatsApp.

```APIDOC
## Ad Creative Create Example

### Description
An example of creating an ad creative via the Facebook Marketing API, specifying details for a WhatsApp message link.

### Method
POST

### Endpoint
`https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives`

### Parameters
#### Path Parameters
- **AD_ACCOUNT_ID** (string) - Required - The ID of the ad account.

#### Query Parameters
None

#### Request Body
- **name** (string) - Required - Name of the ad creative.
- **object_story_spec** (object) - Required - Specification for the ad creative's story.
  - **page_id** (string) - Required - The ID of the Facebook page. Use `<PAGE_ID>` as a placeholder.
  - **link_data** (object) - Required - Data for the link.
    - **name** (string) - Required - The headline for the ad. Use `<AD_HEADLINE>` as a placeholder.
    - **message** (string) - Required - The primary text of the ad. Use `<AD_PRIMARY_TEXT>` as a placeholder.
    - **description** (string) - Optional - Description for the ad. Use `<AD_DESCRIPTION>` as a placeholder.
    - **image_hash** (string) - Required - Hash of the image to be used. Use `<IMAGE_HASH>` as a placeholder.
    - **link** (string) - Required - The link URL (e.g., "https://api.whatsapp.com/send").
    - **page_welcome_message** (string) - Required - Placeholder for the page welcome message configuration. Use `<PAGE_WELCOME_MESSAGE>` as a placeholder. This should be a JSON string representing the welcome message configuration.
    - **call_to_action** (object) - Required - Configuration for the call to action.
      - **type** (string) - WHATSAPP_MESSAGE - Specifies the CTA type.
      - **value** (object) - Required - Value for the CTA.
        - **app_destination** (string) - WHATSAPP - The destination application.
- **degrees_of_freedom_spec** (object) - Optional - Specifies creative enhancements.
  - **creative_features_spec** (object) - Optional.
    - **standard_enhancements** (object) - Optional.
      - **enroll_status** (string) - OPT_IN - Enrollment status for standard enhancements.

### Request Example
```bash
curl -X POST \
  -H "Content-Type: application/json" \
  -d '{
        "name": "Sample ad creative",
        "object_story_spec": {
          "page_id": "<PAGE_ID>",
          "link_data": {
            "name": "<AD_HEADLINE>",
            "message": "<AD_PRIMARY_TEXT>",
            "description": "<AD_DESCRIPTION>",
            "image_hash": "<IMAGE_HASH>",
            "link": "https://api.whatsapp.com/send",
            "page_welcome_message": "<PAGE_WELCOME_MESSAGE>",
            "call_to_action": {
              "type": "WHATSAPP_MESSAGE",
              "value": {
                "app_destination": "WHATSAPP"
              }
            }
          }
        },
        "degrees_of_freedom_spec": {
          "creative_features_spec": {
            "standard_enhancements": {
              "enroll_status": "OPT_IN"
            }
          }
        }
      }' \
"https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives"
```

### Response
#### Success Response (200)
On success, your app receives a JSON response with the ID of your newly created ad creative.
- **id** (string) - The ID of the created ad creative. Use `<AD_CREATIVE_ID>` as a placeholder.

#### Response Example
```json
{
  "id": "<AD_CREATIVE_ID>"
}
```
```

--------------------------------

### Generate Ad Preview with Python SDK

Source: https://developers.facebook.com/docs/marketing-api/dynamic-ads-for-travel/catalog

This Python example demonstrates generating an ad preview using the Facebook Marketing API. It requires the `facebook-business` library and your Facebook App credentials.

```python
from facebook_business.adobjects.adcreative import AdCreative
from facebook_business.adobjects.adpreview import AdPreview
from facebook_business.api import FacebookAdsApi

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_CREATIVE_ID>'
FacebookAdsApi.init(access_token=access_token)

fields = [
]
params = {
  'ad_format': 'DESKTOP_FEED_STANDARD',
  'product_item_ids': ['<productItemID>'],
}
print AdCreative(id).get_previews(
  fields=fields,
  params=params,
)
```

--------------------------------

### Conversions API Guides - Conversions API for Google Tag Manager

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/guides/gateway/troubleshooting

Guidance on using the Conversions API in conjunction with Google Tag Manager.

```APIDOC
## Conversions API Guides - Conversions API for Google Tag Manager

### Description
This document explains how to configure and implement the Conversions API using Google Tag Manager for server-side event tracking.

### Method
N/A

### Endpoint
N/A

### Parameters
N/A

### Request Example
N/A

### Response
N/A
```

--------------------------------

### Get Custom Audience Details (Java)

Source: https://developers.facebook.com/docs/marketing-api/facebook-pixel/website-custom-audiences

This Java code example shows how to retrieve custom audience data using the Facebook Ads SDK. It specifies the fields to be requested.

```APIDOC
## GET /custom_audience/{id}

### Description
Retrieves details for a specific custom audience.

### Method
GET

### Endpoint
/custom_audience/{id}

### Parameters
#### Path Parameters
- **id** (string) - Required - The ID of the custom audience.

#### Query Parameters
- **requestNameField()** - Optional - Request the 'name' field.
- **requestRuleField()** - Optional - Request the 'rule' field.

### Request Example
```java
import com.facebook.ads.sdk.*;
import java.io.File;
import java.util.Arrays;

public class SAMPLE_CODE_EXAMPLE {
  public static void main (String args[]) throws APIException {

    String access_token = "<ACCESS_TOKEN>";
    String app_secret = "<APP_SECRET>";
    String app_id = "<APP_ID>";
    String id = "<CUSTOM_AUDIENCE_ID>";
    APIContext context = new APIContext(access_token).enableDebug(true);

    new CustomAudience(id, context).get()
      .requestNameField()
      .requestRuleField()
      .execute();

  }
}
```

### Response
#### Success Response (200)
- **name** (string) - The name of the custom audience.
- **rule** (string) - The rule defining the custom audience.
- **id** (string) - The ID of the custom audience.

#### Response Example
```json
{
  "name": "My WCA", 
  "rule": "{\"and\": [\n\t\t{\"url\": {\"i_contains\": \"shoes\"}},\n\t\t{\"url\": {\"i_contains\": \"red\"}}]}", 
  "id": "1234567890"
}
```
```

--------------------------------

### Create Ad Campaign

Source: https://developers.facebook.com/docs/marketing-api/using-the-api/faq

Instructions for creating a new ad campaign using the Marketing API.

```APIDOC
## POST /act_<AD_ACCOUNT_ID>/campaigns

### Description
To create a campaign, send a `POST` request to the `/act_<AD_ACCOUNT_ID>/campaigns` endpoint with parameters such as `name`, `objective`, and `status`.

See [Create an Ad Campaign](https://developers.facebook.com/docs/marketing-api/reference/ad-campaign/create) for more information.
```

--------------------------------

### Product Variants

Source: https://developers.facebook.com/docs/marketing-api/catalog/guides/product-variants

This section explains how to create product variants by grouping multiple products under the same `item_group_id`. It details the requirements for populating variant fields and provides examples of correct and incorrect product setup.

```APIDOC
## Product Variants

### Description
Product variants are created by adding multiple products grouped by the same `item_group_id` field. This field typically corresponds to the parent SKU, although you can use any other ID to group variants together.

All variants for a given product `item_group_id` **must have populated every variant field** (for example, size, color, gender, and pattern). For custom variants, you can use the `additional_variant_attribute` field.

Make sure the `item_group_id` has the same value across all sizes and colors, and that images and external links match the color of the item.

### Incorrect Example

```
ID | Name | Color | Price | item_group_id
---|---|---|---|---
CoolShirt123 | Cool shirt (parent) | | $9.99 | CoolShirt123
CoolShirt123_red | Cool Shirt - Red | red | $9.99 | CoolShirt123
CoolShirt123_blue | Cool Shirt - Blue | blue | $9.99 | CoolShirt123
```

### Correct Example

```
ID | Name | Color | Price | item_group_id
---|---|---|---|---
CoolShirt123_red | Cool Shirt | red | $9.99 | CoolShirt123
CoolShirt123_blue | Cool Shirt | blue | $9.99 | CoolShirt123
```

### Reference
For details about the fields, see Reference.
```

--------------------------------

### Advantage+ Creative for Catalog Setup

Source: https://developers.facebook.com/docs/marketing-api/advantage-creative-for-catalog

This section details how to configure Advantage+ Creative for Catalog by providing specific parameters in your API call during the ad creative setup phase.

```APIDOC
## Step 3: Provide Ad Creative

To enable Advantage+ creative for catalog, you need to specify `FORMAT_AUTOMATION` as the `optimization_type` within your `asset_feed_spec` during the creative setup.

### Required Fields
Your API call must include the following fields:

*   `product_set_id`
*   `template_data`
*   `asset_feed_spec`

### `product_set_id`

*   **Description**: The ID of the product set to be used. A product set is a curated group of items from your product catalog for use in Advantage+ catalog ads.
*   **Type**: String
*   **Required**: Yes

### `template_data`

*   **Description**: Object for defining template parameters that are rendered at runtime using data from your product feed. Within `object_story_spec`, this object builds your ad's template.
*   **Required**: Yes

#### Fields within `template_data`:

*   `multi_share_end_card` (Boolean) - Required - Determines if the end card is used in the carousel ad format. Set to `true` if using, `false` otherwise.
*   `name` (String) - Optional - A template tag to be used as the product's name. Refer to supported template tags for valid options.
*   `link` (String) - Required - The URL for the offsite landing page users will be directed to when clicking the call-to-action button.
*   `message` (String) - Optional - The ad copy content.
*   `call_to_action` (Object) - Required - Defines the call to action for the ad. Must be a type compatible with Advantage+ catalog ads.

### `asset_feed_spec`

*   **Description**: Specifies the parameters for an asset feed, which is a collection of creative elements like images, titles, and descriptions.
*   **Required**: Yes

#### Fields within `asset_feed_spec`:

*   `optimization_type` (String) - Required - Must be set to `FORMAT_AUTOMATION`.
*   `ad_formats` (Array of Strings) - Required - Must be set to `["CAROUSEL", "COLLECTION"]`.
*   `descriptions` (Array of Strings) - Optional - Provides description options for ads served in the carousel format. Can include supported template tags or free-form text.
*   `images` (Array of Strings) - Optional - Use to set a custom image as cover media for a collection ad. Refer to API examples for usage.
*   `videos` (Array of Strings) - Optional - Use to set a custom video as cover media for a collection ad. Refer to API examples for usage.

### Example Request Body

```json
{
  "product_set_id": "YOUR_PRODUCT_SET_ID",
  "template_data": {
    "multi_share_end_card": true,
    "link": "https://www.example.com",
    "call_to_action": {
      "type": "SHOP_NOW",
      "value": {
        "link": "https://www.example.com"
      }
    }
  },
  "asset_feed_spec": {
    "optimization_type": "FORMAT_AUTOMATION",
    "ad_formats": ["CAROUSEL", "COLLECTION"],
    "descriptions": ["Shop our latest collection!", "Discover amazing deals."]
  }
}
```

### Success Response (200)

*   **Description**: Indicates that the ad creative was successfully configured with Advantage+ creative for catalog settings.
*   **Fields**: The response will typically include an ad creative ID and status.

```json
{
  "ad_creative_id": "YOUR_AD_CREATIVE_ID",
  "status": "ACTIVE"
}
```
```

--------------------------------

### Get Custom Audience Details (Ruby)

Source: https://developers.facebook.com/docs/marketing-api/audiences/guides/website-custom-audiences

Retrieves the details of a specific custom audience using the Facebook Ads gem for Ruby. This example fetches the 'name' and 'rule' fields.

```APIDOC
## GET /custom_audiences/{id}

### Description
Retrieves the details of a specific custom audience.

### Method
GET

### Endpoint
`/custom_audiences/{id}`

### Parameters
#### Path Parameters
- **id** (string) - Required - The ID of the custom audience.

#### Query Parameters
- **fields** (string) - Optional - A comma-separated string of fields to retrieve. Example: `name,rule`

### Request Example
```ruby
require 'facebook_ads'

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<CUSTOM_AUDIENCE_ID>'

FacebookAds.configure do |config|
  config.access_token = access_token
  config.app_secret = app_secret
end

custom_audience = FacebookAds::CustomAudience.get(id ,'name,rule')

puts custom_audience
```

### Response
#### Success Response (200)
- **name** (string) - The name of the custom audience.
- **rule** (string) - The rule defining the custom audience.
- **id** (string) - The ID of the custom audience.

#### Response Example
```json
{
  "name": "My WCA", 
  "rule": "{\"and\": [\n\t\t{\"url\": {\"i_contains\": \"shoes\"}},\n\t\t{\"url\": {\"i_contains\": \"red\"}}]}", 
  "id": "1234567890"
}
```
```

--------------------------------

### PHP SDK Example for Creating an Ad

Source: https://developers.facebook.com/docs/marketing-api/guides/local-awareness

Example code using the PHP SDK to create an ad for event ticket sales.

```APIDOC
## PHP SDK Example

### Description
This code snippet demonstrates how to create an ad using the PHP SDK for optimizing event ticket sales.

### Code
```php
<?php
require __DIR__ . '/vendor/autoload.php';

use FacebookAdsObject\AdAccount;
use FacebookAdsObject\Ad;
use FacebookAds\Api;
use FacebookAds\Logger\CurlLogger;

$access_token = '<ACCESS_TOKEN>';
$app_secret = '<APP_SECRET>';
$app_id = '<APP_ID>';
$id = '<AD_ACCOUNT_ID>';

$api = Api::init($app_id, $app_secret, $access_token);
$api->setLogger(new CurlLogger());

$fields = array(
);
$params = array(
  'name' => 'My Ad',
  'adset_id' => '<adSetID>',
  'creative' => array('creative_id' => '<adCreativeID>'),
  'status' => 'PAUSED',
);
echo json_encode((new AdAccount($id))->createAd(
  $fields,
  $params
)->exportAllData(), JSON_PRETTY_PRINT);
?>
```
```

--------------------------------

### Get Custom Audience Details (Java)

Source: https://developers.facebook.com/docs/marketing-api/audiences/guides/website-custom-audiences

Retrieves the details of a specific custom audience using the Facebook SDK for Java. This example demonstrates requesting the 'name' and 'rule' fields.

```APIDOC
## GET /custom_audiences/{id}

### Description
Retrieves the details of a specific custom audience.

### Method
GET

### Endpoint
`/custom_audiences/{id}`

### Parameters
#### Path Parameters
- **id** (string) - Required - The ID of the custom audience.

#### Query Parameters
- **fields** (list) - Optional - A comma-separated list of fields to retrieve. Example: `name,rule`

### Request Example
```java
import com.facebook.ads.sdk.*;
import java.io.File;
import java.util.Arrays;

public class SAMPLE_CODE_EXAMPLE {
  public static void main (String args[]) throws APIException {

    String access_token = "<ACCESS_TOKEN>";
    String app_secret = "<APP_SECRET>";
    String app_id = "<APP_ID>";
    String id = "<CUSTOM_AUDIENCE_ID>";
    APIContext context = new APIContext(access_token).enableDebug(true);

    new CustomAudience(id, context).get()
      .requestNameField()
      .requestRuleField()
      .execute();

  }
}
```

### Response
#### Success Response (200)
- **name** (string) - The name of the custom audience.
- **rule** (string) - The rule defining the custom audience.
- **id** (string) - The ID of the custom audience.

#### Response Example
```json
{
  "name": "My WCA", 
  "rule": "{\"and\": [\n\t\t{\"url\": {\"i_contains\": \"shoes\"}},\n\t\t{\"url\": {\"i_contains\": \"red\"}}]}", 
  "id": "1234567890"
}
```
```

--------------------------------

### Install App for System User - Bash

Source: https://developers.facebook.com/docs/marketing-api/business-manager/system-user/install-apps-and-generate-tokens

This code snippet demonstrates how to install an application for a system user using a `curl` command. It requires an access token of an admin user, admin system user, or another system user, and the business app ID of the app to be installed. The call is made to the Facebook Graph API.

```bash
curl \
-F "business_app=APP-ID" \
-F "access_token=ACCESS-TOKEN" \
"https://graph.facebook.com/API-VERSION/SYSTEM-USER-ID/applications"
```

--------------------------------

### Sending Content Details with 'contents' Parameter

Source: https://developers.facebook.com/docs/marketing-api/best-practices/omni-optimal-setup-guide

This example shows the recommended method for passing content details using the 'contents' parameter. It includes product IDs and quantities for items within an event. This structure is preferred for accuracy in tracking purchases and product interactions.

```json
{
  "content_type": "product",
  "contents": [
    { "id": "123", "quantity": 2 },
    { "id": "456", "quantity": 1 }
  ]
}
```

--------------------------------

### Create Ad using Facebook Marketing API (PHP)

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-group

Provides a PHP code example for creating an Ad object via the Facebook Marketing API. It includes setting up the API connection with credentials and logger, defining ad fields and parameters, and then executing the ad creation. The output is pretty-printed JSON.

```php
require __DIR__ . '/vendor/autoload.php';

use FacebookAds\Object\AdAccount;
use FacebookAds\Object\Ad;
use FacebookAds\Api;
use FacebookAds\Logger\CurlLogger;

$access_token = '<ACCESS_TOKEN>';
$app_secret = '<APP_SECRET>';
$app_id = '<APP_ID>';
$id = '<AD_ACCOUNT_ID>';

$api = Api::init($app_id, $app_secret, $access_token);
$api->setLogger(new CurlLogger());

$fields = array(
);
$params = array(
  'name' => 'My AdGroup',
  'adset_id' => '<adSetID>',
  'creative' => array('creative_id' => '<adCreativeID>'),
  'status' => 'PAUSED',
  'authorization_category' => 'POLITICAL',
);
echo json_encode((new AdAccount($id))->createAd(
  $fields,
  $params
)->exportAllData(), JSON_PRETTY_PRINT);
```

--------------------------------

### Create Ad Set - Python SDK

Source: https://developers.facebook.com/docs/marketing-api/adset

Python SDK example for creating an ad set. Initializes the Facebook Ads API and prepares parameters for creating an ad set, including name, budget, and targeting. Requires access token, app ID, app secret, and ad account ID.

```python
from facebook_business.adobjects.adaccount import AdAccount
from facebook_business.adobjects.adset import AdSet
from facebook_business.api import FacebookAdsApi

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_ACCOUNT_ID>'
FacebookAdsApi.init(access_token=access_token)

fields = [
]
params = {

```

--------------------------------

### POST /capig/graphql/

Source: https://developers.facebook.com/docs/marketing-api/gateway-products/gateway-control-plane-api/setup-data-pipelines/data-pipelines

Creates a new data pipeline and connects it to the Meta Conversions API Gateway. This mutation allows for configuration of various pipeline parameters.

```APIDOC
## POST /capig/graphql/

### Description
Creates a new data pipeline and connects it to the Meta Conversions API Gateway. This mutation allows for configuration of various pipeline parameters.

### Method
POST

### Endpoint
`https://{signals_gateway_domain}/capig/graphql/`

### Parameters
#### Query Parameters
None

#### Request Body
- **tenantId** (ID!) - Required - Unique identifier for the account.
- **pipelineName** (String) - Optional - Name of the data pipeline. If not provided, the system will generate a default name.
- **pixelId** (ID!) - Required - The Pixel ID that needs to be integrated.
- **businessId** (String!) - Required - The business ID of the account.
- **accessToken** (String!) - Required - Access token from Meta Business Extension (MBE) setup or manually generated from Meta Events Manager.
- **apiVersion** (String) - Optional - Latest API Version for Graph API.
- **externalId** (String!) - Required - This should be the same as external_business_id in setup object.
- **createOB** (Boolean) - Optional - Whether to create the events routing connection with Meta. Default and recommended to be true.

### Request Example
```json
{
  "query": "mutation CreatePipelineAndConnectMetaCAPIMutation($tenantId: ID!, $pipelineName: String, $pixelId: ID!, $businessId: String!, $accessToken: String!, $apiVersion: String, $externalId: String!, $createOB: Boolean) {\n  tenantMutations(tenantId: $tenantId) {\n    dataPipelineMutations {\n      createConversionApiGatewayPipeline(pipelineName: $pipelineName, pixelId: $pixelId, businessId: $businessId, accessToken: $accessToken, apiVersion: $apiVersion, externalId: $externalId, createOB: $createOB) {\n        id\n        name\n        active\n        dataSources {\n          id\n          type\n        }\n        dataDestinations {\n          id\n          type\n        }\n      }\n    }\n  }\n}",
  "variables": {
    "tenantId": "IaoreXfj",
    "pipelineName": "Conversions API Gateway (258139843760841)",
    "pixelId": "258139843760841",
    "businessId": "858087751506464",
    "accessToken": "EAA2N8HVqMR4BO0KniGrDM7sngbW3OBKBgol1YbfvCDwp9S0UZALO1JgbB8yv3ZBJfYvjjUNpGn1WOVZANfQMZC5mkLZAyfmhu78Kd0GTxgpBs5raaqItv6DyBBddBUUMfkZBVeLC0EkDuZBnlsVxZA8aygZAvdp1MHV3V9Y0aYEEjfjyQDYkPezEtwZCgvgKzoE2bAtKf98FimAxakZA9sf",
    "apiVersion": "v17.0",
    "externalId": "157f0f83-7d3e-4380-b704-4ff67f03a3de",
    "createOB": true
  }
}
```

### Response
#### Success Response (200)
- **pipeline** (Pipeline) - The created data pipeline object contains the ID, name, type, etc.

#### Response Example
```json
{
  "data": {
    "tenantMutations": {
      "dataPipelineMutations": {
        "createConversionApiGatewayPipeline": {
          "id": "pipeline-id-123",
          "name": "Example Pipeline",
          "active": true,
          "dataSources": [
            {
              "id": "source-id-456",
              "type": "PIXEL"
            }
          ],
          "dataDestinations": [
            {
              "id": "destination-id-789",
              "type": "CONVERSIONS_API"
            }
          ]
        }
      }
    }
  }
}
```

#### Error Codes
- **401**: Not authorized to view event metrics
- **500**: Internal server error
```

--------------------------------

### GET /v24.0/<AD_SET_ID>/ads

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-campaign/ads

Retrieves a list of ads associated with a specific ad set. Supports filtering by various parameters and includes example request and response structures.

```APIDOC
## GET /v24.0/<AD_SET_ID>/ads

### Description
Retrieves a list of ads under a given ad set. This endpoint allows fetching ad details such as name and ID, and supports various query parameters for filtering and specifying date ranges.

### Method
GET

### Endpoint
`/v24.0/<AD_SET_ID>/ads`

### Parameters
#### Query Parameters
- **fields** (string) - Required - Comma-separated list of fields to retrieve for each ad. Example: `name,id`.
- **date_preset** (enum) - Optional - Date ranges for benchmarking comparison. Options: `today`, `yesterday`, `this_month`, `last_month`, `this_quarter`, `maximum`, `data_maximum`, `last_3d`, `last_7d`, `last_14d`, `last_28d`, `last_30d`, `last_90d`, `last_week_mon_sun`, `last_week_sun_sat`, `last_quarter`, `last_year`, `this_week_mon_today`, `this_week_sun_today`, `this_year`.
- **effective_status** (list<string>) - Optional - Filter ads by effective status. Defaults to not return deleted or archived ads.
- **time_range** (object) - Optional - Date range for aggregating insights metrics. Format: `{'since':'YYYY-MM-DD','until':'YYYY-MM-DD'}`.
- **since** (datetime) - Optional - Start date for data aggregation in 'YYYY-MM-DD' format.
- **until** (datetime) - Optional - End date for data aggregation in 'YYYY-MM-DD' format.
- **updated_since** (integer) - Optional - Filter by update time.

### Request Example
```json
{
  "example": "curl -X GET -G \ \
  -d 'fields=\"name,id\"' \ \
  -d 'access_token=<ACCESS_TOKEN>' \ \
  https://graph.facebook.com/v24.0/<AD_SET_ID>/ads"
}
```

### Response
#### Success Response (200)
- **data** (list) - A list of Ad nodes.
- **paging** (object) - Pagination information.
- **summary** (object) - Aggregated information about the edge.
  - **insights** (Edge<AdsInsights>) - Analytics summary.
  - **total_count** (unsigned int32) - Total number of objects.

#### Response Example
```json
{
  "data": [],
  "paging": {},
  "summary": {}
}
```

### Error Codes
- **100**: Invalid parameter
- **80004**: Too many calls to this ad-account. Rate limiting applies.
- **200**: Permissions error
- **190**: Invalid OAuth 2.0 Access Token
- **2500**: Error parsing graph query
```

--------------------------------

### Node.js SDK Example for Creating an Ad

Source: https://developers.facebook.com/docs/marketing-api/guides/local-awareness

Example code using the Node.js SDK to create an ad for event ticket sales.

```APIDOC
## Node.js SDK Example

### Description
This code snippet demonstrates how to create an ad using the Node.js Business SDK for optimizing event ticket sales.

### Code
```javascript
'use strict';
const bizSdk = require('facebook-nodejs-business-sdk');
const AdAccount = bizSdk.AdAccount;
const Ad = bizSdk.Ad;

const access_token = '<ACCESS_TOKEN>';
const app_secret = '<APP_SECRET>';
const app_id = '<APP_ID>';
const id = '<AD_ACCOUNT_ID>';
const api = bizSdk.FacebookAdsApi.init(access_token);
const showDebugingInfo = true; // Setting this to true shows more debugging info.
if (showDebugingInfo) {
  api.setDebug(true);
}

const logApiCallResult = (apiCallName, data) => {
  console.log(apiCallName);
  if (showDebugingInfo) {
    console.log('Data:' + JSON.stringify(data));
  }
};

let fields, params;
fields = [
];
params = {
  'name' : 'My Ad',
  'adset_id' : '<adSetID>',
  'creative' : {'creative_id':'<adCreativeID>'},
  'status' : 'PAUSED',
};
const ads = (new AdAccount(id)).createAd(
  fields,
  params
);
logApiCallResult('ads api call complete.', ads);
```
```

--------------------------------

### System User Overview

Source: https://developers.facebook.com/docs/marketing-api/business-manager/system-user/overview

This section provides an overview of system users, their requirements, and how they interact with the Facebook Marketing API.

```APIDOC
## System Users Overview

### Description
System users are programmatic entities within Business Manager that allow for API access to business assets. To create system users, your Business Manager must have a real person as an admin user and own a Facebook app that is claimed and associated with the business. The app must also undergo app review for the necessary permissions.

### Key Concepts
*   **Admin User**: The real person who manages the Business Manager.
*   **Admin System User**: A special type of system user created by an admin user. They can create other system users, ad accounts, and manage permissions. It is recommended to limit their use to administrative tasks.
*   **System User**: A user created by an admin user or admin system user. They can access assets they have been granted permission for and are the primary type of user for managing business assets programmatically.
*   **System User Access Token**: A token generated using a system user and a Facebook app with Standard Access (or whitelisted by Facebook). This token is required to make API calls on behalf of the system user after permissions have been granted.

### Requirements for System Users
*   Business Manager must have a real person as an admin user.
*   Business Manager must own a Facebook app that is claimed and associated with the business.
*   The Facebook app must go through app review for the permissions the system user will access.
```

--------------------------------

### Example: Sending Content Details for Events

Source: https://developers.facebook.com/docs/marketing-api/s/guides/omni-optimal-setup-guide

This example demonstrates how to send content details using the 'contents' parameter, which is the recommended method. It includes product IDs and quantities. Ensure the product IDs match those in your catalog. This improves event quality and match rates.

```javascript
{
  // ... other event parameters
  "contents": [
    {"id": "123", "quantity": 2},
    {"id": "456", "quantity": 1}
  ],
  // ... other event parameters
}
```

--------------------------------

### Sample Variables for Create Pipeline Mutation (JSON)

Source: https://developers.facebook.com/docs/marketing-api/gateway-products/gateway-control-plane-api/setup-data-pipelines/data-pipelines

This JSON object provides sample values for the variables required by the `CreatePipelineAndConnectMetaCAPIMutation` GraphQL mutation. Ensure all required fields like `tenantId`, `pixelId`, `businessId`, `accessToken`, and `externalId` are correctly populated.

```json
{
  "tenantId": "IaoreXfj",
  "pipelineName": "Conversions API Gateway (258139843760841)",
  "pixelId": "258139843760841",
  "businessId": "858087751506464",
  "accessToken": "EAA2N8HVqMR4BO0KniGrDM7sngbW3OBKBgol1YbfvCDwp9S0UZALO1JgbB8yv3ZBJfYvjjUNpGn1WOVZANfQMZC5mkLZAyfmhu78Kd0GTxgpBs5raaqItv6DyBBddBUUMfkZBVeLC0EkDuZBnlsVxZA8aygZAvdp1MHV3V9Y0aYEEjfjyQDYkPezEtwZCgvgKzoE2bAtKf98FimAxakZA9sf",
  "apiVersion": "v17.0",
  "externalId": "157f0f83-7d3e-4380-b704-4ff67f03a3de",
  "createOB": true
}
     
```

--------------------------------

### Marketing API Call Example (CURL)

Source: https://developers.facebook.com/docs/marketing-api/business-manager/system-user/api-calls

This example demonstrates how to make an automated API call to the Facebook Marketing API using a system user token. The `access_token` parameter should be replaced with the valid system user token.

```bash
CURL https://graph.facebook.com/<API_VERSION>/act_<AD_ACCOUNT_ID>/?access_token=<ACCESS_TOKEN>
```

--------------------------------

### Buy X Get Y Offers API

Source: https://developers.facebook.com/docs/marketing-api/catalog/guides/offers-api

This section explains how to configure 'Buy X Get Y' offers, including scenarios where buyers purchase a certain quantity of one product to receive another at a discount or for free. It also covers spend-based 'Get Y' offers.

```APIDOC
## Buy X Get Y Offers API

### Description
Allows creation of 'Buy X Get Y' offers, where a customer purchasing a specified quantity or value of certain products ('X') receives a discount on other products ('Y').

### Method
POST

### Endpoint
/offers

### Parameters
#### Request Body
- **target_quantity** (int64) - Optional, Defaults to 0 (unlimited) - The number of target products that will be discounted for each redemption. A value greater than 0 indicates a Buy X Get Y offer.
- **redemption_limit_per_order** (int64) - Optional, Defaults to 0 (unlimited) - The maximum number of times this offer can be redeemed per order. If set, `target_quantity` must be greater than 0.
- **min_quantity** (int64) - Used in conjunction with `target_quantity` to define the 'X' products that must be purchased.
- **min_subtotal** (float) - Used in conjunction with `target_quantity` to define the minimum spend threshold on 'X' products.
- **prerequisite_filter** (object) - Specifies criteria for prerequisite products.
- **prerequisite_product_retailer_ids** (Array<string>) - Specifies a list of retailer IDs for prerequisite products.
- **prerequisite_product_group_retailer_ids** (Array<string>) - Specifies a list of retailer IDs for prerequisite product groups.
- **prerequisite_product_set_retailer_ids** (Array<string>) - Specifies a list of retailer IDs for prerequisite product sets.

### Request Example
```json
{
  "target_type": "LINE_ITEM",
  "target_quantity": 1, 
  "value_type": "PERCENTAGE",
  "percent_off": 100, 
  "min_quantity": 2, 
  "prerequisite_product_retailer_ids": ["111111111", "222222222"]
}
```

### Response
#### Success Response (200)
- **offer_id** (string) - The unique identifier for the created offer.

#### Response Example
```json
{
  "offer_id": "9876543210"
}
```
```

--------------------------------

### Example fbc Parameter Value

Source: https://developers.facebook.com/docs/marketing-api/server-side-api/parameters/fbp-and-fbc

This is an example of a correctly formatted `fbc` parameter value. It adheres to the `version.subdomainIndex.creationTime.fbclid` structure, which is essential for accurate data transmission to the Conversions API.

```text
fb.1.1554763741205.IwAR2F4-dbP0l7Mn1IawQQGCINEz7PYXQvwjNwB_qa2ofrHyiLjcbCRxTDMgk
```

--------------------------------

### Example of Product Type Category

Source: https://developers.facebook.com/docs/marketing-api/reference/product-catalog/items_batch

Provides an example of a retailer-defined product category using a hierarchical structure with greater than signs.

```plaintext
Home & Garden > Kitchen & Dining > Appliances > Refrigerators
```

--------------------------------

### Get Custom Audience Details (Python)

Source: https://developers.facebook.com/docs/marketing-api/audiences/guides/website-custom-audiences

Retrieves the details of a specific custom audience using the Facebook Business SDK for Python. This example shows how to fetch the 'name' and 'rule' fields.

```APIDOC
## GET /custom_audiences/{id}

### Description
Retrieves the details of a specific custom audience.

### Method
GET

### Endpoint
`/custom_audiences/{id}`

### Parameters
#### Path Parameters
- **id** (string) - Required - The ID of the custom audience.

#### Query Parameters
- **fields** (list) - Optional - A comma-separated list of fields to retrieve. Example: `name,rule`

### Request Example
```python
from facebook_business.adobjects.customaudience import CustomAudience
from facebook_business.api import FacebookAdsApi

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<CUSTOM_AUDIENCE_ID>'

FacebookAdsApi.init(access_token=access_token)

fields = [
  'name',
  'rule',
]
params = {
}

custom_audience = CustomAudience(id)
audience_data = custom_audience.get(fields=fields, params=params)

print(audience_data)
```

### Response
#### Success Response (200)
- **name** (string) - The name of the custom audience.
- **rule** (string) - The rule defining the custom audience.
- **id** (string) - The ID of the custom audience.

#### Response Example
```json
{
  "name": "My WCA", 
  "rule": "{\"and\": [\n\t\t{\"url\": {\"i_contains\": \"shoes\"}},\n\t\t{\"url\": {\"i_contains\": \"red\"}}]}", 
  "id": "1234567890"
}
```
```

--------------------------------

### Create Ad Set with Daily Budget (Python)

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-campaign

This Python snippet demonstrates how to create an ad set with a daily budget using the Facebook Marketing API. It specifies targeting, optimization goals, and other essential parameters. Ensure the Facebook SDK is installed and configured.

```python
print AdAccount(id).create_ad_set(
  fields=fields,
  params=params,
)
```

--------------------------------

### POST /websites/developers_facebook_marketing-api

Source: https://developers.facebook.com/docs/marketing-api/collaborative-ads/managed-partner-ads/api-guide/seller/onboarding

Onboard a seller to the Facebook Marketing API. This endpoint facilitates the creation of ad accounts, catalog segments, and associated partner pages for sellers.

```APIDOC
## POST /websites/developers_facebook_marketing-api

### Description
Onboard a seller to the Facebook Marketing API. This endpoint facilitates the creation of ad accounts, catalog segments, and associated partner pages for sellers.

### Method
POST

### Endpoint
/websites/developers_facebook_marketing-api

### Parameters
#### Path Parameters
None

#### Query Parameters
None

#### Request Body
- **ad_account_currency** (string) - Required - The currency of the ad account to be created for the seller.
- **catalog_id** (numeric string) - Required - The ID of the marketplace's catalog, referred to as a parent catalog.
- **child_business_external_id** (string) - Required - A unique ID for each seller, used to create a catalog segment.
- **credit_limit** (numeric string) - Required - The maximum amount of credit to be shared with a seller.
- **partition_type** (enum string) - Required - The type of credit partition ('FIXED' or 'AUTH'). Defaults to 'FIXED'.
- **line_of_credit_id** (numeric string) - Required - The ID of the main line of credit.
- **marketplace_bm_id** (string) - Required - The marketplace's Business Manager ID.
- **name** (string) - Required - The unique Business Manager name created for the seller.
- **skip_partner_page_creation** (boolean) - Optional - Set to true to skip page creation. Defaults to false.
- **page_name** (string) - Optional - The name to assign to the page created for the seller. Skip if `skip_partner_page_creation` is true.
- **page_profile_image_url** (string) - Optional - The URL for the seller's page profile picture. Skip if `skip_partner_page_creation` is true.
- **seller_external_website_url** (string) - Required - The sellers website URL.
- **seller_targeting_countries** (list<string>) - Required - An array of strings containing seller's targeting countries (country codes).
- **partner_facebook_page_url** (string) - Optional - The seller's Facebook Page URL.
- **partner_registration_countries** (string) - Required - The seller's business registration country (country code).
- **timezone_id** (numeric string) - Required - Timezone ID of the business/ad account.
- **vertical** (enum string) - Required - The vertical of the seller's business (e.g., 'ECOMMERCE', 'RETAIL').

### Request Example
```json
{
  "ad_account_currency": "USD",
  "catalog_id": "1234567890",
  "child_business_external_id": "seller123",
  "credit_limit": "1000.00",
  "partition_type": "FIXED",
  "line_of_credit_id": "9876543210",
  "marketplace_bm_id": "2345678901",
  "name": "Seller Business Name",
  "seller_external_website_url": "https://seller.example.com",
  "seller_targeting_countries": ["US", "CA"],
  "partner_registration_countries": "US",
  "timezone_id": "1",
  "vertical": "ECOMMERCE"
}
```

### Response
#### Success Response (200)
- **async_sessions** (list) - A list containing an async session object with `id` and `name`.

#### Response Example
```json
{
  "async_sessions": [
    {
      "id": "<ASYNC_SESSION_ID>",
      "name": "<ASYNC_SESSION_NAME>"
    }
  ]
}
```

**Note:** Use the `ASYNC_SESSION_ID` to poll for the seller's onboarding status.

#### Success Response (Completed Async Session)
If the status is `COMPLETED`, the resulting data of polling async session will look like:

```json
{
  "result": "{\"id\":\"<NEWLY_CREATED_MANAGED_PARTNER_BM_ID>\"}",
  "status": "COMPLETED",
  "id": "<ASYNC_SESSION_ID>"
}
```

#### Failed Response (Failed Async Session)
If the status is `FAILED`, the resulting data of polling async session will indicate the failure.

```json
{
  "status": "FAILED",
  "error": {
    "message": "Error details about the failure."
  },
  "id": "<ASYNC_SESSION_ID>"
}
```
```

--------------------------------

### POST /campaigns - Create Video Views Campaign

Source: https://developers.facebook.com/docs/marketing-api/cost-per-action-ads

Demonstrates how to create a campaign with the objective set to 'VIDEO_VIEWS' using cURL, Node.js SDK, PHP SDK, Python SDK, Java SDK, and Ruby SDK.

```APIDOC
## POST /campaigns

### Description
Creates a new ad campaign with the objective set to VIDEO_VIEWS for Cost Per Video View (CPV) or Cost Per Action (CPA) bidding.

### Method
POST

### Endpoint
`https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/campaigns`

### Parameters
#### Path Parameters
- **AD_ACCOUNT_ID** (string) - Required - The ID of the ad account.

#### Query Parameters
None

#### Request Body
- **name** (string) - Required - The name of the campaign.
- **objective** (string) - Required - The campaign objective. For video views, use `OUTCOME_ENGAGEMENT`.
- **status** (string) - Required - The initial status of the campaign (e.g., `PAUSED`).
- **special_ad_categories** (array) - Optional - An array of special ad categories.
- **is_adset_budget_sharing_enabled** (boolean) - Optional - Enables or disables ad set budget sharing.
- **access_token** (string) - Required - Your Facebook API access token.

### Request Example (cURL)
```bash
curl -X POST \
  -F 'name="Video Views campaign"' \
  -F 'objective="OUTCOME_ENGAGEMENT"' \
  -F 'status="PAUSED"' \
  -F 'special_ad_categories=[]' \
  -F 'is_adset_budget_sharing_enabled=0' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/campaigns
```

### Response
#### Success Response (200)
Returns the newly created campaign object, including its ID.

#### Response Example
```json
{
  "id": "<CAMPAIGN_ID>"
}
```
```

```APIDOC
## Node.js SDK Example

### Description
Creates a new ad campaign using the Node.js Business SDK.

### Method
POST

### Endpoint
Uses the `createCampaign` method on the AdAccount object.

### Parameters
#### Request Body Parameters (passed to `createCampaign`)
- **name** (string) - Required - The name of the campaign.
- **objective** (string) - Required - The campaign objective. For video views, use `OUTCOME_ENGAGEMENT`.
- **status** (string) - Required - The initial status of the campaign (e.g., `PAUSED`).
- **special_ad_categories** (array) - Optional - An array of special ad categories.

### Request Example
```javascript
'use strict';
const bizSdk = require('facebook-nodejs-business-sdk');
const AdAccount = bizSdk.AdAccount;
const Campaign = bizSdk.Campaign;

const access_token = '<ACCESS_TOKEN>';
const app_secret = '<APP_SECRET>';
const app_id = '<APP_ID>';
const id = '<AD_ACCOUNT_ID>';
const api = bizSdk.FacebookAdsApi.init(access_token);
const showDebugingInfo = true; // Setting this to true shows more debugging info.
if (showDebugingInfo) {
  api.setDebug(true);
}

let fields, params;
fields = [
];
params = {
  'name' : 'Video Views campaign',
  'objective' : 'OUTCOME_ENGAGEMENT',
  'status' : 'PAUSED',
  'special_ad_categories' : [],
};
const campaigns = (new AdAccount(id)).createCampaign(
  fields,
  params
);
// logApiCallResult('campaigns api call complete.', campaigns);
```

### Response
#### Success Response (200)
Returns the newly created campaign object.

#### Response Example
(Refer to cURL example for structure, actual object will be returned by SDK)
```

```APIDOC
## PHP SDK Example

### Description
Creates a new ad campaign using the PHP SDK.

### Method
POST

### Endpoint
Uses the `createCampaign` method on the AdAccount object.

### Parameters
#### Request Body Parameters (passed to `createCampaign`)
- **name** (string) - Required - The name of the campaign.
- **objective** (string) - Required - The campaign objective. For video views, use `OUTCOME_ENGAGEMENT`.
- **status** (string) - Required - The initial status of the campaign (e.g., `PAUSED`).
- **special_ad_categories** (array) - Optional - An array of special ad categories.

### Request Example
```php
require __DIR__ . '/vendor/autoload.php';

use FacebookAdsObject\AdAccount;
use FacebookAdsObject\Campaign;
use FacebookAds\Api;
use FacebookAds\Logger\CurlLogger;

$access_token = '<ACCESS_TOKEN>';
$app_secret = '<APP_SECRET>';
$app_id = '<APP_ID>';
$id = '<AD_ACCOUNT_ID>';

$api = Api::init($app_id, $app_secret, $access_token);
$api->setLogger(new CurlLogger());

$fields = array(
);
$params = array(
  'name' => 'Video Views campaign',
  'objective' => 'OUTCOME_ENGAGEMENT',
  'status' => 'PAUSED',
  'special_ad_categories' => array(),
);
echo json_encode((new AdAccount($id))->createCampaign(
  $fields,
  $params
)->exportAllData(), JSON_PRETTY_PRINT);
```

### Response
#### Success Response (200)
Returns the newly created campaign object.

#### Response Example
(Refer to cURL example for structure, actual object will be returned by SDK)
```

```APIDOC
## Python SDK Example

### Description
Creates a new ad campaign using the Python SDK.

### Method
POST

### Endpoint
Uses the `create_campaign` method on the AdAccount object.

### Parameters
#### Request Body Parameters (passed to `create_campaign`)
- **name** (string) - Required - The name of the campaign.
- **objective** (string) - Required - The campaign objective. For video views, use `OUTCOME_ENGAGEMENT`.
- **status** (string) - Required - The initial status of the campaign (e.g., `PAUSED`).
- **special_ad_categories** (list) - Optional - A list of special ad categories.

### Request Example
```python
from facebook_business.adobjects.adaccount import AdAccount
from facebook_business.adobjects.campaign import Campaign
from facebook_business.api import FacebookAdsApi

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_ACCOUNT_ID>'
FacebookAdsApi.init(access_token=access_token)

fields = [
]
params = {
  'name': 'Video Views campaign',
  'objective': 'OUTCOME_ENGAGEMENT',
  'status': 'PAUSED',
  'special_ad_categories': [],
}
print AdAccount(id).create_campaign(
  fields=fields,
  params=params,
)
```

### Response
#### Success Response (200)
Returns the newly created campaign object.

#### Response Example
(Refer to cURL example for structure, actual object will be returned by SDK)
```

```APIDOC
## Java SDK Example

### Description
Creates a new ad campaign using the Java SDK.

### Method
POST

### Endpoint
Uses the `createCampaign` method on the AdAccount object.

### Parameters
#### Request Body Parameters (passed to `createCampaign`)
- **name** (String) - Required - The name of the campaign.
- **objective** (Campaign.EnumObjective) - Required - The campaign objective. For video views, use `VALUE_OUTCOME_ENGAGEMENT`.
- **status** (Campaign.EnumStatus) - Required - The initial status of the campaign (e.g., `VALUE_PAUSED`).
- **special_ad_categories** (String) - Optional - A JSON string representing an array of special ad categories.

### Request Example
```java
import com.facebook.ads.sdk.*;
import java.io.File;
import java.util.Arrays;

public class SAMPLE_CODE_EXAMPLE {
  public static void main (String args[]) throws APIException {

    String access_token = "<ACCESS_TOKEN>";
    String app_secret = "<APP_SECRET>";
    String app_id = "<APP_ID>";
    String id = "<AD_ACCOUNT_ID>";
    APIContext context = new APIContext(access_token).enableDebug(true);

    new AdAccount(id, context).createCampaign()
      .setName("Video Views campaign")
      .setObjective(Campaign.EnumObjective.VALUE_OUTCOME_ENGAGEMENT)
      .setStatus(Campaign.EnumStatus.VALUE_PAUSED)
      .setParam("special_ad_categories", "[]")
      .execute();

  }
}
```

### Response
#### Success Response (200)
Returns the newly created campaign object.

#### Response Example
(Refer to cURL example for structure, actual object will be returned by SDK)
```

```APIDOC
## Ruby SDK Example

### Description
Creates a new ad campaign using the Ruby SDK.

### Method
POST

### Endpoint
Uses the `campaigns.create` method on the AdAccount object.

### Parameters
#### Request Body Parameters (passed to `campaigns.create`)
- **name** (String) - Required - The name of the campaign.
- **objective** (String) - Required - The campaign objective. For video views, use `OUTCOME_ENGAGEMENT`.
- **status** (String) - Required - The initial status of the campaign (e.g., `PAUSED`).
- **special_ad_categories** (Array) - Optional - An array of special ad categories.

### Request Example
```ruby
require 'facebook_ads'

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_ACCOUNT_ID>'

FacebookAds.configure do |config|
  config.access_token = access_token
  config.app_secret = app_secret
end

ad_account = FacebookAds::AdAccount.get(id)
campaigns = ad_account.campaigns.create({
    name: 'Video Views campaign',
    objective: 'OUTCOME_ENGAGEMENT',
    status: 'PAUSED',
    special_ad_categories: [],
})
```

### Response
#### Success Response (200)
Returns the newly created campaign object.

#### Response Example
(Refer to cURL example for structure, actual object will be returned by SDK)
```

--------------------------------

### Configure Time-Based Ad Rotation

Source: https://developers.facebook.com/docs/marketing-api/adset

This example shows how to set up time-based ad rotation for creatives within an ad set. It uses two key fields: `time_based_ad_rotation_id_blocks` to specify which ad IDs to display during each time range, and `time_based_ad_rotation_intervals` to define the start times of these date ranges using UNIX timestamps. The examples illustrate how to assign multiple ad IDs to a single time range and how the intervals correspond to the blocks.

```json
{
  "time_based_ad_rotation_id_blocks": [
    [1],
    [2, 3],
    [1, 4]
  ],
  "time_based_ad_rotation_intervals": [
    1683657600, 
    1683744000, 
    1683830400
  ]
}
```

--------------------------------

### Read Product Feeds - iOS SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/product-catalog/product_feeds

This iOS SDK example illustrates how to fetch product feeds using `FBSDKGraphRequest`. It sets up the request with the graph path, parameters, and HTTP method, then starts the request and handles the result or error in the completion handler.

```objective-c
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/{product-catalog-id}/product_feeds"
                                      parameters:params
                                      HTTPMethod:@"GET"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];
```

--------------------------------

### Get Specific Content Allow List Metadata with cURL

Source: https://developers.facebook.com/docs/marketing-api/brand-safety-and-suitability/content-allow-lists

This code example demonstrates how to fetch metadata for a specific content allow list using a GET request with cURL. It requires the Content Allow List ID, specific fields (id, name, business_id), and an access token. The response provides the details of the requested content allow list.

```bash
curl -X GET \
"https://graph.facebook.com/<API_VERSION>/<CONTENT_ALLOW_LIST_ID>?fields=id,name,business_id&access_token=<ACCESS_TOKEN>"
```

--------------------------------

### Product Catalog Home Listings - Creating

Source: https://developers.facebook.com/docs/marketing-api/reference/product-catalog/home_listings

Allows the creation of a new home listing within a product catalog via a POST request to the `/home_listings` edge.

```APIDOC
## POST /home_listings

### Description
Creates a new home listing within a product catalog.

### Method
POST

### Endpoint
`/{product_catalog_id}/home_listings`

### Parameters
#### Request Body
- **address** (Object) - Required - The address of the home listing.
  - **city** (string) - Required
  - **country** (string) - Required
  - **latitude** (float) - Required
  - **longitude** (float) - Required
  - **neighborhoods** (list<string>) - Optional
  - **postal_code** (string) - Optional
  - **region** (string) - Required
  - **street_address** (string) - Required
- **availability** (string) - Required - The availability of the home listing.
- **currency** (ISO 4217 Currency Code) - Required - Currency for the listing.
- **description** (string) - Optional - Description of the home listing.
- **home_listing_id** (string) - Required - ID of the home listing.
- **images** (list<Object>) - Required - Links to home listing images. Carousel format requires 1:1 aspect ratio (600x600px), single hotel ads use 1.91:1 (1200x630px). At least one image is required.
  - **image_url** (URL) - Required
- **tags** (list<string>) - Optional
- **listing_type** (string) - Optional - Listing type of the property.
- **name** (string) - Required - Name of the home listing.
- **num_baths** (float) - Optional - Number of baths for the home listing.
- **num_beds** (float) - Optional - Number of beds for the home listing.
- **num_units** (float) - Optional - Number of units for the home listing.
- **price** (float) - Required - The price for this home listing.
- **property_type** (string) - Optional - Property type of the home listing.
- **url** (URL) - Required - Link to the external site where you can view the listing.
- **year_built** (int64) - Required - Year built.

### Request Example
```json
{
  "address": {
    "street_address": "123 Main St",
    "city": "Anytown",
    "region": "CA",
    "country": "USA",
    "postal_code": "90210",
    "latitude": 34.0522,
    "longitude": -118.2437
  },
  "availability": "available",
  "currency": "USD",
  "description": "Beautiful family home",
  "home_listing_id": "listing123",
  "images": [
    { "image_url": "http://example.com/image1.jpg" }
  ],
  "name": "Spacious Family House",
  "num_beds": 4,
  "num_baths": 2.5,
  "price": 500000.00,
  "property_type": "house",
  "url": "http://example.com/listing/123",
  "year_built": 2005
}
```

### Response
#### Success Response (200)
- **id** (numeric string) - The ID of the created home listing.

#### Response Example
```json
{
  "id": "1234567890"
}
```

### Error Codes
- **10800**: Duplicate retailer_id when attempting to create a store collection.
- **100**: Invalid parameter.
```

--------------------------------

### POST /applications

Source: https://developers.facebook.com/docs/marketing-api/business-manager/system-user/install-apps-and-generate-tokens

Installs an application for a system user, allowing the app to call APIs on behalf of the system user. Both the system user and the app must belong to the same Business Manager. Only apps with Ads Management API standard access or above can be installed.

```APIDOC
## POST /applications

### Description
Installs an application for a system user, allowing the app to call APIs on behalf of the system user. Both the system user and the app must belong to the same Business Manager. Only apps with Ads Management API standard access or above can be installed.

### Method
POST

### Endpoint
`https://graph.facebook.com/API-VERSION/SYSTEM-USER-ID/applications`

### Parameters
#### Path Parameters
- **SYSTEM-USER-ID** (string) - Required - The ID of the system user for whom the app is being installed.
- **API-VERSION** (string) - Required - The version of the Facebook Graph API to use.

#### Request Body
- **business_app** (string) - Required - The ID of the app being installed.
- **access_token** (string) - Required - The access token of an admin user, admin system user, or another system user.

### Request Example
```json
{
  "business_app": "APP-ID",
  "access_token": "ACCESS-TOKEN"
}
```

### Response
#### Success Response (200)
- **success** (boolean) - Indicates if the app installation was successful.

#### Response Example
```json
{
  "success": true
}
```
```

--------------------------------

### Conversions API - Implement and Send Requests

Source: https://developers.facebook.com/docs/marketing-api/facebook-pixel/server-side-api

Guidance on implementing the API, making POST requests, and understanding concepts like dropped events, batch requests, and event transaction time.

```APIDOC
## Implement the API and Start Sending Requests

### Description
Learn how to implement the Conversions API by making `POST` requests to send your marketing data. This section also covers important concepts such as handling dropped events, utilizing batch requests, and understanding event transaction time.

### Method
POST

### Endpoint
/vX.X/your_business_id/events

### Parameters
#### Query Parameters
- **access_token** (string) - Required - Your valid access token.

#### Request Body
- **data** (array) - Required - An array of event objects to send.
  - **event_name** (string) - Required - The name of the event (e.g., 'Purchase', 'Lead').
  - **event_time** (integer) - Required - The time the event occurred as a Unix timestamp.
  - **event_id** (string) - Required - A unique identifier for the event.
  - **user_data** (object) - Required - Information about the user associated with the event.
    - **email** (string) - Optional - User's email address.
    - **phone** (string) - Optional - User's phone number.
    - **external_id** (string) - Optional - A unique ID for the user from your system.
    - ... (other user data fields)
  - **custom_data** (object) - Optional - Custom data associated with the event.
    - **value** (number) - Optional - The value of the purchase or event.
    - **currency** (string) - Optional - The currency of the value.
    - ... (other custom data fields)

### Request Example
```json
{
  "data": [
    {
      "event_name": "Purchase",
      "event_time": 1678886400,
      "event_id": "unique_event_id_123",
      "user_data": {
        "em": "user@example.com",
        "ph": "1234567890"
      },
      "custom_data": {
        "value": 99.99,
        "currency": "USD"
      }
    }
  ]
}
```

### Response
#### Success Response (200)
- **success** (boolean) - Indicates if the events were processed successfully.
- **message** (string) - A message providing details about the processing outcome.

#### Response Example
```json
{
  "success": true,
  "message": "Events received successfully."
}
```
```

--------------------------------

### Product Catalog Fields

Source: https://developers.facebook.com/docs/marketing-api/real-estate-ads/get-started

This section outlines the available fields for enriching product catalog data within the Facebook Marketing API. It specifies field types, requirements, and compatibility with different ad types like Advantage+ catalog ads and commerce.

```APIDOC
## Product Catalog Fields Documentation

This document details the fields that can be used to enrich product catalog data for Facebook Marketing API.

### Field Details

- **`property_type`** (string) - Optional for Advantage+ catalog ads. Type of property. Supported values for Advantage+ catalog ads: `apartment`, `condo`, `house`, `land`, `manufactured`, `other`, `townhouse`. Supported values for commerce: `apartment`, `builder_floor`, `condo`, `house`, `house_in_condominium`, `house_in_villa`, `loft`, `penthouse`, `studio`, `townhouse`, `other`.
- **`listing_type`** (string) - Optional for Advantage+ catalog ads. Type of property listing. Supported values for Advantage+ catalog ads: `for_rent_by_agent`, `for_rent_by_owner`, `for_sale_by_agent`, `for_sale_by_owner`, `foreclosed`, `new_construction`, `new_listing`. Supported values for commerce: `for_rent_by_agent`, `for_rent_by_owner`.
- **`area_size`** (int) - Not applicable for Advantage+ catalog ads. Required for commerce. Area or space of the floor plan's listing.
- **`area_unit`** (string) - Not applicable for Advantage+ catalog ads. Required for commerce. The units (square feet or square meters) of the floor area's value. Supported values: `sq_ft`, `sq_m`.
- **`ac_type`** (string) - Not applicable for Advantage+ catalog ads. Optional for commerce. Type of air conditioning. Supported values: `central`, `other`,`none`.
- **`furnish_type`** (string) - Not applicable for Advantage+ catalog ads. Optional for commerce. Type of furniture available in the property. Supported values: `furnished`, `semi-furnished`,`unfurnished`.
- **`heating_type`** (string) - Not applicable for Advantage+ catalog ads. Optional for commerce. Type of heating installed in the property. Supported values: `central`,`gas`,`electric`,`radiator`,`other`,`none`.
- **`laundry_type`** (string) - Not applicable for Advantage+ catalog ads. Optional for commerce. Type of laundry available. Supported values: `in_unit`,`in_building`, `other`,`none`.
- **`num_units`** (int) - Optional for Advantage+ catalog ads and commerce. Total number of units (apartments, condos) available for rent. Example: `0`.
- **`parking_type`** (string) - Not applicable for Advantage+ catalog ads. Optional for commerce. Type of parking available on property. Supported values: `garage`,`street`,`off-street`, `other`,`none`.
- **`partner_verification`** (string) - Not applicable for Advantage+ catalog ads. Optional for commerce. Whether the partner company has verified the listing. Supported values: `verified`, `none`.
- **`year_built`** (string) - Year the property was built, using the _YYYY_ format, 4 digit year. Example: `1994`.
- **`pet_policy`** (string) - Not applicable for Advantage+ catalog ads. Optional for commerce. Indicates the pets allowed on the property: `cat`, `dog`, `all`, `none`.
- **`available_dates_price_config`** (object) - List of dates and prices that a listing is available. When you provide values, Facebook can recommend listings based on their available dates and dynamically show the associated price in your ad. See **Available Dates Object Parameters**.
- **`applink`** (object) - App link to listing.
- **`status`** (string) - Controls whether an item is active or archived in your catalog. Only active items can be seen by people in your ads, shops or any other channels. Supported values: `active`, `archived`. Items are active by default. Learn more about archiving items. Example: `active`. Note: Some partner platforms such as Shopify may sync items to your catalog with a status called **staging**, which behaves the same as `archived`. This field was previously called `visibility`. While we still support the old field name, we recommend that you use the new name.

### Country-Specific Required Fields  Commerce Only

Visit the Marketplace Platform documentation for commerce country-specific required fields.

### Image Object Parameters

#### Image Object Fields:

- **`url`** (string) - Required for Advantage+ catalog ads and commerce. Image source URL. Follow these image specifications:
  * All images must be in JPG, GIF, or PNG format.
  * For carousel ads and collection ads: Images display in square (1:1) format. The minimum image size is 500 x 500 px. We recommend 1024 x 1024 px for best quality.
  * For single image ads: Images display at a 1.91:1 aspect ratio. The minimum image size is 500 x 500 px. We recommend 1200 x 628 px for best quality.
- **`tag`** (string) - Optional for Advantage+ catalog ads and commerce. Tag appended to the image that shows what's in the image. There can be multiple tags associated with an image. Examples: `Fitness Center`, `Swimming Pool`, `INSTAGRAM_STANDARD_PREFERRED` - Allows advertisers to tag a specific image in their feed as the default image that will be used for Instagram. This tag is case sensitive.
```

--------------------------------

### Managed Partner Ads API Guide

Source: https://developers.facebook.com/docs/marketing-api/collaborative-ads/managed-partner-ads/api-guide

Resources for running managed partner ads using API calls.

```APIDOC
## Managed Partner Ads API Guide

These are the resources you'll need to run managed partner ads using API calls.

### Prerequisites
Before you can begin the managed partner ads API integration, you will need to:
  1. Create an Admin System User
  2. Assign Permissions to the Admin System User
  3. Generate an Access Token for the Admin System User

### Seller Management
This section covers operations related to managing sellers:
  * Seller Management
  * Check Seller Eligibility
  * Onboard a Seller
  * Delete a Seller

### Partner Ads Management
This section covers managing partner ads.

### Async API User Guide
This section details how to poll for asynchronous session results.
  * Poll Async Session ID for Results

### Error Handling
This section provides guidance on error handling for the API.
  * Error Handling Guide
```

--------------------------------

### Example VIDEO Object for HOTEL_ROOM

Source: https://developers.facebook.com/docs/marketing-api/reference/product-catalog/items_batch

This example illustrates the structure of a video object that can be included in the HOTEL_ROOM item type. It shows the required 'url' field and the optional 'tag' field for categorizing videos, along with an example of how to add tags.

```json
"video": [
      {
        "url":"http://example.com/video_1.mp4",
        "tag": [Swimming pool,Gym]
      }
]
```

--------------------------------

### Zip Code Search API

Source: https://developers.facebook.com/docs/marketing-api/audiences/reference/targeting-search

Allows searching for zip codes to target on Facebook. It recommends using `adgeolocation` with `location_types=['zip']` and provides an example for searching zip codes starting with '9'.

```APIDOC
## Zip Code Search API

### Description
Allows searching for zip codes to target on Facebook. It recommends using `adgeolocation` with `location_types=['zip']` and provides an example for searching zip codes starting with '9'. Visit the Meta Helpcenter to view a list of countries with supported Zip codes.

### Method
GET

### Endpoint
`https://graph.facebook.com/LATEST-API-VERSION/search`

### Query Parameters
- **`location_types`** (array of strings) - Required - Specifies the type of location to search for. Use `["zip"]` for zip codes.
- **`type`** (string) - Required - Set to `adgeolocation`.
- **`q`** (string) - Required - The zip code or prefix to search for. Example: `9`.
- **`access_token`** (string) - Required - Your Facebook API access token.

### Request Example
```json
{
  "url": "curl -G \
  -d 'location_types=[\"zip\"]' \
  -d 'type=adgeolocation' \
  -d 'q=9' \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/LATEST-API-VERSION/search"
}
```

### Response
#### Success Response (200)
- **`data`** (array) - Contains a list of matching zip code objects.
  - **`key`** (string) - The unique identifier for the zip code (e.g., "US:90028").
  - **`name`** (string) - The name of the zip code (e.g., "90028").
  - **`type`** (string) - The type of location, always "zip" in this case.
  - **`country_code`** (string) - The country code (e.g., "US").
  - **`country_name`** (string) - The name of the country (e.g., "United States").
  - **`region`** (string) - The region or state (e.g., "California").
  - **`region_id`** (integer) - The ID of the region.
  - **`primary_city`** (string) - The primary city associated with the zip code (e.g., "Los Angeles").
  - **`primary_city_id`** (integer) - The ID of the primary city.
  - **`supports_region`** (boolean) - Indicates if the region is supported.
  - **`supports_city`** (boolean) - Indicates if the city is supported.

#### Response Example
```json
{
  "data": [
    {
      "key": "US:90028",
      "name": "90028",
      "type": "zip",
      "country_code": "US",
      "country_name": "United States",
      "region": "California",
      "region_id": 3847,
      "primary_city": "Los Angeles",
      "primary_city_id": 2420379,
      "supports_region": true,
      "supports_city": true
    }
  ]
}
```
```

--------------------------------

### Create Ad Set - Node.js SDK

Source: https://developers.facebook.com/docs/marketing-api/adset

Node.js SDK example for creating an ad set. Initializes the Facebook Business SDK and makes a call to create an ad set with specified parameters like name, budget, and targeting. Requires API credentials and an ad account ID.

```javascript
'use strict';
const bizSdk = require('facebook-nodejs-business-sdk');
const AdAccount = bizSdk.AdAccount;
const AdSet = bizSdk.AdSet;

const access_token = '<ACCESS_TOKEN>';
const app_secret = '<APP_SECRET>';
const app_id = '<APP_ID>';
const id = '<AD_ACCOUNT_ID>';
const api = bizSdk.FacebookAdsApi.init(access_token);
const showDebugingInfo = true; // Setting this to true shows more debugging info.
if (showDebugingInfo) {
  api.setDebug(true);
}

const logApiCallResult = (apiCallName, data) => {
  console.log(apiCallName);
  if (showDebugingInfo) {
    console.log('Data:' + JSON.stringify(data));
  }
};

let fields, params;
fields = [
];
params = {
  'name' : 'My Reach Ad Set',
  'optimization_goal' : 'REACH',
  'billing_event' : 'IMPRESSIONS',
  'bid_amount' : '2',
  'daily_budget' : '1000',
  'campaign_id' : '<adCampaignLinkClicksID>',
  'targeting' : {'geo_locations':{'countries':['US']},'facebook_positions':['feed']},
  'status' : 'PAUSED',
  'promoted_object' : {'page_id':'<pageID>'},
};
const adsets = (new AdAccount(id)).createAdSet(
  fields,
  params
);
logApiCallResult('adsets api call complete.', adsets);
```

--------------------------------

### Business SDK API Usage in Conversions API Gateway

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/using-the-api

This guide assists users of the Meta Business SDK with advanced features for Conversions API Gateway. Basic usage should refer to the Conversions API Gateway documentation.

```APIDOC
## Business SDK API Usage in the Conversions API Gateway

### Description
This documentation provides guidance on leveraging advanced features of the Meta Business SDK specifically for users of the Conversions API Gateway. For fundamental usage of the Gateway, consult its dedicated documentation.

### Method
N/A (This is informational about SDK usage with the Gateway)

### Endpoint
N/A

### Parameters
N/A

### Request Example
N/A

### Response
N/A
```

--------------------------------

### Poll Prediction Status

Source: https://developers.facebook.com/docs/marketing-api/reservation

This example shows how to poll the status of a reach frequency prediction using an HTTP GET request. The polling should continue until the status is no longer '2'. The endpoint returns the status field.

```http
GET https://graph.facebook.com/67890123456?fields=status
```

--------------------------------

### Create Ad Set (Python SDK)

Source: https://developers.facebook.com/docs/marketing-api/adset

This snippet demonstrates how to create a new ad set with a daily budget using the Python SDK for the Facebook Marketing API.

```APIDOC
## POST /act_{AD_ACCOUNT_ID}/adsets

### Description
Creates a new ad set for a given ad account.

### Method
POST

### Endpoint
/act_{AD_ACCOUNT_ID}/adsets

### Parameters
#### Request Body
- **name** (string) - Required - The name of the ad set.
- **optimization_goal** (string) - Required - The optimization goal for the ad set (e.g., REACH, LINK_CLICKS).
- **billing_event** (string) - Required - The billing event for the ad set (e.g., IMPRESSIONS, LINK_CLICKS).
- **bid_amount** (string) - Optional - The bid amount for the ad set.
- **daily_budget** (string) - Optional - The daily budget for the ad set.
- **campaign_id** (string) - Required - The ID of the campaign this ad set belongs to.
- **targeting** (object) - Required - Targeting criteria for the ad set.
  - **geo_locations** (object) - Required - Geographic targeting.
    - **countries** (array) - Required - List of country codes.
  - **facebook_positions** (array) - Optional - Placements within Facebook.
- **status** (string) - Required - The status of the ad set (e.g., PAUSED, ACTIVE).
- **promoted_object** (object) - Required - The object being promoted (e.g., page).
  - **page_id** (string) - Required - The ID of the page being promoted.

### Request Example
```python
{
  'name': 'My Reach Ad Set',
  'optimization_goal': 'REACH',
  'billing_event': 'IMPRESSIONS',
  'bid_amount': '2',
  'daily_budget': '1000',
  'campaign_id': '<adCampaignLinkClicksID>',
  'targeting': {'geo_locations':{'countries':['US']},'facebook_positions':['feed']},
  'status': 'PAUSED',
  'promoted_object': {'page_id':'<pageID>'}
}
```

### Response
#### Success Response (200)
- **id** (string) - The ID of the created ad set.

#### Response Example
```json
{
  "id": "<ad_set_id>"
}
```
```

--------------------------------

### POST /adsets - Mobile Targeting Example

Source: https://developers.facebook.com/docs/marketing-api/targeting-specs/v2

This example demonstrates how to create an ad set with specific mobile targeting options, including operating system and device.

```APIDOC
## POST /adsets

### Description
Creates an ad set with specified targeting, including mobile device and operating system options.

### Method
POST

### Endpoint
`https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets`

### Parameters
#### Path Parameters
- **AD_ACCOUNT_ID** (string) - Required - Your Facebook Ad Account ID.

#### Query Parameters
- **access_token** (string) - Required - Your Facebook API access token.

#### Request Body
- **name** (string) - Required - The name of the ad set.
- **optimization_goal** (string) - Required - The optimization goal for the ad set (e.g., REACH, IMPRESSIONS).
- **billing_event** (string) - Required - The billing event for the ad set (e.g., IMPRESSIONS, CLICKS).
- **bid_amount** (integer) - Required - The bid amount for the ad set.
- **daily_budget** (integer) - Required - The daily budget for the ad set.
- **campaign_id** (string) - Required - The ID of the campaign this ad set belongs to.
- **targeting** (object) - Required - An object containing the targeting criteria.
  - **geo_locations** (object) - Geographical targeting.
    - **countries** (array of strings) - Array of country codes (e.g., ["US"]).
  - **user_device** (array of strings) - Optional. Specific devices to target (e.g., ["Galaxy S6", "One m9"]).
  - **user_os** (array of strings) - Required. Operating systems to target (e.g., ["android"]).
- **status** (string) - Required - The status of the ad set (e.g., ACTIVE, PAUSED).

### Request Example
```json
{
  "name": "My AdSet",
  "optimization_goal": "REACH",
  "billing_event": "IMPRESSIONS",
  "bid_amount": 2,
  "daily_budget": 1000,
  "campaign_id": "<CAMPAIGN_ID>",
  "targeting": {
    "geo_locations": {"countries":["US"]},
    "user_device": ["Galaxy S6","One m9"],
    "user_os": ["android"]
  },
  "status": "ACTIVE"
}
```

### Response
#### Success Response (200)
- **id** (string) - The ID of the created ad set.
- **name** (string) - The name of the ad set.
- **effective_status** (string) - The effective status of the ad set.

#### Response Example
```json
{
  "id": "<AD_SET_ID>",
  "name": "My AdSet",
  "effective_status": "ACTIVE"
}
```
```

--------------------------------

### Read Product Catalog Categories - iOS SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/product-catalog/categories

Demonstrates how to get product catalog categories using the iOS SDK. The code snippet shows initializing and starting a GraphRequest with a completion handler for results and errors.

```objectivec
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/{product-catalog-id}/categories"
                                      parameters:params
                                      HTTPMethod:@"GET"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];
```

--------------------------------

### Read Ad Account Tracking (JavaScript SDK)

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-account/tracking

Shows how to get ad account tracking details using the Facebook JavaScript SDK. This example includes a callback function to handle the API response.

```javascript
/* make the API call */
FB.api(
    "/{ad-account-id}/tracking",
    function (response) {
      if (response && !response.error) {
        /* handle the result */
      }
    }
);
```

--------------------------------

### Read System User Assigned Product Catalogs - Android SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/system-user/assigned_product_catalogs

This Android SDK example demonstrates how to fetch product catalogs assigned to a system user. It uses the GraphRequest class to perform a GET request and includes a callback to process the GraphResponse, allowing for handling of the results and any errors.

```java
/* make the API call */
new GraphRequest(
    AccessToken.getCurrentAccessToken(),
    "/{system-user-id}/assigned_product_catalogs",
    null,
    HttpMethod.GET,
    new GraphRequest.Callback() {
        public void onCompleted(GraphResponse response) {
            /* handle the result */
        }
    }
).executeAsync();
```

--------------------------------

### Read Business Pending Client Apps (iOS SDK)

Source: https://developers.facebook.com/docs/marketing-api/reference/business/pending_client_apps

Demonstrates how to get pending client app requests using the iOS SDK. This example utilizes `FBSDKGraphRequest` and its completion handler for processing results.

```objectivec
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/{business-id}/pending_client_apps"
                                      parameters:params
                                      HTTPMethod:@"GET"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];
```

--------------------------------

### Set Booking Window Bid Multipliers (cURL)

Source: https://developers.facebook.com/docs/marketing-api/bidding-and-optimization/bid-multiplier

Adjusts bids based on the booking window, which is the number of days until the travel start date. This example uses cURL to send bid adjustments to the Facebook Marketing API for a specific ad set.

```curl
curl -X POST \
  -F 'bid_adjustments={"user_groups":{"booking_window":{"event_sources":["123456789"],"1-2":0.1,"3-5":0.2,"default":0.5}}}' \
  -F 'access_token='$access_token \
  https://graph.facebook.com/<API_VERSION>/<ad_set_id>
```

--------------------------------

### Catalog Integration Using Meta Business SDK

Source: https://developers.facebook.com/docs/marketing-api/catalog/get-started/integrate-via-meta-sdk

This section details how to integrate your product catalog using the Meta Business SDK, including requirements and steps to make API calls for uploading and fetching products.

```APIDOC
## Catalog Integration Using Meta Business SDK

### Description
Use the Meta Business SDK for Catalog API Integration. It provides an easy way, with boilerplate code, to call available catalog APIs. Meta SDKs are available for Java, Python, Node.js, PHP and Ruby languages.

### Requirements
- **Application ID** (string) - A unique ID generated for an app during the app creation flow.
- **Access token** (string) - A string that identifies a user, app, or Page and can be used by the app to make graph API calls.
- **Catalog ID** (string) - Your catalog identifier.

## Step 1: Install the SDK
Follow instructions to install the SDK for your preferred language.

## Step 2: Make an API Call
You can make API calls using the objects and functions included in the SDK. Here are some sample API calls:

### Upload Products

#### PHP SDK Example
```php
<?php
Api::init($app_id, $app_secret, $access_token);

// Create Product Items using Items Batch API
$catalog = new ProductCatalog($catalog_id);
$response = $catalog->createItemsBatch(
 array(),
 array(
 "item_type" => "PRODUCT_ITEM",
   "requests" => array(
     // Item 1 - Create Item
     array(
       "method" => "create",
       "data" => array(
         "id" => "retailer_id_1",
         "title" => "Product Title",
         "description" => "Product Description",
         "brand" => "BrandName",
         "price" => "20.00 USD",
         "image_link" => "image_url",
         "availability" => "in stock",
         "link" => "http://productlink.com/product/retailer_id",
       )
     ),
     // Item 2 - Update item with retailer_id_2
     array(
       "method" => "update",
       "data" => array(
         "id" => "retailer_id_2",
         "title" => "Product Title 2",
       )
     ),
     // Item 3 - Delete item with retailer_id_3
     array(
       "method" => "delete",
       "data" => array(
         "id" => "retailer_id_3",
       )
     )
   )
)
)
)
?>
```

#### Node.js SDK Example
```javascript
const bizSdk = require('facebook-nodejs-business-sdk');

const access_token = '<ACCESS_TOKEN>';
const catalog_id = '<CATALOG_ID>';

const FacebookAdsApi = bizSdk.FacebookAdsApi.init(access_token)
const ProductCatalog = bizSdk.ProductCatalog;
const catalog = new ProductCatalog(catalog_id);
catalog.createItemsBatch(
 [],
 {
   "item_type" : "PRODUCT_ITEM",
   "requests" : [
     // Item 1 - Create Item
     {
       "method" : "create",
       "data" : {
         "id" : "retailer_id_1",
         "title" : "Product Title",
         "description" : "Product Description",
         "brand" : "BrandName",
         "price" : "20.00 USD",
         "image_link" : "image_url",
         "availability" : "in stock",
         "link" : "http://productlink.com/product/retailer_id",
       }
     },
     // Item 2 - Update item with retailer_id_2
     {
       "method" : "update",
       "data" : {
         "id" : "retailer_id_2",
         "title" : "Product Title 2",
       }
     },
     // Item 3 - Delete item with retailer_id_3
     {
       "method" : "delete",
       "data" : {
         "id" : "retailer_id_3",
       }
     }
   ]
 }
)
.then((response) => {
 console.log(response.handles);
})
.catch((error) => {
 console.log(error);
});
```
```

--------------------------------

### Read Product Feed Rule Suggestion - Graph API

Source: https://developers.facebook.com/docs/marketing-api/reference/product-feed-rule-suggestion

Demonstrates how to retrieve Product Feed Rule Suggestions using the Graph API. This example shows the basic HTTP GET request structure.

```HTTP
GET v24.0/...?fields={fieldname_of_type_ProductFeedRuleSuggestion} HTTP/1.1
Host: graph.facebook.com
```

--------------------------------

### Example Rich Text Description with HTML

Source: https://developers.facebook.com/docs/marketing-api/catalog/reference

Shows an example of a product description formatted with HTML, utilizing various tags for structure and emphasis. The `rich_text_description` field supports a wide range of HTML tags for detailed product information. Note that `description` is still required as a fallback.

```html
<html>
<p>Unisex cotton T-shirt with 3/4 length sleeves in royal blue. Great for everyday casual wear. Features graphic print of logo in white on upper left sleeve.</p>
<ul>
<li>100% Cotton</li>
<li>Relaxed Fit</li>
</ul>
</html>
```

--------------------------------

### Account Data Routing Configuration API

Source: https://developers.facebook.com/docs/marketing-api/gateway-products/gateway-control-plane-api/setup-data-pipelines

APIs for configuring how data is routed for an advertiser account.

```APIDOC
## Account Data Routing Configuration API

### Description
APIs for retrieving and updating data routing configurations for an advertiser account.

### Endpoints

#### Get Data Routing
- **Method**: GET
- **Endpoint**: `/accounts/{accountId}/data-routing`

#### Update Data Routing
- **Method**: PUT
- **Endpoint**: `/accounts/{accountId}/data-routing`
  - **Request Body**:
    - **routingRules** (object) - Required - The new data routing rules.
```

--------------------------------

### Get Custom Conversion Stats - Android SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/custom-conversion/stats

Provides an example of how to obtain custom conversion statistics using the Android SDK for the Facebook Marketing API. It outlines the creation of a GraphRequest and its execution.

```java
/* make the API call */
new GraphRequest(
    AccessToken.getCurrentAccessToken(),
    "/{custom-conversion-id}/stats",
    null,
    HttpMethod.GET,
    new GraphRequest.Callback() {
        public void onCompleted(GraphResponse response) {
            /* handle the result */
        }
    }
).executeAsync();
```

--------------------------------

### Get Product Items in Feed - cURL

Source: https://developers.facebook.com/docs/marketing-api/reference/product-catalog/product_feeds

This example shows how to fetch a list of products contained within a specific product feed using cURL. It requires an access token, the API version, and the product feed ID.

```shell
curl -G \
-d "access_token=<ACCESS_TOKEN>" \
https://graph.facebook.com/<API_VERSION>/<PRODUCT_FEED_ID>/products
```

--------------------------------

### Conversions API Guides - Conversions API for CRM for Platforms

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/guides/gateway/troubleshooting

Information on integrating CRM data with the Conversions API for platforms.

```APIDOC
## Conversions API Guides - Conversions API for CRM for Platforms

### Description
This guide provides instructions on how to integrate customer relationship management (CRM) data with the Conversions API for various platforms.

### Method
N/A

### Endpoint
N/A

### Parameters
N/A

### Request Example
N/A

### Response
N/A
```

--------------------------------

### Read Custom Audience Ads - JavaScript SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/custom-audience/ads

This JavaScript SDK example shows how to call the Facebook API to get ads for a custom audience. The response is handled within a callback function.

```javascript
/* make the API call */
FB.api(
    "/{custom-audience-id}/ads",
    function (response) {
      if (response && !response.error) {
        /* handle the result */
      }
    }
);
```

--------------------------------

### Conversions API - Parameters

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/guides/gateway/troubleshooting

A detailed list and explanation of all parameters available for the Conversions API.

```APIDOC
## Conversions API - Parameters

### Description
This documentation provides a comprehensive reference for all available parameters for the Conversions API, including event parameters, user data, and custom parameters.

### Method
N/A

### Endpoint
N/A

### Parameters
N/A

### Request Example
N/A

### Response
N/A
```

--------------------------------

### Read Business Pending Users (iOS SDK)

Source: https://developers.facebook.com/docs/marketing-api/reference/business/pending_users

This iOS SDK example shows how to initiate a GET request to retrieve pending users for a business. It utilizesFBSDKGraphRequest and handles the response in a completion handler.

```objectivec
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/{business-id}/pending_users"
                                      parameters:params
                                      HTTPMethod:@"GET"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];
```

--------------------------------

### Enabling Automatic Image Cropping with Facebook Marketing API

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

This JSON snippet illustrates how to opt-in to the `image_touchups` feature. Setting `image_touchups.enroll_status` to `OPT_IN` allows the API to automatically crop and expand image ads to fit various placements, optimizing their display across different ad formats.

```JSON
{
    "creative_features_spec": {
        "image_touchups": {
            "enroll_status": "OPT_IN"
        }
    }
}
```

--------------------------------

### Create Facebook Ad Set with Placements

Source: https://developers.facebook.com/docs/marketing-api/buying-api/ad-units

This example demonstrates creating an ad set with specified targeting and optimization goals. It includes setting a daily budget, targeting by country and publisher platforms, and optimization for link clicks. It's crucial for defining where and how ads are shown.

```shell
curl -X POST \
  -F 'name=Desktop Ad Set' \
  -F 'campaign_id=<CAMPAIGN_ID>' \
  -F 'daily_budget=10000' \
  -F 'targeting={
    "geo_locations": {"countries":["US"]},
    "publisher_platforms": ["facebook","audience_network"]
  }' \
  -F 'optimization_goal=LINK_CLICKS' \
  -F 'billing_event=IMPRESSIONS' \
  -F 'bid_amount=1000' \
  -F 'status=PAUSED' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets
```

--------------------------------

### Get fbp Cookie Value (Java)

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/server-side-onboarding

Retrieves the Facebook Page ID (fbp) value. Similar to `getFbc`, this function requires `processRequest` to have been called previously for accurate results.

```java
String getFbp();
```

```java
String fbp = paramBuilder.getFbp();
```

--------------------------------

### Create Gateway Data Pipeline - Sample Request Variables (JSON)

Source: https://developers.facebook.com/docs/marketing-api/gateway-products/gateway-control-plane-api/setup-data-pipelines/data-pipelines

Sample JSON payload representing the variables required for the `createDataPipelineMutation` GraphQL query. This includes the `tenantId` and the desired `name` for the new data pipeline.

```json
{
  "tenantId": "zilSRUW7",
  "name": "Pipeline C7P2ZR"
}
```

--------------------------------

### Create Ad Set

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-campaign

This section provides examples of how to create a new Ad Set using the Facebook Marketing API across various programming languages. It includes common parameters for ad set configuration.

```APIDOC
## POST /adsets

### Description
Creates a new ad set for a given ad account.

### Method
POST

### Endpoint
`/{ad_account_id}/adsets`

### Parameters
#### Path Parameters
- **ad_account_id** (string) - Required - The ID of the ad account to create the ad set within.

#### Query Parameters
None

#### Request Body
- **name** (string) - Required - The name of the ad set.
- **lifetime_budget** (string) - Optional - The total budget for the ad set.
- **start_time** (datetime) - Required - The start time for the ad set.
- **end_time** (datetime) - Optional - The end time for the ad set.
- **campaign_id** (string) - Required - The ID of the campaign the ad set belongs to.
- **bid_amount** (string) - Optional - The bid amount for the ad set.
- **billing_event** (enum) - Required - The billing event type (e.g., `LINK_CLICKS`).
- **optimization_goal** (enum) - Required - The optimization goal for the ad set (e.g., `LINK_CLICKS`).
- **targeting** (object) - Optional - Targeting specifications for the ad set.
  - **facebook_positions** (array) - Optional - Array of Facebook ad positions (e.g., `feed`).
  - **geo_locations** (object) - Optional - Geographic targeting.
    - **countries** (array) - Optional - Array of country codes (e.g., `US`).
  - **publisher_platforms** (array) - Optional - Array of publisher platforms (e.g., `facebook`, `audience_network`).
- **status** (enum) - Optional - The status of the ad set (e.g., `PAUSED`).
- **special_ad_category** (enum) - Optional - Required for ads in housing, employment, or credit categories.

### Request Example
```json
{
  "name": "My First Adset",
  "lifetime_budget": "20000",
  "start_time": "2024-07-29T17:54:57-0700",
  "end_time": "2024-08-08T17:54:57-0700",
  "campaign_id": "<adCampaignLinkClicksID>",
  "bid_amount": "100",
  "billing_event": "LINK_CLICKS",
  "optimization_goal": "LINK_CLICKS",
  "targeting": {
    "facebook_positions": ["feed"],
    "geo_locations": {
      "countries": ["US"]
    },
    "publisher_platforms": ["facebook", "audience_network"]
  },
  "status": "PAUSED"
}
```

### Response
#### Success Response (200)
- **id** (string) - The ID of the newly created ad set.
- **name** (string) - The name of the ad set.
- ... (other ad set fields)

#### Response Example
```json
{
  "id": "<AD_SET_ID>",
  "name": "My First Adset",
  "lifetime_budget": "20000",
  "start_time": "2024-07-29T17:54:57-0700",
  "end_time": "2024-08-08T17:54:57-0700",
  "campaign_id": "<adCampaignLinkClicksID>",
  "bid_amount": "100",
  "billing_event": "LINK_CLICKS",
  "optimization_goal": "LINK_CLICKS",
  "targeting": {
    "facebook_positions": ["feed"],
    "geo_locations": {
      "countries": ["US"]
    },
    "publisher_platforms": ["facebook", "audience_network"]
  },
  "status": "PAUSED"
}
```
```

--------------------------------

### Get Event Statistics (Python SDK)

Source: https://developers.facebook.com/docs/marketing-api/catalog/guides/cat-signals-quality

Fetch product catalog event statistics using the Facebook Business SDK for Python. This example requires your access token, app secret, app ID, and the product catalog ID.

```python
from facebook_business.adobjects.productcatalog import ProductCatalog
from facebook_business.adobjects.producteventstat import ProductEventStat
from facebook_business.api import FacebookAdsApi

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<PRODUCT_CATALOG_ID>'
FacebookAdsApi.init(access_token=access_token)

fields = [
]
params = {
}
print ProductCatalog(id).get_event_stats(
  fields=fields,
  params=params,
)
```

--------------------------------

### Set Cookies with Python SDK for Cookie Consent

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/server-side-onboarding

This Python example shows how to manage cookie consent using the ParamBuilder. It processes domain, query parameters, and existing cookies to determine which cookies to set. The generated cookies are then sent in the 'Set-Cookie' header of the HTTP response. Ensure the ParamBuilder is initialized with relevant domains.

```python
from capi_param_builder import ParamBuilder


# Main function declaration
# We support DefaultEtldPlusOneResolver() from demo, please
fbcBuilder = ParamBuilder(["example.com", "...."])
# host: str, queries: dict[str, str], cookies: dict[str, str]
updated_cookies = fbcBuilder.process_request(
     domain_only,
     query_params,
     cookie_dict
)


# Set cookie
for cookie in updated_cookies:
           self.send_header(
               "Set-Cookie",
  f"{cookie.name}={cookie.value};Max-Age={cookie.max_age};path=/;domain={cookie.domain}",
           )
```

--------------------------------

### Get fbc Cookie Value (Java)

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/server-side-onboarding

Retrieves the Facebook Click ID (fbc) value. This function should be called after `processRequest` has been invoked to ensure accurate retrieval of the fbc value.

```java
String getFbc();
```

```java
String fbc = paramBuilder.getFbc();
```

--------------------------------

### Retrieve Ad Set Details (Python, Java, Ruby)

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-campaign

Demonstrates fetching specific fields (id, name, start_time, end_time) for an Ad Set. It shows initialization of API context or configuration and making the GET request with specified fields and parameters. Dependencies include the respective Facebook SDKs for each language.

```python
fields = [
  'id',
  'name',
  'start_time',
  'end_time',
]
params = {
  'date_format': 'U',
}
print AdSet(id).get(
  fields=fields,
  params=params,
)
```

```java
import com.facebook.ads.sdk.*;
import java.io.File;
import java.util.Arrays;

public class SAMPLE_CODE_EXAMPLE {
  public static void main (String args[]) throws APIException {

    String access_token = "<ACCESS_TOKEN>";
    String app_secret = "<APP_SECRET>";
    String app_id = "<APP_ID>";
    String id = "<AD_SET_ID>";
    APIContext context = new APIContext(access_token).enableDebug(true);

    new AdSet(id, context).get()
      .setParam("date_format", "U")
      .requestIdField()
      .requestNameField()
      .requestStartTimeField()
      .requestEndTimeField()
      .execute();

  }
}
```

```ruby
require 'facebook_ads'

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_SET_ID>'

FacebookAds.configure do |config|
  config.access_token = access_token
  config.app_secret = app_secret
end

ad_set = FacebookAds::AdSet.get(id ,'id,name,start_time,end_time')
```

--------------------------------

### Authentication Methods

Source: https://developers.facebook.com/docs/marketing-api/gateway-products/gateway-control-plane-api/setup-data-pipelines/objects

Details on various authentication methods supported by the Facebook Marketing API.

```APIDOC
## Authentication Methods

### ApiKeyAuth

#### Description
API Key authentication allows clients to authenticate by providing an API key.

#### Parameters

##### Request Header
- **name** (String) - Name of the API key auth.
- **value** (String) - Value of the API key auth.
- **addTo** (AddAuthTo) - The part of the request to add auth to.

### BasicAuth

#### Description
Basic authentication uses a username and password (or token) for authentication.

#### Parameters

##### Request Body
- **credentials** (String) - Credentials for basic authentication.

### ClientCredentialsAuth

#### Description
Client Credentials authentication is used for server-to-server interactions where a client application authenticates itself to obtain an access token.

#### Parameters

##### Request Body
- **authEndpoint** (String) - The URL of the authorization endpoint.
- **httpMethod** (HttpMethodType) - The HTTP method to use for the authentication request (e.g., POST, GET).
- **clientId** (String) - The unique identifier for the client application.
- **clientSecret** (String) - The secret key associated with the client ID.

### JsonWebTokenAuth

#### Description
JSON Web Token (JWT) authentication is used for secure token-based authentication.

#### Parameters

##### Request Body
- **serviceUserAccount** (String) - The account name of the service user.
- **privateKey** (String) - The private key used to sign the JWT token.
```

--------------------------------

### Get Event Statistics (PHP SDK)

Source: https://developers.facebook.com/docs/marketing-api/catalog/guides/cat-signals-quality

This PHP code snippet shows how to obtain event statistics for a product catalog using the Facebook PHP SDK. Ensure you have the SDK installed and configured with your credentials.

```php
require __DIR__ . '/vendor/autoload.php';

use FacebookAds\Object\ProductCatalog;
use FacebookAds\Object\ProductEventStat;
use FacebookAds\Api;
use FacebookAds\Logger\CurlLogger;

$access_token = '<ACCESS_TOKEN>';
$app_secret = '<APP_SECRET>';
$app_id = '<APP_ID>';
$id = '<PRODUCT_CATALOG_ID>';

$api = Api::init($app_id, $app_secret, $access_token);
$api->setLogger(new CurlLogger());

$fields = array(
);
$params = array(
);
echo json_encode((new ProductCatalog($id))->getEventStats(
  $fields,
  $params
)->getResponse()->getContent(), JSON_PRETTY_PRINT);
```

--------------------------------

### Purchase Event with Value and Currency

Source: https://developers.facebook.com/docs/marketing-api/best-practices/omni-optimal-setup-guide

This example illustrates a purchase event including the total value and currency. The 'value' must be a non-negative numeric value, and 'currency' must be a valid ISO 4217 three-digit code. These parameters are required for purchase events.

```json
{
  "event_name": "PURCHASE",
  "value": 75.99,
  "currency": "USD"
}
```

--------------------------------

### Create Video Views Campaign using Node.js SDK

Source: https://developers.facebook.com/docs/marketing-api/bidding/guides/cost-per-action-ads

This Node.js example demonstrates creating a video views campaign using the Facebook Marketing API SDK. It requires initialization with your app ID, app secret, and access token. The campaign parameters include name, objective, and status.

```javascript
'use strict';
const bizSdk = require('facebook-nodejs-business-sdk');
const AdAccount = bizSdk.AdAccount;
const Campaign = bizSdk.Campaign;

const access_token = '<ACCESS_TOKEN>';
const app_secret = '<APP_SECRET>';
const app_id = '<APP_ID>';
const id = '<AD_ACCOUNT_ID>';
const api = bizSdk.FacebookAdsApi.init(access_token);
const showDebugingInfo = true; // Setting this to true shows more debugging info.
if (showDebugingInfo) {
  api.setDebug(true);
}

const logApiCallResult = (apiCallName, data) => {
  console.log(apiCallName);
  if (showDebugingInfo) {
    console.log('Data:' + JSON.stringify(data));
  }
};

let fields, params;
fields = [
];
params = {
  'name' : 'Video Views campaign',
  'objective' : 'OUTCOME_ENGAGEMENT',
  'status' : 'PAUSED',
  'special_ad_categories' : [],
};
const campaigns = (new AdAccount(id)).createCampaign(
  fields,
  params
);
logApiCallResult('campaigns api call complete.', campaigns);

```

--------------------------------

### Create Empty Custom Audience with Node.js SDK

Source: https://developers.facebook.com/docs/marketing-api/custom-audience-api

This Node.js example shows how to create an empty custom audience using the Facebook SDK. It requires your access token, app secret, app ID, and ad account ID. Ensure you have the `facebook-nodejs-business-sdk` installed.

```javascript
'use strict';
const bizSdk = require('facebook-nodejs-business-sdk');
const AdAccount = bizSdk.AdAccount;
const CustomAudience = bizSdk.CustomAudience;

const access_token = '<ACCESS_TOKEN>';
const app_secret = '<APP_SECRET>';
const app_id = '<APP_ID>';
const id = '<AD_ACCOUNT_ID>';
const api = bizSdk.FacebookAdsApi.init(access_token);
const showDebugingInfo = true; // Setting this to true shows more debugging info.
if (showDebugingInfo) {
  api.setDebug(true);
}

const logApiCallResult = (apiCallName, data) => {
  console.log(apiCallName);
  if (showDebugingInfo) {
    console.log('Data:' + JSON.stringify(data));
  }
};

let fields, params;
fields = [
];
params = {
  'name' : 'My new Custom Audience',
  'subtype' : 'CUSTOM',
  'description' : 'People who purchased on my website',
  'customer_file_source' : 'USER_PROVIDED_ONLY',
};
const customaudiences = (new AdAccount(id)).createCustomAudience(
  fields,
  params
);
logApiCallResult('customaudiences api call complete.', customaudiences);
```

--------------------------------

### Create a Flight Catalog using the API

Source: https://developers.facebook.com/docs/marketing-api/dynamic-ads-for-flights/catalog

Create a container for your flight inventory using the Marketing API. Ensure you have the necessary Marketing API Access Level and have accepted the Terms of Service.

```APIDOC
## Create a Flight Catalog using the API

### Description
Create a flight catalog for flight ads. A flight catalog is a container for your flight inventory. To use the catalog API, make sure you have the appropriate Marketing API Access Level and that you have accepted the Terms of Service by creating your first catalog through Business Manager.

### Method
POST

### Endpoint
`https://graph.facebook.com/v10.0/{business-id}/owned_product_catalogs`

### Parameters
#### Request Body
- **name** (string) - Required - The name of the catalog.
- **vertical** (string) - Required - The vertical for the catalog. Set to `flights` for flight catalogs.
- **access_token** (string) - Required - Your Facebook API access token.

### Request Example
```json
{
  "name": "Test Flight Catalog",
  "vertical": "flights"
}
```

### Response
#### Success Response (200)
- **id** (string) - The ID of the newly created flight catalog.

### Response Example
```json
{
  "id": "1234567890"
}
```
```

--------------------------------

### Read Business Adspixels - iOS SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/business/adspixels

This iOS SDK example shows how to retrieve Facebook Adspixels for a business. It uses `FBSDKGraphRequest` to make a GET request and handles the response asynchronously via a completion handler.

```objectivec
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/{business-id}/adspixels"
                                      parameters:params
                                      HTTPMethod:@"GET"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];

```

--------------------------------

### POST /managed_partner_businesses

Source: https://developers.facebook.com/docs/marketing-api/collaborative-ads/managed-partner-ads/api-guide/seller/onboarding

Onboards a seller into managed partner ads by creating a child Business Manager, Facebook Page, ad account, and setting up the seller's catalog.

```APIDOC
## POST /managed_partner_businesses

### Description
Onboards a seller into managed partner ads (MPA) by creating a child Business Manager, a Facebook Page, an ad account, and sharing a line of credit. It also sets up the seller's catalog segment.

### Method
POST

### Endpoint
`https://graph.facebook.com/<API_VERSION>/<MARKETPLACE_BM_ID>/managed_partner_businesses`

### Parameters
#### Path Parameters
- **MARKETPLACE_BM_ID** (string) - Required - The Business Manager ID of the marketplace.
- **API_VERSION** (string) - Required - The Facebook Graph API version (e.g., v24.0).

#### Query Parameters
None

#### Request Body
This endpoint uses `application/x-www-form-urlencoded` for the `asyncbatch` parameter.

- **access_token** (string) - Required - An access token with the necessary permissions.
- **asyncbatch** (string) - Required - A JSON array containing the operation to perform.
  - **method** (string) - POST
  - **relative_url** (string) - `<MARKETPLACE_BM_ID>/managed_partner_businesses`
  - **name** (string) - A unique name for the asynchronous session.
  - **body** (string) - URL-encoded string containing the following parameters:
    - **child_business_external_id** (string) - Required - The vendor ID of the seller.
    - **line_of_credit_id** (string) - Required - The ID of the line of credit to be shared.
    - **credit_limit** (string) - Required - The credit limit for the seller.
    - **partition_type** (string) - Required - The partition type for the setup.
    - **catalog_id** (string) - Required - The ID of the parent catalog.
    - **ad_account_currency** (string) - Required - The currency for the ad account.
    - **seller_targeting_countries** (array of strings) - Required - A list of country codes for seller targeting.
    - **timezone_id** (string) - Required - The timezone ID for the seller's business.
    - **name** (string) - Required - The name for the seller's Business Manager.
    - **seller_external_website_url** (string) - Optional - The external website URL of the seller.
    - **partner_facebook_page_url** (string) - Optional - The Facebook Page URL of the partner.
    - **profile_pic_url** (string) - Optional - The URL for the profile picture.
    - **vertical** (string) - Optional - The industry vertical of the seller.
    - **partner_registration_countries** (array of strings) - Optional - Country codes where the partner is registered.

### Request Example
```json
{
  "access_token": "<ACCESS_TOKEN>",
  "asyncbatch": "[
      {
        \"method\": \"POST\",
        \"relative_url\": \"<MARKETPLACE_BM_ID>/managed_partner_businesses\",
        \"name\": \"<ASYNC_SESSION_NAME>\",
        \"body\": \"child_business_external_id=<VENDOR_ID>&line_of_credit_id=<LINE_OF_CREDIT_ID>&credit_limit=<CREDIT_LIMIT>&partition_type=<PARTITION_TYPE>&catalog_id=<PARENT_CATALOG_ID>&ad_account_currency=<AD_ACCOUNT_CURRENCY>&seller_targeting_countries=[\"COUNTRY_CODE1\",\"COUNTRY_CODE2\"]&timezone_id=<TIMEZONE_ID>&name=<BUSINESS_MANAGER_NAME>&seller_external_website_url=<SELLER_EXTERNAL_WEBSITE_URL>&partner_facebook_page_url=<PARTNER_FACEBOOK_PAGE_URL>&profile_pic_url=<PROFILE_PIC_URL>&vertical=<VERTICAL>&partner_registration_countries=<PARTNER_REGISTRATION_COUNTRY>\"
      }
  ]"
}
```

### Response
#### Success Response (200)
- **ASYNC_SESSION_ID** (string) - The ID of the asynchronous session. This ID should be polled until a terminal state [COMPLETED|FAILED] is reached.

#### Response Example
```json
{
  "async_session_id": "1234567890"
}
```

### Error Codes
Refer to the general Facebook Marketing API error handling documentation.
```

--------------------------------

### Read Business Pending Users (PHP SDK)

Source: https://developers.facebook.com/docs/marketing-api/reference/business/pending_users

This PHP SDK example shows how to retrieve a list of pending users for a business by making a GET request. It includes error handling for Facebook SDK and response exceptions.

```php
/* PHP SDK v5.0.0 */
/* make the API call */
try {
  // Returns a `Facebook\FacebookResponse` object
  $response = $fb->get(
    '/{business-id}/pending_users',
    '{access-token}'
  );
} catch(Facebook\Exceptions\FacebookResponseException $e) {
  echo 'Graph returned an error: ' . $e->getMessage();
  exit;
} catch(Facebook\Exceptions\FacebookSDKException $e) {
  echo 'Facebook SDK returned an error: ' . $e->getMessage();
  exit;
}
$graphNode = $response->getGraphNode();
/* handle the result */
```

--------------------------------

### Get Product Catalog Diagnostics - Android SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/product-catalog/diagnostics

This Android SDK example illustrates fetching product catalog diagnostics. It uses the GraphRequest class and an HttpMethod.GET to make the call. The results or errors are handled in the onCompleted callback method.

```java
/* make the API call */
new GraphRequest(
    AccessToken.getCurrentAccessToken(),
    "/{product-catalog-id}/diagnostics",
    null,
    HttpMethod.GET,
    new GraphRequest.Callback() {
        public void onCompleted(GraphResponse response) {
            /* handle the result */
        }
    }
).executeAsync();
```

--------------------------------

### Read Ads Pixel Shared Agencies - iOS SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/ads-pixel/shared_agencies

This example shows how to get shared agencies for a pixel using the Facebook iOS SDK. The completion handler processes the results or errors.

```objective-c
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/{pixel-id}/shared_agencies"
                                      parameters:params
                                      HTTPMethod:@"GET"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];
```

--------------------------------

### Utilizing Text Optimizations with AI Suggestions API

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

This code snippet shows how to enable `text_optimizations` to generate improved ad text. By setting `text_optimizations.enroll_status` to `OPT_IN` and optionally using `customizations.text_extraction` for AI-identified phrases, the API can suggest primary text, headlines, or descriptions.

```JSON
{
    "creative_features_spec": {
        "text_optimizations": {
            "enroll_status": "OPT_IN",
            "customizations": {
                "text_extraction": {
                    "enroll_status": "OPT_IN"
                }
            }
        }
    }
}
```

--------------------------------

### Conversions API Gateway - Troubleshooting Tools

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/guides/gateway/troubleshooting

Information on tools available for troubleshooting the Conversions API Gateway.

```APIDOC
## Conversions API Gateway - Troubleshooting Tools

### Description
This section outlines the troubleshooting tools and utilities provided for the Conversions API Gateway.

### Method
N/A

### Endpoint
N/A

### Parameters
N/A

### Request Example
N/A

### Response
N/A
```

--------------------------------

### Read Ad Rule History - HTTP Example

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-rule/history

This snippet shows how to make an HTTP GET request to retrieve the history of an ad rule. It targets the graph.facebook.com host and specifies the ad-rule-id and API version.

```http
GET /v24.0/{ad-rule-id}/history HTTP/1.1
Host: graph.facebook.com
```

--------------------------------

### Read Ad Creatives - Graph API Explorer

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-account/adcreatives

An example HTTP GET request for retrieving ad creatives from an ad account, intended for use with the Graph API Explorer. It shows the endpoint and the 'fields' parameter.

```http
GET /v24.0/act_<AD_ACCOUNT_ID>/adcreatives?fields=name HTTP/1.1
Host: graph.facebook.com

```

--------------------------------

### Read Ad Set Ad Creatives (Android SDK)

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-campaign/adcreatives

Provides an example of how to get ad set ad creatives using the Facebook Android SDK. It utilizes GraphRequest and defines a callback for the response.

```java
/* make the API call */
new GraphRequest(
    AccessToken.getCurrentAccessToken(),
    "/{ad-set-id}/adcreatives",
    null,
    HttpMethod.GET,
    new GraphRequest.Callback() {
        public void onCompleted(GraphResponse response) {
            /* handle the result */
        }
    }
).executeAsync();

```

--------------------------------

### Read Ad Set Ad Creatives (HTTP)

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-campaign/adcreatives

Demonstrates how to retrieve ad set ad creatives using an HTTP GET request to the Facebook Graph API. This is a foundational example for interacting with the API.

```HTTP
GET /v24.0/{ad-set-id}/adcreatives HTTP/1.1
Host: graph.facebook.com
```

--------------------------------

### Get Product Catalog Diagnostics - PHP SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/product-catalog/diagnostics

This PHP SDK example demonstrates how to fetch product catalog diagnostics using the Facebook SDK. It includes error handling for both Facebook SDK and Graph API exceptions. The result is obtained from the GraphResponse object.

```php
/* PHP SDK v5.0.0 */
/* make the API call */
try {
  // Returns a `Facebook\FacebookResponse` object
  $response = $fb->get(
    '/{product-catalog-id}/diagnostics',
    '{access-token}'
  );
} catch(Facebook\Exceptions\FacebookResponseException $e) {
  echo 'Graph returned an error: ' . $e->getMessage();
  exit;
} catch(Facebook\Exceptions\FacebookSDKException $e) {
  echo 'Facebook SDK returned an error: ' . $e->getMessage();
  exit;
}
$graphNode = $response->getGraphNode();
/* handle the result */
```

--------------------------------

### Sale Price Formatting Example

Source: https://developers.facebook.com/docs/marketing-api/reference/product-catalog/items_batch

Demonstrates the correct format for specifying a sale price, which includes the discounted cost followed by the 3-digit ISO currency code, separated by a space.

```text
9.99 USD
```

```text
25.00 EUR
```

--------------------------------

### Set Cookies with Node.js SDK for Cookie Consent

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/server-side-onboarding

This Node.js example demonstrates processing request details and setting cookies based on user consent. It parses existing cookies, uses the ParamBuilder to determine necessary cookies, and then sets them in the response headers. This code requires the ParamBuilder to be imported and initialized correctly.

```javascript
const builder = new ParamBuilder([example.com, ....]);


 if (!cookieString) {
   return null;
 }
 const cookies = {};
 const items = cookieString.split('; ');
 for (const item of items) {
     const [name, value] = item.split('=');
     cookies[name] = value;
 }


 const cookiesToSet = builder.processRequest(
   req.headers.host, // host
   params, // query params
   cookies // current cookie
 );


 const cookies = [];
 for (const cookie of cookiesToSet) {
   cookies.push(cookie.name + '=' + cookie.value + '; Max-Age=' + cookie.maxAge + '; Domain=' + cookie.domain + '; Path=/');
 }
 res.setHeader('Set-Cookie', cookies);
```

--------------------------------

### Data Destinations API

Source: https://developers.facebook.com/docs/marketing-api/gateway-products/gateway-control-plane-api/setup-data-pipelines

APIs for managing data destinations for event data.

```APIDOC
## Data Destinations API

### Description
APIs for managing data destinations, including creation, retrieval, update, deletion, and configuration for various destination types like Meta Conversions API and HTTP Custom Connect.

### Endpoints

#### Create Data Destination
- **Method**: POST
- **Endpoint**: `/data-destinations`

#### Get Data Destination
- **Method**: GET
- **Endpoint**: `/data-destinations/{destinationId}`

#### Update Data Destination
- **Method**: PUT
- **Endpoint**: `/data-destinations/{destinationId}`

#### Delete Data Destination
- **Method**: DELETE
- **Endpoint**: `/data-destinations/{destinationId}`

#### Update Meta Conversions API Data Destination Config
- **Method**: PUT
- **Endpoint**: `/data-destinations/{destinationId}/conversions-api-config`
  - **Request Body**:
    - **config** (object) - Required - The configuration for the Meta Conversions API destination.

#### Update HTTP Custom Connect Data Destination Config
- **Method**: PUT
- **Endpoint**: `/data-destinations/{destinationId}/http-custom-connect-config`
  - **Request Body**:
    - **config** (object) - Required - The configuration for the HTTP Custom Connect destination.
```

--------------------------------

### Get Event Statistics (Java SDK)

Source: https://developers.facebook.com/docs/marketing-api/catalog/guides/cat-signals-quality

This Java code demonstrates how to retrieve event statistics for a product catalog using the Facebook Ads SDK for Java. Ensure proper setup of API context and credentials.

```java
import com.facebook.ads.sdk.*;
import java.io.File;
import java.util.Arrays;

public class SAMPLE_CODE_EXAMPLE {
  public static void main (String args[]) throws APIException {

    String access_token = "<ACCESS_TOKEN>";
    String app_secret = "<APP_SECRET>";
    String app_id = "<APP_ID>";
    String id = "<PRODUCT_CATALOG_ID>";
    APIContext context = new APIContext(access_token).enableDebug(true);

    new ProductCatalog(id, context).getEventStats()
      .execute();

  }
}
```

--------------------------------

### POST /<AD_ACCOUNT_ID>/adrules_library - Change Bid Rule

Source: https://developers.facebook.com/docs/marketing-api/ad-rules/overview/change-spec

This example shows how to create a rule to scale ad set bids daily based on a target cost per mobile app install value, with a tolerance window to avoid minor adjustments. It also includes limits for the bid adjustments.

```APIDOC
## POST /<AD_ACCOUNT_ID>/adrules_library

### Description
Creates a rule to automatically adjust ad bids based on specified criteria, including a target cost per mobile app install and a tolerance window. This example demonstrates daily bid scaling.

### Method
POST

### Endpoint
https://graph.facebook.com/<VERSION>/<AD_ACCOUNT_ID>/adrules_library

### Parameters
#### Query Parameters
- **access_token** (string) - Required - Your Facebook API access token.

#### Request Body
- **name** (string) - Required - The name of the rule.
- **schedule_spec** (object) - Required - Specifies the scheduling for the rule.
  - **schedule_type** (string) - Required - Type of schedule (e.g., "DAILY").
- **evaluation_spec** (object) - Required - Defines the criteria for evaluating ad sets.
  - **evaluation_type** (string) - Required - Type of evaluation (e.g., "SCHEDULE").
  - **filters** (array) - Required - An array of filter objects.
    - **field** (string) - Required - The field to filter on (e.g., "id", "mobile_app_install", "cost_per_mobile_app_install").
    - **value** (any) - Required - The value to filter by.
    - **operator** (string) - Required - The operator to use for filtering (e.g., "IN", "GREATER_THAN", "NOT_IN_RANGE").
- **execution_spec** (object) - Required - Defines the action to take when the rule is triggered.
  - **execution_type** (string) - Required - Type of execution (e.g., "CHANGE_BID").
  - **execution_options** (array) - Required - An array of execution option objects.
    - **field** (string) - Required - The field to modify (e.g., "change_spec").
    - **value** (object) - Required - The details of the change.
      - **amount** (number) - Required - The amount to change by.
      - **limit** (array) - Optional - A range [min, max] for the bid adjustment.
      - **target_field** (string) - Required - The field to target for the bid adjustment (e.g., "cost_per_mobile_app_install").
    - **operator** (string) - Required - The operator to use (e.g., "EQUAL").

### Request Example
```json
{
  "name": "Test Change Bid Rule",
  "schedule_spec": {
    "schedule_type": "DAILY"
  },
  "evaluation_spec": {
    "evaluation_type": "SCHEDULE",
    "filters": [
      {
        "field": "id",
        "value": [123],
        "operator": "IN"
      },
      {
        "field": "time_preset",
        "value": "LIFETIME",
        "operator": "EQUAL"
      },
      {
        "field": "mobile_app_install",
        "value": 100,
        "operator": "GREATER_THAN"
      },
      {
        "field": "cost_per_mobile_app_install",
        "value": [4.5, 5.5],
        "operator": "NOT_IN_RANGE"
      }
    ]
  },
  "execution_spec": {
    "execution_type": "CHANGE_BID",
    "execution_options": [
      {
        "field": "change_spec",
        "value": {
          "amount": 5.0,
          "limit": [2.0, 10.0],
          "target_field": "cost_per_mobile_app_install"
        },
        "operator": "EQUAL"
      }
    ]
  }
}
```

### Response
#### Success Response (200)
- **id** (string) - The ID of the created rule.
- **name** (string) - The name of the rule.

#### Response Example
```json
{
  "id": "9876543210",
  "name": "Test Change Bid Rule"
}
```
```

--------------------------------

### Create Credit Allocation Config (Example)

Source: https://developers.facebook.com/docs/marketing-api/reference/extended-credit/owning_credit_allocation_configs

This example illustrates the process of creating a new credit allocation configuration. It involves making a POST request to the `owning_credit_allocation_configs` edge with required parameters such as `receiving_business_id`, `amount`, `liability_type`, and `partition_type`.

```json
{
  "data": [
  ]
}
```

--------------------------------

### Facebook Marketing API: Full Ad Creation Example

Source: https://developers.facebook.com/docs/marketing-api/advantage-shopping-campaigns/cross-channel-conversion

This JSON object illustrates a complete ad creation request for the Facebook Marketing API. It includes the ad's name, ad set ID, a simplified creative object referencing a creative ID, the ad status, and a comprehensive list of tracking specifications covering offsite conversions, app installs, and app custom events.

```json
{
     "name": "sample ad"
     "adset_id": "6170648652866",
     "creative": {
         "creative_id": <creative_id>
    }
    "status": "PAUSED",
    "tracking_specs": [
        {
            "action.type": ["offsite_conversion"],
            "fb_pixel": [<pixel_id>]
        }
        {
            "action.type": ["mobile_app_install"],
            "application": [<application_id>]
        }
        {
            "action.type": ["app_custom_event"],
            "application": [<application_id>]
        }
    ]
}

```

--------------------------------

### Poll Reservation Status

Source: https://developers.facebook.com/docs/marketing-api/reservation

This example shows how to poll the status of a reserved prediction using an HTTP GET request. Similar to the initial prediction status poll, this continues until the status is no longer '2'. The endpoint uses the prediction ID.

```http
GET https://graph.facebook.com/<API_VERSION>/<PREDICTION_ID>?fields=status
```

--------------------------------

### Create Ad Set with App Installs Objective (cURL)

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-campaign

This snippet demonstrates how to create an ad set for mobile app installs using the Facebook Marketing API via a cURL request. It includes parameters for daily budget, bid amount, billing event, optimization goal, campaign ID, promoted object details, targeting options, status, and access token. Ensure you replace placeholders like '<AD_CAMPAIGN_ID>', '<APP_ID>', '<APP_STORE_URL>', '<AD_ACCOUNT_ID>', and '<ACCESS_TOKEN>' with your actual values.

```bash
curl -X POST \
  -F 'name="Mobile App Installs Ad Set"' \
  -F 'daily_budget=1000' \
  -F 'bid_amount=2' \
  -F 'billing_event="IMPRESSIONS"' \
  -F 'optimization_goal="APP_INSTALLS"' \
  -F 'campaign_id="<AD_CAMPAIGN_ID>"' \
  -F 'promoted_object=t' \
       "application_id": "<APP_ID>",
       "object_store_url": "<APP_STORE_URL>"
     }' \
  -F 'targeting=t' \
       "device_platforms": [
         "mobile"
       ],
       "facebook_positions": [
         "feed"
       ],
       "geo_locations": {
         "countries": [
           "US"
         ]
       },
       "publisher_platforms": [
         "facebook",
         "audience_network"
       ],
       "user_os": [
         "IOS"
       ]
     }' \
  -F 'status="PAUSED"' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets
```

--------------------------------

### Read Business Collaborative Ads Collaboration Requests (iOS)

Source: https://developers.facebook.com/docs/marketing-api/reference/business/collaborative_ads_collaboration_requests

This iOS SDK example demonstrates initiating a GET request to retrieve collaborative ads collaboration requests. The completion handler processes the result or error.

```Objective-C
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/{business-id}/collaborative_ads_collaboration_requests"
                                      parameters:params
                                      HTTPMethod:@"GET"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];
```

--------------------------------

### Reading Business Clients - JavaScript SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/business/clients

Example using the JavaScript SDK to make an API call to retrieve business clients. It demonstrates the asynchronous nature of the call and how to handle the response.

```javascript
/* make the API call */
FB.api(
    "/{business-id}/clients",
    function (response) {
      if (response && !response.error) {
        /* handle the result */
      }
    }
);

```

--------------------------------

### Create System User and Get Access Token

Source: https://developers.facebook.com/docs/marketing-api/business-manager/guides/on-behalf-of

Creates a system user within the client's Business Manager and retrieves its access token. This action installs the partner's app in the client's Business Manager. Requires `PARTNER_BM_ADMIN_SYSTEM_USER_ACCESS_TOKEN` with `business_management` and specified scope permissions.

```curl
curl -i -X POST \
 "https://graph.facebook.com/v24.0/<CLIENT_BM_ID>/access_token?scope=ads_management,pages_read_engagement&app_id=<APP_ID>&access_token=<PARTNER_BM_ADMIN_SYSTEM_USER_ACCESS_TOKEN>"
```

--------------------------------

### Data Sources API

Source: https://developers.facebook.com/docs/marketing-api/gateway-products/gateway-control-plane-api/setup-data-pipelines

APIs for managing data sources used by the Signals Gateway.

```APIDOC
## Data Sources API

### Description
APIs for managing data sources, including creation, retrieval, update, deletion, and configuration of Meta Pixel data sources within the Signals Gateway.

### Endpoints

#### Create Data Source
- **Method**: POST
- **Endpoint**: `/data-sources`

#### Get Data Sources
- **Method**: GET
- **Endpoint**: `/data-sources`
  - **Query Parameters**:
    - **pipelineId** (string) - Optional - Filter data sources by pipeline ID.

#### Update Data Source
- **Method**: PUT
- **Endpoint**: `/data-sources/{sourceId}`

#### Delete Data Source
- **Method**: DELETE
- **Endpoint**: `/data-sources/{sourceId}`

#### Generate Gateway Pixel Header Code
- **Method**: POST
- **Endpoint**: `/data-sources/{sourceId}/generate-header-code`

#### Update Gateway Pixel Data Source Config
- **Method**: PUT
- **Endpoint**: `/data-sources/{sourceId}/pixel-config`
  - **Request Body**:
    - **config** (object) - Required - The new configuration for the pixel data source.
```

--------------------------------

### Retrieve Lead Data using Facebook Marketing API

Source: https://developers.facebook.com/docs/marketing-api/guides/lead-ads/retrieving

Demonstrates how to retrieve specific lead data using the lead ID. This involves initializing the SDK with access tokens and making a GET request to the lead object. Ensure you have the necessary SDKs installed and configured.

```curl
curl -X GET \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/{lead-id}/
```

```javascript
'use strict';
const bizSdk = require('facebook-nodejs-business-sdk');
const Lead = bizSdk.Lead;

const access_token = '<ACCESS_TOKEN>';
const app_secret = '<APP_SECRET>';
const app_id = '<APP_ID>';
const id = '<LEAD_ID>';
const api = bizSdk.FacebookAdsApi.init(access_token);
const showDebugingInfo = true; // Setting this to true shows more debugging info.
if (showDebugingInfo) {
  api.setDebug(true);
}

const logApiCallResult = (apiCallName, data) => {
  console.log(apiCallName);
  if (showDebugingInfo) {
    console.log('Data:' + JSON.stringify(data));
  }
};

let fields, params;
fields = [
];
params = {
};
const sample_code = (new Lead(id)).get(
  fields,
  params
);
logApiCallResult('sample_code api call complete.', sample_code);
```

```php
require __DIR__ . '/vendor/autoload.php';

use FacebookAds\Object\Lead;
use FacebookAds\Api;
use FacebookAds\Logger\CurlLogger;

$access_token = '<ACCESS_TOKEN>';
$app_secret = '<APP_SECRET>';
$app_id = '<APP_ID>';
$id = '<LEAD_ID>';

$api = Api::init($app_id, $app_secret, $access_token);
$api->setLogger(new CurlLogger());

$fields = array(
);
$params = array(
);
echo json_encode((new Lead($id))->getSelf(
  $fields,
  $params
)->exportAllData(), JSON_PRETTY_PRINT);
```

```python
from facebook_business.adobjects.lead import Lead
from facebook_business.api import FacebookAdsApi

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<LEAD_ID>'
FacebookAdsApi.init(access_token=access_token)

fields = [
]
params = {
}
print Lead(id).get(
  fields=fields,
  params=params,
)
```

```java
import com.facebook.ads.sdk.*;
import java.io.File;
import java.util.Arrays;

public class SAMPLE_CODE_EXAMPLE {
  public static void main (String args[]) throws APIException {

    String access_token = "<ACCESS_TOKEN>";
    String app_secret = "<APP_SECRET>";
    String app_id = "<APP_ID>";
    String id = "<LEAD_ID>";
    APIContext context = new APIContext(access_token).enableDebug(true);

    new Lead(id, context).get()
      .execute();

  }
}
```

```ruby
require 'facebook_ads'

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<LEAD_ID>'

FacebookAds.configure do |config|
  config.access_token = access_token
  config.app_secret = app_secret
end

lead = FacebookAds::Lead.get(id ,'')
```

--------------------------------

### Install App for System User

Source: https://developers.facebook.com/docs/marketing-api/system-users/install-apps-and-generate-tokens

Allows an app to call APIs on behalf of a system user. Both the system user and the app must belong to the same Business Manager. Only apps with Ads Management API standard access or above can be installed.

```APIDOC
## POST /applications

### Description
Installs a specified app for a given system user, granting it permission to make API calls on behalf of that user. This is a prerequisite for generating access tokens for server-to-server interactions.

### Method
POST

### Endpoint
`https://graph.facebook.com/{API-VERSION}/{SYSTEM-USER-ID}/applications`

### Parameters
#### Path Parameters
- **API-VERSION** (string) - Required - The version of the Facebook Graph API.
- **SYSTEM-USER-ID** (string) - Required - The ID of the system user for whom the app is being installed.

#### Form Data Parameters
- **business_app** (string) - Required - The ID of the app to be installed.
- **access_token** (string) - Required - An access token for an admin user, admin system user, or another system user.

### Request Example
```curl
curl \
-F "business_app=APP-ID" \
-F "access_token=ACCESS-TOKEN" \
"https://graph.facebook.com/API-VERSION/SYSTEM-USER-ID/applications"
```

### Response
#### Success Response (200)
- **success** (boolean) - Indicates whether the app installation was successful.
```

--------------------------------

### Read Assigned Product Catalogs (iOS SDK)

Source: https://developers.facebook.com/docs/marketing-api/reference/business-user/assigned_product_catalogs

Provides an example of how to retrieve assigned product catalogs using the Facebook iOS SDK. It outlines the process of initializing a GraphRequest with the graph path, parameters, and HTTP method, and starting the request with a completion handler.

```objective-c
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/{business-user-id}/assigned_product_catalogs"
                                      parameters:params
                                      HTTPMethod:@"GET"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];
```

--------------------------------

### POST /product_sets

Source: https://developers.facebook.com/docs/marketing-api/dynamic-ads-for-hotels/catalog

Creates a product set for a given product catalog. This is essential for setting up hotel ads, allowing you to define specific subsets of your hotel catalog based on filters.

```APIDOC
## POST /product_sets

### Description
Creates a product set for a given product catalog. This is essential for setting up hotel ads, allowing you to define specific subsets of your hotel catalog based on filters.

### Method
POST

### Endpoint
`https://graph.facebook.com/vX.X/<PRODUCT_CATALOG_ID>/product_sets`

### Parameters
#### Path Parameters
- **PRODUCT_CATALOG_ID** (string) - Required - The ID of the product catalog to which the product set will be added.

#### Query Parameters
- **name** (string) - Required - The name of the product set.
- **filter** (object) - Optional - A JSON object defining the filters to apply to the hotel catalog. If omitted, the product set will include all hotels in the catalog.
  - **brand** (object) - Example filter for brand.
    - **i_contains** (string) - Case-insensitive substring match.
    - **i_not_contains** (string) - Case-insensitive non-substring match.
    - **contains** (string) - Substring match.
    - **not_contains** (string) - Non-substring match.
    - **eq** (string) - Case-insensitive exact match.
    - **neq** (string) - Case-insensitive non-exact match.
- **access_token** (string) - Required - Your Facebook API access token.

### Request Example (cURL)
```curl
curl -X POST \
  -F 'name="Test Hotel Set"' \
  -F 'filter={ \n       "brand": { \n         "i_contains": "sample brand" \n       } \n     }' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<PRODUCT_CATALOG_ID>/product_sets
```

### Response
#### Success Response (200)
- **id** (string) - The unique identifier for the newly created product set.
- **name** (string) - The name of the product set.

#### Response Example
```json
{
  "id": "1234567890",
  "name": "Test Hotel Set"
}
```

### Error Handling
Refer to the general Facebook Marketing API error handling documentation for details on potential errors.
```

--------------------------------

### Read Omega Customer Trx Campaigns - HTTP

Source: https://developers.facebook.com/docs/marketing-api/reference/omega-customer-trx/campaigns

Example of how to read Omega Customer Trx Campaigns using an HTTP GET request to the Facebook Graph API. This method is fundamental for retrieving campaign data.

```http
GET /v24.0/{omega-customer-trx-id}/campaigns HTTP/1.1
Host: graph.facebook.com
```

--------------------------------

### Create Product Audience with iOS SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-account/product_audiences

This example demonstrates creating a product audience using the Facebook iOS SDK. It involves setting up parameters for the audience name, product set ID, inclusions, and exclusions, and then initiating the API call.

```objective-c
NSDictionary *params = @{
  @"name": @"Test Iphone Product Audience",
  @"product_set_id": @"<PRODUCT_SET_ID>",
  @"inclusions": @"[\"{\"retention_seconds\":86400,\"rule\":{\"and\":[{\"event\":{\"eq\":\"AddToCart\"}},{\"userAgent\":{\"i_contains\":\"iPhone\"}}]}}\"]",
  @"exclusions": @"[\"{\"retention_seconds\":172800,\"rule\":{\"event\":{\"eq\":\"Purchase\"}}}\"]",
};
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/act_<AD_ACCOUNT_ID>/product_audiences"
                                      parameters:params
                                      HTTPMethod:@"POST"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];
```

--------------------------------

### Read Business Owned Instagram Accounts (iOS SDK)

Source: https://developers.facebook.com/docs/marketing-api/reference/business/owned_instagram_accounts

This iOS SDK example shows how to initiate a GET request for owned Instagram accounts usingFBSDKGraphRequest. The response and any errors are handled in the startWithCompletionHandler block.

```Objective-C
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/{business-id}/owned_instagram_accounts"
                                      parameters:params
                                      HTTPMethod:@"GET"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];
```

--------------------------------

### Create System User Token and Marketing API Calls (Bash)

Source: https://developers.facebook.com/docs/marketing-api/business-manager/system-user/overview

This bash script demonstrates how to create a system user access token and subsequently use it to make calls to the Marketing API. It requires a pre-configured Business Manager, a Facebook app, and appropriate permissions.

```bash
# Example bash script structure (actual implementation details omitted for brevity)
# 1. Obtain System User Access Token
#    This would involve making an API call to Facebook's Graph API endpoints.
#    Example conceptual step:
#    SYSTEM_USER_TOKEN=$(curl -X POST 'https://graph.facebook.com/vX.X/oauth/access_token?...' -d 'client_id=APP_ID&client_secret=APP_SECRET&grant_type=client_credentials&scope=...')

# 2. Use the token to make Marketing API calls
#    Example conceptual step:
#    curl -G 'https://graph.facebook.com/vX.X/act_AD_ACCOUNT_ID/campaigns' \
#      -d 'access_token='$SYSTEM_USER_TOKEN

```

--------------------------------

### Read Business Owned Instagram Accounts (PHP SDK)

Source: https://developers.facebook.com/docs/marketing-api/reference/business/owned_instagram_accounts

This PHP SDK example demonstrates how to make a GET request to the owned_instagram_accounts endpoint. It includes error handling for Facebook API and SDK exceptions.

```PHP
/* PHP SDK v5.0.0 */
/* make the API call */
try {
  // Returns a `Facebook\FacebookResponse` object
  $response = $fb->get(
    '/{business-id}/owned_instagram_accounts',
    '{access-token}'
  );
} catch(Facebook\Exceptions\FacebookResponseException $e) {
  echo 'Graph returned an error: ' . $e->getMessage();
  exit;
} catch(Facebook\Exceptions\FacebookSDKException $e) {
  echo 'Facebook SDK returned an error: ' . $e->getMessage();
  exit;
}
$graphNode = $response->getGraphNode();
/* handle the result */
```

--------------------------------

### Reading Business Agencies - iOS SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/business/agencies

This iOS SDK example shows how to make a GET request to the Facebook Graph API to retrieve a list of businesses related to your agency. It utilizesFBSDKGraphRequest and a completion handler to process the results.

```Objective-C
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/{business-id}/agencies"
                                      parameters:params
                                      HTTPMethod:@"GET"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];
```

--------------------------------

### Read Adnetworkanalytics with Facebook SDKs

Source: https://developers.facebook.com/docs/marketing-api/reference/business/adnetworkanalytics

Code examples for retrieving ad network analytics data using different Facebook SDKs. These snippets demonstrate how to make GET requests to the adnetworkanalytics endpoint, handling potential Graph API or SDK exceptions and processing the response.

```http
GET /v24.0/{business-id}/adnetworkanalytics HTTP/1.1
Host: graph.facebook.com
```

```php
/* PHP SDK v5.0.0 */
/* make the API call */
try {
  // Returns a `Facebook\FacebookResponse` object
  $response = $fb->get(
    '/{business-id}/adnetworkanalytics',
    '{access-token}'
  );
} catch(Facebook\Exceptions\FacebookResponseException $e) {
  echo 'Graph returned an error: ' . $e->getMessage();
  exit;
} catch(Facebook\Exceptions\FacebookSDKException $e) {
  echo 'Facebook SDK returned an error: ' . $e->getMessage();
  exit;
}
$graphNode = $response->getGraphNode();
/* handle the result */
```

```javascript
/* make the API call */
FB.api(
    "/{business-id}/adnetworkanalytics",
    function (response) {
      if (response && !response.error) {
        /* handle the result */
      }
    }
);
```

```java
/* make the API call */
new GraphRequest(
    AccessToken.getCurrentAccessToken(),
    "/{business-id}/adnetworkanalytics",
    null,
    HttpMethod.GET,
    new GraphRequest.Callback() {
        public void onCompleted(GraphResponse response) {
            /* handle the result */
        }
    }
).executeAsync();
```

```objective-c
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/{business-id}/adnetworkanalytics"
                                      parameters:params
                                      HTTPMethod:@"GET"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];
```

--------------------------------

### Read Ad Creative Feature Details - iOS SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-creative-feature-details

This iOS SDK example demonstrates how to make a GET request for Ad Creative Feature Details. The result and any errors are handled in the completion handler.

```Objective-C
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"...?fields={fieldname_of_type_AdCreativeFeatureDetails}"
                                      parameters:params
                                      HTTPMethod:@"GET"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];

```

--------------------------------

### Read Catalog Item App Links (PHP SDK)

Source: https://developers.facebook.com/docs/marketing-api/reference/catalog-item-app-links

This PHP SDK example shows how to fetch catalog item app links by making a GET request to the Marketing API. It includes error handling for Graph API and SDK-specific exceptions.

```php
/* PHP SDK v5.0.0 */
/* make the API call */
try {
  // Returns a `Facebook\FacebookResponse` object
  $response = $fb->get(
    '...?fields={fieldname_of_type_CatalogItemAppLinks}',
    '{access-token}'
  );
} catch(Facebook\Exceptions\FacebookResponseException $e) {
  echo 'Graph returned an error: ' . $e->getMessage();
  exit;
} catch(Facebook\Exceptions\FacebookSDKException $e) {
  echo 'Facebook SDK returned an error: ' . $e->getMessage();
  exit;
}
$graphNode = $response->getGraphNode();
/* handle the result */
```

--------------------------------

### Read Ad Campaign Delivery Estimate - Android SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-campaign-delivery-estimate

This Android SDK example demonstrates how to get ad campaign delivery estimates. It utilizes the `GraphRequest` class and an asynchronous callback for handling results.

```Java
/* make the API call */
new GraphRequest(
    AccessToken.getCurrentAccessToken(),
    "...?fields={fieldname_of_type_AdCampaignDeliveryEstimate}",
    null,
    HttpMethod.GET,
    new GraphRequest.Callback() {
        public void onCompleted(GraphResponse response) {
            /* handle the result */
        }
    }
).executeAsync();

```

--------------------------------

### Install App for System User

Source: https://developers.facebook.com/docs/marketing-api/businessmanager/systemuser/install-apps-and-generate-tokens

Installs an application for a system user, allowing the app to call APIs on behalf of that user. Both the system user and the app must belong to the same Business Manager. Only apps with Ads Management API standard access or above can be installed.

```APIDOC
## POST /applications

### Description
Installs an application for a system user, allowing the app to call APIs on behalf of that user. Both the system user and the app must belong to the same Business Manager. Only apps with Ads Management API standard access or above can be installed.

### Method
POST

### Endpoint
`https://graph.facebook.com/API-VERSION/SYSTEM-USER-ID/applications`

### Parameters
#### Path Parameters
- **SYSTEM-USER-ID** (string) - Required - The ID of the system user for whom the app is being installed.
- **API-VERSION** (string) - Required - The version of the Facebook Graph API.

#### Form Data Parameters
- **business_app** (string) - Required - The ID of the app being installed.
- **access_token** (string) - Required - The access token of an admin user, admin system user, or another system user.

### Request Example
```curl
curl \
 -F "business_app=APP-ID" \
 -F "access_token=ACCESS-TOKEN" \
 "https://graph.facebook.com/API-VERSION/SYSTEM-USER-ID/applications"
```

### Response
#### Success Response (200)
- **success** (boolean) - Indicates if the app installation was successful.
```

--------------------------------

### XML Example ATOM - With Deep Links

Source: https://developers.facebook.com/docs/marketing-api/reference/product-item

An example of an ATOM feed for product data including deep links for various mobile platforms.

```APIDOC
## XML Example ATOM - With Deep Links

### Description
This ATOM XML feed example demonstrates how to include deep links for iOS, iPhone, iPad, and Android applications, allowing users to open product details directly in a mobile app.

### Content
```xml
<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:g="http://base.google.com/ns/1.0">
    <title>Test Store</title>
    <link rel="self" href="http://www.example.com"/>
 
    <entry>
        <g:id>DB_1</g:id>
        <g:title>Dog Bowl In Blue</g:title>
        <g:description>Solid plastic Dog Bowl in marine blue color</g:description>
        <g:link>http://www.example.com/bowls/db-1.html</g:link>
        <g:image_link>http://images.example.com/DB_1.png</g:image_link>
        <g:brand>Example</g:brand>
        <g:condition>new</g:condition>
        <g:availability>in stock</g:availability>
        <g:price>9.99 GBP</g:price>
        <g:google_product_category>Animals &gt; Pet Supplies</g:google_product_category> 
        <applink property="ios_url" content="example-ios://electronic" />
        <applink property="ios_app_store_id" content="42" />
        <applink property="ios_app_name" content="Electronic Example iOS" />
        <applink property="iphone_url" content="example-iphone://electronic" />
        <applink property="iphone_app_store_id" content="43" />
        <applink property="iphone_app_name" content="Electronic Example iPhone" />
        <applink property="ipad_url" content="example-ipad://electronic" />
        <applink property="ipad_app_store_id" content="44" />
        <applink property="ipad_app_name" content="Electronic Example iPad" />
        <applink property="android_url" content="example-android://electronic" />
        <applink property="android_package" content="com.electronic" />
        <applink property="android_class" content="com.electronic.Example" />
        <applink property="android_app_name" content="Electronic Example Android" />
        <applink property="windows_phone_url" content="example-windows://electronic" />
        <applink property="windows_phone_app_id" content="64ec0d1b-5b3b-4c77-a86b-5e12d465edc0" />
        <applink property="windows_phone_app_name" content="Electronic Example Windows" />
    </entry>
</feed>
```
```

--------------------------------

### Conversions API - Deduplication Setup

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/app-events

Information on setting up deduplication for app events to prevent duplicate traffic between different integration channels.

```APIDOC
## Deduplication Setup for Multiple Channels

### Description
The deduplication mechanism is required to remove duplicate event traffic between the Conversions API integration and other existing integrations like SDK, MMPs, and App Events API. For app events, the logic leverages the `event_id` and `event_name` fields.

### Key Concepts
- **`event_id`**: An identifier that uniquely distinguishes between similar events. Inaccurate `event_id`s can lead to incorrect deduplication.
- **`event_name`**: Used in conjunction with `event_id` for deduplication.

### Implementation Notes
- **App Install Events**: A built-in deduplication mechanism already exists for app install events, attributing only one install within a 90-day window. No additional implementation is required for install events.
- **Other App Events**: For other app events, implement deduplication by ensuring consistent `event_id` values across different channels.

### Resources
- Refer to the developer documentation for detailed implementation guidance on setting up app events and deduplication.
```

--------------------------------

### Create Ad using Facebook Marketing API (Python)

Source: https://developers.facebook.com/docs/marketing-api/adgroup

This Python example shows how to create an ad using the Facebook Marketing API. It initializes the FacebookAdsApi with access token and then defines the ad's properties, including name, ad set ID, and creative, before calling the create_ad method.

```python
from facebook_business.adobjects.adaccount import AdAccount
from facebook_business.adobjects.ad import Ad
from facebook_business.api import FacebookAdsApi

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_ACCOUNT_ID>'
FacebookAdsApi.init(access_token=access_token)

fields = [
]
params = {
  'name': 'My AdGroup',
  'adset_id': '<adSetID>',
  'creative': {'creative_id':'<adCreativeID>'},
  'status': 'PAUSED',
  'authorization_category': 'POLITICAL',
}
print AdAccount(id).create_ad(
  fields=fields,
  params=params,
)
```

--------------------------------

### Configuring Relevant Comments Feature in Facebook Ads API

Source: https://developers.facebook.com/docs/marketing-api/creative/advantage-creative/get-started

This JSON shows how to opt-in to the `inline_comment` feature, which displays the most relevant comment below your ad. Setting `inline_comment.enroll_status` to `OPT_IN` enables this feature on Facebook and Instagram.

```JSON
{
    "creative_features_spec": {
        "inline_comment": {
            "enroll_status": "OPT_IN"
        }
    }
}
```

--------------------------------

### Read Business Collaborative Ads Suggested Partners (PHP SDK)

Source: https://developers.facebook.com/docs/marketing-api/reference/business/collaborative_ads_suggested_partners

This PHP SDK example demonstrates how to fetch suggested collaborative ads partners. It utilizes the Facebook SDK for PHP and includes error handling for API and SDK exceptions. Ensure you have the SDK installed and configured.

```php
/* PHP SDK v5.0.0 */
/* make the API call */
try {
  // Returns a `Facebook\FacebookResponse` object
  $response = $fb->get(
    '/{business-id}/collaborative_ads_suggested_partners',
    '{access-token}'
  );
} catch(Facebook\Exceptions\FacebookResponseException $e) {
  echo 'Graph returned an error: ' . $e->getMessage();
  exit;
} catch(Facebook\Exceptions\FacebookSDKException $e) {
  echo 'Facebook SDK returned an error: ' . $e->getMessage();
  exit;
}
$graphNode = $response->getGraphNode();
/* handle the result */
```

--------------------------------

### Read Ad Account Saved Audiences - iOS SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-account/saved_audiences

Demonstrates how to get saved audiences using the iOS SDK for the Facebook Graph API. It shows the setup of `FBSDKGraphRequest` and the handling of the completion block.

```objective-c
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/{ad-account-id}/saved_audiences"
                                      parameters:params
                                      HTTPMethod:@"GET"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];
```

--------------------------------

### Read Custom Audience Ads - iOS SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/custom-audience/ads

This iOS SDK example demonstrates how to initiate a GET request to the Facebook Graph API to fetch ads for a custom audience. The completion handler processes the results or errors.

```objectivec
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/{custom-audience-id}/ads"
                                      parameters:params
                                      HTTPMethod:@"GET"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];
```

--------------------------------

### Sample Response for Create Conversion API Gateway Pipeline

Source: https://developers.facebook.com/docs/marketing-api/gateway-products/gateway-control-plane-api/setup-data-pipelines/data-pipelines

This JSON object shows a sample response after successfully creating a Conversion API Gateway pipeline. It includes the generated pipeline ID, name, active status, and details about its data sources and destinations.

```json
{
    "data": {
        "tenantMutations": {
            "dataPipelineMutations": {
                "createConversionApiGatewayPipeline": {
                    "id": "sg_v1_pl_ad286034-eeec-469b-a036-72d88e87b8cc",
                    "name": "Conversions API Gateway (258139843760841)",
                    "active": true,
                    "dataSources": [
                        {
                            "id": "258139843760841",
                            "type": "META_PIXEL"
                        }
                    ],
                    "dataDestinations": [
                        {
                            "id": "sg_v1_dd_cc40dd55-070b-4deb-8f6a-63876c1ab0d7",
                            "type": "META_CONVERSIONS_API"
                        }
                    ],
                    "dataFilter": {
                        "filterStatus": false,
                        "blockedEventTypes": []
                    },
                    "pipelineDestinationFilters": []
                }
            }
        }
    }
}
```

--------------------------------

### POST /act_<AD_ACCOUNT_ID>/adsets - Mobile Targeting Example

Source: https://developers.facebook.com/docs/marketing-api/targeting-specs

This example demonstrates how to create an ad set targeting specific mobile devices and operating systems using the Marketing API.

```APIDOC
## POST /act_<AD_ACCOUNT_ID>/adsets

### Description
Create an ad set with specific targeting criteria, including mobile device and operating system.

### Method
POST

### Endpoint
`https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets`

### Parameters
#### Path Parameters
- **AD_ACCOUNT_ID** (string) - Required - Your ad account ID.

#### Query Parameters
- **access_token** (string) - Required - Your valid access token.

#### Request Body
- **name** (string) - Required - The name of the ad set.
- **optimization_goal** (string) - Required - The optimization goal for the ad set (e.g., REACH).
- **billing_event** (string) - Required - The billing event for the ad set (e.g., IMPRESSIONS).
- **bid_amount** (string) - Required - The bid amount for the ad set.
- **daily_budget** (string) - Required - The daily budget for the ad set.
- **campaign_id** (string) - Required - The ID of the campaign to associate with this ad set.
- **targeting** (object) - Required - An object containing targeting criteria.
  - **geo_locations** (object) - Optional - Geographical targeting.
    - **countries** (array) - Optional - Array of country codes (e.g., `["US"]`).
  - **user_device** (array) - Optional - Array of specific user devices to target (e.g., `["Galaxy S6","One m9"]`).
  - **user_os** (array) - Optional - Array of operating systems to target (e.g., `["android"]`).
- **status** (string) - Required - The status of the ad set (e.g., ACTIVE).

### Request Example
```curl
curl -X POST \
  -F 'name=My AdSet' \
  -F 'optimization_goal=REACH' \
  -F 'billing_event=IMPRESSIONS' \
  -F 'bid_amount=2' \
  -F 'daily_budget=1000' \
  -F 'campaign_id=<CAMPAIGN_ID>' \
  -F 'targeting={ 
    "geo_locations": {"countries":["US"]}, 
    "user_device": ["Galaxy S6","One m9"], 
    "user_os": ["android"] 
  }' \
  -F 'status=ACTIVE' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets
```

### Response
#### Success Response (200)
- **id** (string) - The ID of the created ad set.
- **name** (string) - The name of the ad set.

#### Response Example
```json
{
  "id": "<AD_SET_ID>",
  "name": "My AdSet"
}
```
```

--------------------------------

### Create Campaign Example - Facebook Marketing API

Source: https://developers.facebook.com/docs/marketing-api/guides/advantage-shopping-campaigns

This code snippet demonstrates how to create an Advantage+ Shopping Campaign using the Facebook Marketing API. It requires specifying campaign parameters, including optimization goals and budget.

```json
{
  "name": "Advantage+ Shopping Campaign",
  "objective": "CONVERSIONS",
  "status": "PAUSED",
  "special_ad_category": "NONE",
  "campaign_optimization_sub_type": "ASC",
  "daily_budget": "1000",
  "access_token": "YOUR_ACCESS_TOKEN"
}
```

--------------------------------

### Read Business Owned Instagram Accounts (Android SDK)

Source: https://developers.facebook.com/docs/marketing-api/reference/business/owned_instagram_accounts

This Android SDK example demonstrates making a GET request for owned Instagram accounts using the GraphRequest class. The result is handled in the onCompleted callback.

```Java
/* make the API call */
new GraphRequest(
    AccessToken.getCurrentAccessToken(),
    "/{business-id}/owned_instagram_accounts",
    null,
    HttpMethod.GET,
    new GraphRequest.Callback() {
        public void onCompleted(GraphResponse response) {
            /* handle the result */
        }
    }
).executeAsync();
```

--------------------------------

### Read Ad Creative Feature Customizations - iOS SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-creative-feature-customizations

This iOS SDK example shows how to get Ad Creative Feature Customizations using `FBSDKGraphRequest`. The `startWithCompletionHandler` method processes the result or any errors encountered during the API call.

```objectivec
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"...?fields={fieldname_of_type_AdCreativeFeatureCustomizations}"
                                      parameters:params
                                      HTTPMethod:@"GET"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];
```

--------------------------------

### Read Business Users (PHP SDK)

Source: https://developers.facebook.com/docs/marketing-api/reference/business/business_users

Fetches business users using the Facebook PHP SDK. This example demonstrates making a GET request to the /{business-id}/business_users endpoint and handling potential Graph API or SDK exceptions.

```php
/* PHP SDK v5.0.0 */
/* make the API call */
try {
  // Returns a `Facebook\FacebookResponse` object
  $response = $fb->get(
    '/{business-id}/business_users',
    '{access-token}'
  );
} catch(Facebook\Exceptions\FacebookResponseException $e) {
  echo 'Graph returned an error: ' . $e->getMessage();
  exit;
} catch(Facebook\Exceptions\FacebookSDKException $e) {
  echo 'Facebook SDK returned an error: ' . $e->getMessage();
  exit;
}
$graphNode = $response->getGraphNode();
/* handle the result */
```

--------------------------------

### Create Ad with Flexible Ad Format (Marketing API)

Source: https://developers.facebook.com/docs/marketing-api/flexible-ad-format

Demonstrates how to create an ad utilizing the flexible ad format by specifying a `creative_asset_groups_spec`. This allows for dynamic grouping of images, videos, texts, and call-to-actions. Requires `adset_id`, `creative_asset_groups_spec`, `status`, and `access_token`. Note limitations on campaign objectives and asset specifications.

```bash
curl \
  -F 'adset_id=<ADSET_ID>' \
  -F "creative={
    'name': 'Sample Creative',
    'object_story_spec': {  
      ...    
    },
  }" \
  -F 'creative_asset_groups_spec={"groups": [{"images": [{"hash": <IMAGE_HASH_1>}, {"hash": <IMAGE_HASH_2>}],"videos": [{"video_id": <VIDEO_ID_1>}, {"video_id": <VIDEO_ID_2>}],"texts": [{"text": "Summer Sale", "text_type": "primary_text"}, {"text": "Everything 50% Off", "text_type": "headline"}],"call_to_action": {"type": "LEARN_MORE", "value": {"link": "https://www.example.com/"}}}]}' \
  -F 'status=PAUSED' \
  -F "access_token=<ACCESS_TOKEN>" \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
```

--------------------------------

### Create Ad Example - Facebook Marketing API

Source: https://developers.facebook.com/docs/marketing-api/guides/advantage-shopping-campaigns

This snippet shows how to create an ad for an Advantage+ Shopping Campaign using the Facebook Marketing API. It involves linking the ad to a creative and an ad set.

```json
{
  "name": "ASC Ad",
  "adset_id": "ADSET_ID",
  "creative": {
    "creative_id": "CREATIVE_ID"
  },
  "status": "PAUSED",
  "access_token": "YOUR_ACCESS_TOKEN"
}
```

--------------------------------

### Read Ad Account Reach Estimate (cURL)

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-account/reachestimate

This cURL example demonstrates how to make a GET request to the Ad Account Reachestimate endpoint. It requires an AD_ACCOUNT_ID and an ACCESS_TOKEN, and accepts a targeting_spec parameter to define the audience criteria.

```shell
curl -X GET -G \
  -d 'targeting_spec={
       "geo_locations": {
         "countries": [
           "US"
         ]
       },
       "age_min": 20,
       "age_max": 40
     }' \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/reachestimate
```

--------------------------------

### Product Catalog Hotels - Reading (Example with Summary)

Source: https://developers.facebook.com/docs/marketing-api/reference/product-catalog/hotels

Example cURL commands to read hotel information, including fetching the total count and filtering hotels by name.

```APIDOC
## GET /<PRODUCT_CATALOG_ID>/hotels

### Description
Retrieves hotel information from a product catalog. Supports fetching summary data like total count and filtering results.

### Method
GET

### Endpoint
https://graph.facebook.com/<API_VERSION>/<PRODUCT_CATALOG_ID>/hotels

### Parameters
#### Query Parameters
- **summary** (string) - Optional. If set to `total_count`, returns the total number of hotels.
- **fields** (list<string>) - Optional. Specifies which fields to return for each hotel.
- **filter** (Object) - Optional. Allows filtering of hotels based on specified criteria. Example: `{"name":{"i_contains":"suites"}}`.
- **access_token** (string) - Required. Your valid API access token.

### Request Example (Total Count)
```curl
curl -G \
-d "summary=total_count" \
-d "access_token=<ACCESS_TOKEN>" \
https://graph.facebook.com/<API_VERSION>/<PRODUCT_CATALOG_ID>/hotels
```

### Request Example (Filter by Name)
```curl
curl -G \
-d 'fields=["hotel_id","name"]' \
-d 'filter={"name":{"i_contains":"suites"}}' \
-d 'access_token=<ACCESS_TOKEN>'
https://graph.facebook.com/<API_VERSION>/<PRODUCT_CATALOG_ID>/hotels
```

### Response
#### Success Response (200)
- **data** (list) - A list of hotel objects matching the query.
- **summary** (Object) - Contains summary information if requested (e.g., `total_count`).

#### Response Example (Filtered Results)
```json
{
  "data": [
    {
      "hotel_id": "123",
      "name": "Grand Suites Hotel"
    }
  ],
  "paging": {
    "cursors": {
      "before": "...', 
      "after": '...'
    }
  }
}
```
```

--------------------------------

### Create Product Feed using Facebook Marketing API (PHP, JavaScript, Android, iOS, cURL)

Source: https://developers.facebook.com/docs/marketing-api/reference/product-catalog/product_feeds

This snippet shows how to create a product feed for a product catalog using the Facebook Marketing API. It includes examples for PHP SDK, JavaScript SDK, Android SDK, iOS SDK, and cURL. Ensure you have the necessary SDKs installed and a valid access token.

```php
/* PHP SDK v5.0.0 */
/* make the API call */
try {
  // Returns a `Facebook\FacebookResponse` object
  $response = $fb->post(
    '/{product-catalog-id}/product_feeds',
    array (
      'name' => 'Test Feed',
      'schedule' => '{"interval":"DAILY","url":"http://www.example.com/sample_feed.tsv","hour":"22"}',
    ),
    '{access-token}'
  );
} catch(Facebook\Exceptions\FacebookResponseException $e) {
  echo 'Graph returned an error: ' . $e->getMessage();
  exit;
} catch(Facebook\Exceptions\FacebookSDKException $e) {
  echo 'Facebook SDK returned an error: ' . $e->getMessage();
  exit;
}
$graphNode = $response->getGraphNode();
/* handle the result */

```

```javascript
/* make the API call */
FB.api(
    "/{product-catalog-id}/product_feeds",
    "POST",
    {
        "name": "Test Feed",
        "schedule": "{\"interval\":\"DAILY\",\"url\":\"http:\/\/www.example.com\/sample_feed.tsv\",\"hour\":\"22\"}"
    },
    function (response) {
      if (response && !response.error) {
        /* handle the result */
      }
    }
);

```

```java
Bundle params = new Bundle();
params.putString("name", "Test Feed");
params.putString("schedule", "{\"interval\":\"DAILY\",\"url\":\"http://www.example.com/sample_feed.tsv\",\"hour\":\"22\"}");
/* make the API call */
new GraphRequest(
    AccessToken.getCurrentAccessToken(),
    "/{product-catalog-id}/product_feeds",
    params,
    HttpMethod.POST,
    new GraphRequest.Callback() {
        public void onCompleted(GraphResponse response) {
            /* handle the result */
        }
    }
).executeAsync();

```

```objectivec
NSDictionary *params = @{
  @"name": @"Test Feed",
  @"schedule": @"{\"interval\":\"DAILY\",\"url\":\"http://www.example.com/sample_feed.tsv\",\"hour\":\"22\"}",
};
/* make the API call */
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
                               initWithGraphPath:@"/{product-catalog-id}/product_feeds"
                                      parameters:params
                                      HTTPMethod:@"POST"];
[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection,
                                      id result,
                                      NSError *error) {
    // Handle the result
}];

```

```curl
curl -X POST \
  -F 'name="Test Feed"' \
  -F 'schedule={
       "interval": "DAILY",
       "url": "http://www.example.com/sample_feed.tsv",
       "hour": "22"
     }' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/{product-catalog-id}/product_feeds

```

--------------------------------

### Create Creative Example - Facebook Marketing API

Source: https://developers.facebook.com/docs/marketing-api/guides/advantage-shopping-campaigns

This snippet illustrates creating a creative for an Advantage+ Shopping Campaign using the Facebook Marketing API. It includes defining primary text, links, and media.

```json
{
  "name": "ASC Creative",
  "object_story_spec": {
    "page_id": "PAGE_ID",
    "link_data": {
      "message": "Shop our latest collection!",
      "link": "https://www.example.com",
      "image_hash": "IMAGE_HASH"
    }
  },
  "access_token": "YOUR_ACCESS_TOKEN"
}
```

--------------------------------

### Retrieve Custom Audience Details - Python

Source: https://developers.facebook.com/docs/marketing-api/audiences/guides/enhanced-website-custom-audiences

This Python snippet demonstrates fetching custom audience details, specifically 'name' and 'rule', using the Facebook Business SDK. It requires the `facebook_business` library to be installed. The `get` method is used on a `CustomAudience` object.

```python
from facebook_business.adobjects.customaudience import CustomAudience
from facebook_business.api import FacebookAdsApi

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<CUSTOM_AUDIENCE_ID>'
FacebookAdsApi.init(access_token=access_token)

fields = [
  'name',
  'rule',
]
params = {
}
print CustomAudience(id).get(
  fields=fields,
  params=params,
)
```

--------------------------------

### Create Ad Set (Java)

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-campaign

This snippet shows how to create an ad set with a daily budget using the Facebook Marketing API in Java.

```APIDOC
## POST /act_AD_ACCOUNT_ID/adsets

### Description
Creates a new ad set with a specified daily budget and targeting options.

### Method
POST

### Endpoint
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets

### Parameters
#### Path Parameters
None

#### Query Parameters
- **access_token** (string) - Required - Your Facebook API access token.

#### Request Body
- **name** (string) - Required - The name of the ad set.
- **optimization_goal** (string) - Required - The optimization goal for the ad set (e.g., REACH, LINK_CLICKS).
- **billing_event** (string) - Required - The billing event for the ad set (e.g., IMPRESSIONS, LINK_CLICKS).
- **bid_amount** (long) - Optional - The bid amount for the ad set.
- **daily_budget** (long) - Optional - The daily budget for the ad set.
- **campaign_id** (string) - Required - The ID of the campaign to which the ad set belongs.
- **targeting** (Targeting object) - Required - Targeting specifications for the ad set.
  - **facebook_positions** (array of strings) - Optional - Placement within Facebook (e.g., "feed").
  - **geo_locations** (TargetingGeoLocation object) - Required - Geographic targeting.
    - **countries** (array of strings) - Required - List of country codes.
- **status** (string) - Required - The status of the ad set (e.g., PAUSED, ACTIVE).
- **promoted_object** (string) - Required - JSON string representing the object being promoted (e.g., "{\"page_id\":\"<pageID>\"}").

### Request Example
```java
new AdAccount(id, context).createAdSet()
  .setName("My Reach Ad Set")
  .setOptimizationGoal(AdSet.EnumOptimizationGoal.VALUE_REACH)
  .setBillingEvent(AdSet.EnumBillingEvent.VALUE_IMPRESSIONS)
  .setBidAmount(2L)
  .setDailyBudget(1000L)
  .setCampaignId("<adCampaignLinkClicksID>")
  .setTargeting(
      new Targeting()
        .setFieldFacebookPositions(Arrays.asList("feed"))
        .setFieldGeoLocations(
          new TargetingGeoLocation()
            .setFieldCountries(Arrays.asList("US"))
        )
    )
  .setStatus(AdSet.EnumStatus.VALUE_PAUSED)
  .setPromotedObject("{\"page_id\":\"<pageID>\"}")
  .execute();
```

### Response
#### Success Response (200)
- **id** (string) - The ID of the newly created ad set.
- **name** (string) - The name of the ad set.
- **effective_status** (string) - The effective status of the ad set.

#### Response Example
```json
{
  "id": "<AD_SET_ID>",
  "name": "My Reach Ad Set",
  "effective_status": "PAUSED"
}
```
```

--------------------------------

### Read Ad Account Custom Conversions - JavaScript SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-account/customconversions

Provides an example of how to call the Facebook API to get Ad Account Custom Conversions using the JavaScript SDK. It includes a callback function for handling the response.

```JavaScript
/* make the API call */
FB.api(
    "/{ad-account-id}/customconversions",
    function (response) {
      if (response && !response.error) {
        /* handle the result */
      }
    }
);
```

--------------------------------

### Create Ad with Redownload Option (Python SDK)

Source: https://developers.facebook.com/docs/marketing-api/adgroup

This Python example shows how to create an ad with the redownload option using the Facebook Marketing API SDK. It initializes the FacebookAdsApi with the access token and then uses the AdAccount object to create the ad, specifying parameters including 'redownload'.

```python
from facebook_business.adobjects.adaccount import AdAccount
from facebook_business.adobjects.ad import Ad
from facebook_business.api import FacebookAdsApi

access_token = '<ACCESS_TOKEN>'
app_secret = '<APP_SECRET>'
app_id = '<APP_ID>'
id = '<AD_ACCOUNT_ID>'
FacebookAdsApi.init(access_token=access_token)

fields = [
]
params = {
  'name': 'My AdGroup with Redownload',
  'adset_id': '<adSetID>',
  'creative': {'creative_id':'<adCreativeID>'},
  'redownload': '1',
  'status': 'PAUSED',
}
print AdAccount(id).create_ad(
  fields=fields,
  params=params,
)
```

--------------------------------

### Read Ad Account Agencies - Graph API

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-account/agencies

Demonstrates how to retrieve a list of agencies associated with a specific ad account using a GET request to the Graph API. This example shows the raw HTTP request structure.

```http
GET /v24.0/{ad-account-id}/agencies HTTP/1.1
Host: graph.facebook.com
```

--------------------------------

### Python Server-Side Event Example

Source: https://developers.facebook.com/docs/marketing-api/facebook-pixel/server-side-api/using-the-api

Example of sending a 'Purchase' event to the Facebook Conversions API using Python.

```APIDOC
## POST /serverside/events

### Description
Sends server-side events to the Facebook Conversions API for tracking user actions and conversions.

### Method
POST

### Endpoint
/serverside/events

### Parameters
#### Query Parameters
- **access_token** (string) - Required - Your Facebook API access token.
- **pixel_id** (string) - Required - Your Facebook Pixel ID.

#### Request Body
- **events** (array) - Required - An array of event objects to be sent.
  - **event_name** (string) - Required - The name of the event (e.g., 'Purchase', 'Add to Cart').
  - **event_time** (integer) - Required - Unix timestamp of when the event occurred.
  - **user_data** (object) - Required - Information about the user.
    - **emails** (array) - Optional - Array of user emails (hashed).
    - **phones** (array) - Optional - Array of user phone numbers (hashed).
    - **client_ip_address** (string) - Optional - The IP address of the user.
    - **client_user_agent** (string) - Optional - The User-Agent string of the user.
    - **fbc** (string) - Optional - The Facebook Click ID.
    - **fbp** (string) - Optional - The Facebook Page tab ID.
  - **custom_data** (object) - Optional - Additional data related to the event.
    - **contents** (array) - Optional - Array of content objects associated with the event.
      - **product_id** (string) - Required - The ID of the product.
      - **quantity** (integer) - Optional - The quantity of the product.
      - **delivery_category** (string) - Optional - The delivery category (e.g., 'HOME_DELIVERY').
    - **currency** (string) - Optional - The currency of the transaction.
    - **value** (float) - Optional - The total value of the transaction.
  - **event_source_url** (string) - Optional - The URL where the event occurred.
  - **action_source** (string) - Required - The source of the action (e.g., 'WEBSITE', 'APP').

### Request Example
```python
import time

from facebook_business.adobjects.serverside.action_source import ActionSource
from facebook_business.adobjects.serverside.content import Content
from facebook_business.adobjects.serverside.custom_data import CustomData
from facebook_business.adobjects.serverside.delivery_category import DeliveryCategory
from facebook_business.adobjects.serverside.event import Event
from facebook_business.adobjects.serverside.event_request import EventRequest
from facebook_business.adobjects.serverside.user_data import UserData
from facebook_business.api import FacebookAdsApi

access_token = '<ACCESS_TOKEN>'
pixel_id = 'ADS_PIXEL_ID>'

FacebookAdsApi.init(access_token=access_token)

user_data = UserData(
    emails=['joe@eg.com'],
    phones=['12345678901', '14251234567'],
    # It is recommended to send Client IP and User Agent for Conversions API Events.
    client_ip_address=request.META.get('REMOTE_ADDR'),
    client_user_agent=request.headers['User-Agent'],
    fbc='fb.1.1554763741205.AbCdEfGhIjKlMnOpQrStUvWxYz1234567890',
    fbp='fb.1.1558571054389.1098115397',
)

content = Content(
    product_id='product123',
    quantity=1,
    delivery_category=DeliveryCategory.HOME_DELIVERY,
)

custom_data = CustomData(
    contents=[content],
    currency='usd',
    value=123.45,
)

event = Event(
    event_name='Purchase',
    event_time=int(time.time()),
    user_data=user_data,
    custom_data=custom_data,
    event_source_url='http://jaspers-market.com/product/123',
    action_source=ActionSource.WEBSITE,
)

events = [event]

event_request = EventRequest(
    events=events,
    pixel_id=pixel_id,
)

event_response = event_request.execute()
print(event_response)
```

### Response
#### Success Response (200)
- **events_received** (integer) - The number of events successfully received.
- **fb_pixel_error_messages** (array) - Array of error messages if any occurred.

#### Response Example
```json
{
  "events_received": 1,
  "fb_pixel_error_messages": []
}
```
```

--------------------------------

### ClientParamBuilder API

Source: https://developers.facebook.com/docs/marketing-api/conversions-api/parameter-builder-feature-library/client-side-onboarding

Functions for processing URLs and collecting marketing parameters. It's recommended to call `processAndCollectParams` or `processAndCollectAllParams` before `getFbc` or `getFbp`.

```APIDOC
## ClientParamBuilder

### Description
The builder library supports four APIs: `processAndCollectParams`, `processAndCollectAllParams`, `getFbc`, and `getFbp`.

### `processAndCollectParams(url)`

#### Description
Processes and collects parameters from the input URL (and existing cookie). Saves `fbc` (if available) and `fbp`. Returns a list of updated cookies.

#### Method
```
processAndCollectParams(url: string?)
```

#### Parameters
- **url** (string, optional) - The full URL from which to collect the click ID.

#### Return Value
- An object containing updated cookies, including `_fbc` (if available) and `_fbp`.

#### Usage Example
```javascript
var updated_cookie = clientParamBuilder.processAndCollectParams("https://mytest.example.com?fbclid=test");
var fbc = updated_cookie['_fbc'];
var fbp = updated_cookie['_fbp'];
```

### `processAndCollectAllParams(url)`

#### Description
Covers all functionality of `processAndCollectParams`. If `fbc` does not exist or the URL doesn't contain `fbclid`, it attempts to collect the click ID from `window.location.href`.

#### Method
```
processAndCollectAllParams(url: string?)
```

#### Parameters
- **url** (string, optional) - The full URL from which to collect the click ID.

#### Return Value
- An object containing updated cookies, including `_fbc` (if available) and `_fbp`.

#### Usage Example
```javascript
(async() => {
	var updated_cookie = await clientParamBuilder.processAndCollectAllParams("https://mytest.example.com?balabala=test");
	var fbc = updated_cookie['_fbc'];
    var fbp = updated_cookie['_fbp'];
})();
```

**Note**: `clientParamBuilder.processAndCollectAllParams` is an asynchronous call. If your use case doesn't require complex settings, you don't necessarily need its return value. Call `getFbc()` and `getFbp()` when you need them.

### `getFbc()`

#### Description
Returns the `fbc` value from the cookie.

#### Method
```
getFbc(): string
```

#### Return Value
- The `fbc` string.

### `getFbp()`

#### Description
Returns the `fbp` value from the cookie.

#### Method
```
getFbp(): string
```

#### Return Value
- The `fbp` string.
```

--------------------------------

### Create Ad Set (Ruby)

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-campaign

This snippet illustrates how to create an ad set with a daily budget using the Facebook Marketing API in Ruby.

```APIDOC
## POST /act_AD_ACCOUNT_ID/adsets

### Description
Creates a new ad set with a specified daily budget and targeting options.

### Method
POST

### Endpoint
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets

### Parameters
#### Path Parameters
None

#### Query Parameters
- **access_token** (string) - Required - Your Facebook API access token.

#### Request Body
- **name** (string) - Required - The name of the ad set.
- **optimization_goal** (string) - Required - The optimization goal for the ad set (e.g., REACH, LINK_CLICKS).
- **billing_event** (string) - Required - The billing event for the ad set (e.g., IMPRESSIONS, LINK_CLICKS).
- **bid_amount** (string) - Optional - The bid amount for the ad set.
- **daily_budget** (string) - Optional - The daily budget for the ad set.
- **campaign_id** (string) - Required - The ID of the campaign to which the ad set belongs.
- **targeting** (object) - Required - Targeting specifications for the ad set.
  - **geo_locations** (object) - Required - Geographic targeting.
    - **countries** (array of strings) - Required - List of country codes.
  - **facebook_positions** (array of strings) - Optional - Placement within Facebook (e.g., "feed").
- **status** (string) - Required - The status of the ad set (e.g., PAUSED, ACTIVE).
- **promoted_object** (object) - Required - The object being promoted.
  - **page_id** (string) - Required - The ID of the Facebook page being promoted.

### Request Example
```ruby
ad_account = FacebookAds::AdAccount.get(id)
adsets = ad_account.adsets.create({
    name: 'My Reach Ad Set',
    optimization_goal: 'REACH',
    billing_event: 'IMPRESSIONS',
    bid_amount: '2',
    daily_budget: '1000',
    campaign_id: '<adCampaignLinkClicksID>',
    targeting: {'geo_locations':{'countries':['US']},'facebook_positions':['feed']},
    status: 'PAUSED',
    promoted_object: {'page_id':'<pageID>'},
})
```

### Response
#### Success Response (200)
- **id** (string) - The ID of the newly created ad set.
- **name** (string) - The name of the ad set.
- **effective_status** (string) - The effective status of the ad set.

#### Response Example
```json
{
  "id": "<AD_SET_ID>",
  "name": "My Reach Ad Set",
  "effective_status": "PAUSED"
}
```
```

--------------------------------

### Pixel Tracking Example

Source: https://developers.facebook.com/docs/marketing-api/tracking-specs

An example demonstrating how to track the performance of different pixels in an ad by specifying the tracking pixel in the ad's `tracking_specs` field.

```APIDOC
## Examples

### Pixel Tracking

Track the performance of different pixels in an ad by specifying the tracking pixel in the ad's `tracking_specs` field. For example:

```json
{
  "tracking_specs": [
    {"action.type": "offsite_conversion", "fb_pixel": 1},
    {"action.type": "offsite_conversion", "fb_pixel": 2},
    {"action.type": "offsite_conversion", "fb_pixel": 3}
  ]
}
```

This tracks the performance of pixels "1", "2" and "3". If you want to optimize for pixel "1" only, define the `promoted_object` of the parent ad set. This is useful when you want to optimize for `CHECKOUT`, but also want to track the number of `REGISTRATION` and `ADD_TO_CART`.

*Pixels optimized by specifying the pixel ID in the `promoted_object` are automatically tracked, so you do not need to specify the same pixel in `tracking_specs`.*
```

--------------------------------

### Read Ad Account Ad Rules Library - Android SDK

Source: https://developers.facebook.com/docs/marketing-api/reference/ad-account/adrules_library

Provides an example of how to get ad rules using the Android SDK. It demonstrates initiating a `GraphRequest` and handling the asynchronous response callback.

```java
/* make the API call */
new GraphRequest(
    AccessToken.getCurrentAccessToken(),
    "/{ad-account-id}/adrules_library",
    null,
    HttpMethod.GET,
    new GraphRequest.Callback() {
        public void onCompleted(GraphResponse response) {
            /* handle the result */
        }
    }
).executeAsync();
```